<!DOCTYPE html>
<html>

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  <title>Castie! Notes</title>
  <meta name="description" content="  RxSwiftçš„å­¦ä¹ æˆ‘ä»¬å…ˆå‘Šä¸€æ®µè½, å®åœ¨æ˜¯å¤ªçƒ§è„‘äº†, ä»Šå¤©æˆ‘ä»¬æ¢æ¢è„‘å­, ç©ç‚¹è½»æ¾çš„åŠ¨ç”», å»å¹´æˆ‘è¿è½½äº†ä¸€ç³»åˆ—åŸºäºæœ¬äººå°è£…çš„Objective-Cæ¡†æ¶SQExtensionå±•å¼€çš„é¡¹ç›®å®æˆ˜, é‡Œé¢å…³äºåŠ¨ç”»æ–¹é¢çš„æ¶‰åŠè¿˜æ˜¯è›®å¤šçš„ä»¥è‡³äºå—åˆ°äº†è…¾è®¯çš„å…³æ³¨. è¿™ä¸ªç³»åˆ—æˆ‘ä»¬å°±æ¥ç»†è®²åŠ¨ç”», ä¸€èµ·èµ°ä¸Šè¿›é˜¶ä¹‹è·¯. ä»£ç è§:gi...">
  <meta name="author" content="Wei Wang">

  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="Animations ä½ çœŸçš„ä¼šç”¨Viewçš„åŠ¨ç”»å—?">
  <meta name="twitter:description" content="  RxSwiftçš„å­¦ä¹ æˆ‘ä»¬å…ˆå‘Šä¸€æ®µè½, å®åœ¨æ˜¯å¤ªçƒ§è„‘äº†, ä»Šå¤©æˆ‘ä»¬æ¢æ¢è„‘å­, ç©ç‚¹è½»æ¾çš„åŠ¨ç”», å»å¹´æˆ‘è¿è½½äº†ä¸€ç³»åˆ—åŸºäºæœ¬äººå°è£…çš„Objective-Cæ¡†æ¶SQExtensionå±•å¼€çš„é¡¹ç›®å®æˆ˜, é‡Œé¢å…³äºåŠ¨ç”»æ–¹é¢çš„æ¶‰åŠè¿˜æ˜¯è›®å¤šçš„ä»¥è‡³äºå—åˆ°äº†è…¾è®¯çš„å…³æ³¨. è¿™ä¸ªç³»åˆ—æˆ‘ä»¬å°±æ¥ç»†è®²åŠ¨ç”», ä¸€èµ·èµ°ä¸Šè¿›é˜¶ä¹‹è·¯. ä»£ç è§:gi...">
  
  <meta property="og:type" content="article">
  <meta property="og:title" content="Animations ä½ çœŸçš„ä¼šç”¨Viewçš„åŠ¨ç”»å—?">
  <meta property="og:description" content="  RxSwiftçš„å­¦ä¹ æˆ‘ä»¬å…ˆå‘Šä¸€æ®µè½, å®åœ¨æ˜¯å¤ªçƒ§è„‘äº†, ä»Šå¤©æˆ‘ä»¬æ¢æ¢è„‘å­, ç©ç‚¹è½»æ¾çš„åŠ¨ç”», å»å¹´æˆ‘è¿è½½äº†ä¸€ç³»åˆ—åŸºäºæœ¬äººå°è£…çš„Objective-Cæ¡†æ¶SQExtensionå±•å¼€çš„é¡¹ç›®å®æˆ˜, é‡Œé¢å…³äºåŠ¨ç”»æ–¹é¢çš„æ¶‰åŠè¿˜æ˜¯è›®å¤šçš„ä»¥è‡³äºå—åˆ°äº†è…¾è®¯çš„å…³æ³¨. è¿™ä¸ªç³»åˆ—æˆ‘ä»¬å°±æ¥ç»†è®²åŠ¨ç”», ä¸€èµ·èµ°ä¸Šè¿›é˜¶ä¹‹è·¯. ä»£ç è§:gi...">
  
  <link rel="icon" type="image/ico" href="/assets/images/favicon.ico" />
  <link href="/assets/images/favicon.ico" rel="shortcut icon" type="image/ico">
  
  <link rel="stylesheet" href="/css/main.css">
  <link href="//netdna.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet">

  <link rel="canonical" href="http://localhost:4000/2017/04/Animations-%E4%BD%A0%E7%9C%9F%E7%9A%84%E4%BC%9A%E7%94%A8View%E7%9A%84%E5%8A%A8%E7%94%BB%E5%90%97/">
  <link rel="alternate" type="application/rss+xml" title="Castie!" href="http://localhost:4000/feed.xml">
  
  <meta name="google-site-verification" content="1-1ZlHoRvM0T2FqPbW2S-qLgYXN6rsn52kErlMPd_gw" />
  
</head>


  <body>

    <span class="mobile btn-mobile-menu">
        <i class="fa fa-list btn-mobile-menu__icon"></i>
        <i class="fa fa-angle-up btn-mobile-close__icon hidden"></i>
    </span>
    
    <header class="panel-cover panel-cover--collapsed" style="background-image: url('/assets/images/background-cover.jpg')">
  <div class="panel-main">

    <div class="panel-main__inner panel-inverted">
    <div class="panel-main__content">

        <a href="/#blog" title="å‰å¾€ Castie! çš„ä¸»é¡µ" class="blog-button"><img src="/assets/images/avatar.jpg" width="80" alt="Castie! logo" class="panel-cover__logo logo" /></a>
        <h1 class="panel-cover__title panel-title"><a href="/#blog" title="link to homepage for Castie!" class="blog-button">Castie!</a></h1>
        
        <span class="panel-cover__subtitle panel-subtitle">æ­£æ€åˆ†å¸ƒ, ä¼˜åŠ£ä¼´ç”Ÿ</span>
        
        <hr class="panel-cover__divider" />
        <p class="panel-cover__description">åŒ—å†¥æœ‰é±¼ï¼Œå…¶åä¸ºé²²ï¼ˆkÅ«nï¼‰ã€‚é²²ä¹‹å¤§ï¼Œä¸çŸ¥å…¶å‡ åƒé‡Œä¹Ÿï¼›åŒ–è€Œä¸ºé¸Ÿï¼Œå…¶åä¸ºé¹ã€‚é¹ä¹‹èƒŒï¼Œä¸çŸ¥å…¶å‡ åƒé‡Œä¹Ÿï¼›æ€’è€Œé£ï¼Œå…¶ç¿¼è‹¥å‚å¤©ä¹‹äº‘ã€‚æ˜¯é¸Ÿä¹Ÿï¼Œæµ·è¿åˆ™å°†å¾™äºå—å†¥ã€‚å—å†¥è€…ï¼Œå¤©æ± ä¹Ÿã€‚</p>
        <hr class="panel-cover__divider panel-cover__divider--secondary" />
        
        
        <p class="panel-cover__description">åŒ—æµ·è‹¥æ›°ï¼šâ€œäº•é¼ƒä¸å¯ä»¥è¯­äºæµ·è€…ï¼Œæ‹˜äºè™šä¹Ÿï¼›å¤è™«ä¸å¯ä»¥è¯­äºå†°è€…ï¼Œç¬ƒäºæ—¶ä¹Ÿï¼›æ›²å£«ä¸å¯ä»¥è¯­äºé“è€…ï¼ŒæŸäºæ•™ä¹Ÿã€‚ä»Šå°”å‡ºäºå´–æ¶˜ï¼Œè§‚äºå¤§æµ·ï¼Œä¹ƒçŸ¥å°”ä¸‘ï¼Œå°”å°†å¯ä¸è¯­å¤§ç†çŸ£ã€‚</p>
        
        
        <div class="navigation-wrapper">
          <div>
            <nav class="cover-navigation cover-navigation--primary">
              <ul class="navigation">
                <li class="navigation__item"><a href="/#blog" title="è®¿é—®åšå®¢" class="blog-button">åšå®¢</a></li>
                
                  <li class="navigation__item"><a href="https://coderzsq.github.io/coderZsq.webpack.js/" target="_blank" title="æˆ‘çš„ç®€å†">ç®€å†</a></li>
                
              </ul>
            </nav>
          </div>
          
          <div><nav class="cover-navigation navigation--social">
  <ul class="navigation">

    
    <!-- jianshu-->
    <li class="navigation__item">
      <a href="http://www.jianshu.com/u/9d7fad1a4693" title="@coderZsq çš„ç®€ä¹¦" target="_blank">
        <i class='social fa fa-book'></i>
        <span class="label">jianshu</span>
      </a>
    </li>
    

    
    <!-- juejin-->
    <li class="navigation__item">
      <a href="https://juejin.im/user/57e735dfa22b9d00614eecb8" title="@coderZsq çš„ç¨€åœŸæ˜é‡‘" target="_blank">
        <i class='social fa fa-align-center'></i>
        <span class="label">juejin</span>
      </a>
    </li>
    

  

  
  <!-- Github -->
  <li class="navigation__item">
    <a href="https://github.com/coderZsq" title="@coderZsq çš„ Github" target="_blank">
      <i class='social fa fa-github'></i>
      <span class="label">Github</span>
    </a>
  </li>
  

  

  

  <!-- RSS -->
  <li class="navigation__item">
    <a href="/feed.xml" rel="author" title="RSS" target="_blank">
      <i class='social fa fa-rss'></i>
      <span class="label">RSS</span>
    </a>
  </li>

  
  <!-- Email -->
  <li class="navigation__item">
    <a href="mailto:a13701777868@gmail.com" title="Contact me">
      <i class='social fa fa-envelope'></i>
      <span class="label">Email</span>
    </a>
  </li>
  

  </ul>
</nav>
</div>
        </div>
      </div>
    </div>
    
    
    <div class="panel-cover--overlay cover-slate"></div>
    
  </div>
</header>


    <div class="content-wrapper">
        <div class="content-wrapper__inner">
            <article class="post-container post-container--single" itemscope itemtype="http://schema.org/BlogPosting">
  <header class="post-header">
    <div class="post-meta">
      <time datetime="2017-04-26 11:58:00 +0800" itemprop="datePublished" class="post-meta__date date">2017-04-26</time> &#8226; <span class="post-meta__tags tags">ç§»åŠ¨å¼€å‘</span>
    </div>
    <h1 class="post-title">Animations ä½ çœŸçš„ä¼šç”¨Viewçš„åŠ¨ç”»å—?</h1>
  </header>

  <section class="post">
    <blockquote>
  <p>RxSwiftçš„å­¦ä¹ æˆ‘ä»¬å…ˆå‘Šä¸€æ®µè½, å®åœ¨æ˜¯å¤ªçƒ§è„‘äº†, ä»Šå¤©æˆ‘ä»¬æ¢æ¢è„‘å­, ç©ç‚¹è½»æ¾çš„åŠ¨ç”», å»å¹´æˆ‘è¿è½½äº†ä¸€ç³»åˆ—åŸºäºæœ¬äººå°è£…çš„Objective-Cæ¡†æ¶<a href="https://github.com/coderZsq/coderZsq.project.oc">SQExtension</a>å±•å¼€çš„é¡¹ç›®å®æˆ˜, é‡Œé¢å…³äºåŠ¨ç”»æ–¹é¢çš„æ¶‰åŠè¿˜æ˜¯è›®å¤šçš„ä»¥è‡³äºå—åˆ°äº†è…¾è®¯çš„å…³æ³¨. è¿™ä¸ªç³»åˆ—æˆ‘ä»¬å°±æ¥ç»†è®²åŠ¨ç”», ä¸€èµ·èµ°ä¸Šè¿›é˜¶ä¹‹è·¯. ä»£ç è§:<a href="https://github.com/coderZsq/coderZsq.target.swift">github</a></p>
</blockquote>

<p><img src="http://upload-images.jianshu.io/upload_images/1229762-8f8d322fd1b24ddb.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="" /></p>

<p>å¯¹äºåŠ¨ç”»æ–¹é¢é™¤äº†æœ€åŸºæœ¬çš„ViewåŠ¨ç”»ä¹‹å¤–, å…³äºLayerçš„æ ¸å¿ƒåŠ¨ç”»æˆ‘éƒ½æ˜¯çœ‹è¿™ç¯‡<a href="http://wiki.jikexueyuan.com/project/ios-core-animation/">wiki</a>å­¦çš„, åƒå»å¹´è¿è½½çš„ä¸€äº›è‡ªå®šä¹‰è½¬åœºåŠ¨ç”»æ˜¯ä»<a href="https://www.objccn.io/">Objc</a>ä¸­å­¦çš„. è¿™æ¬¡ä¹°äº†Rayå®¶çš„ä¸€ç³»åˆ—æ•™ç¨‹, å°±æ‰“ç®—å°†åŠ¨ç”»å­¦é€, ä¸å†åªæ˜¯ç¢ç‰‡åŒ–çš„çŸ¥è¯†.å’Œè¿è½½RxSwiftä¸åŒ, è¿™æ¬¡æˆ‘ä»¬å…ˆå¸¦å¤§å®¶ç†Ÿæ‚‰APIä»¥ä¾¿æ›´å¥½çš„ç†è§£.</p>

<p>è¿™ä¸ªåº”è¯¥æ˜¯æ‰€æœ‰åšåŠ¨ç”»æœ€å¸¸ç”¨çš„æ–¹æ³•äº†, å¤§å¤šåŸºæœ¬éƒ½æ˜¯è¿™ä¸ªæ–¹æ³•çš„å˜ä½“.</p>
<div class="highlighter-rouge"><pre class="highlight"><code>@available(iOS 4.0, *)
    open class func animate(withDuration duration: TimeInterval, delay: TimeInterval, options: UIViewAnimationOptions = [], animations: @escaping () -&gt; Swift.Void, completion: (@escaping (Bool) -&gt; Swift.Void)? = nil)
</code></pre>
</div>
<ul>
  <li>duration æŒç»­æ—¶é—´ ä»¥ç§’ä½œä¸ºå•ä½</li>
  <li>delay å»¶è¿Ÿè°ƒç”¨æ—¶é—´ ä»¥ç§’ä½œä¸ºå•ä½</li>
  <li>options åŠ¨ç”»é€‰é¡¹ <code class="highlighter-rouge">[], .x, [.x, .x, ...]</code>ç­‰æ ¼å¼</li>
  <li>animations åŠ¨ç”»ä»£ç å—, æ‰§è¡Œå¯åŠ¨ç”»å±æ€§çš„æ”¹å˜</li>
  <li>completion åŠ¨ç”»å®Œæˆåè°ƒç”¨çš„å°¾éšé—­åŒ…</li>
</ul>

<p>è¿™ä¸ªæ˜¯7.0å¼€å§‹ä½¿ç”¨çš„åŠ¨ç”», å¼¹ç°§æ•ˆæœ</p>
<div class="highlighter-rouge"><pre class="highlight"><code>@available(iOS 7.0, *)
    open class func animate(withDuration duration: TimeInterval, delay: TimeInterval, usingSpringWithDamping dampingRatio: CGFloat, initialSpringVelocity velocity: CGFloat, options: UIViewAnimationOptions = [], animations: @escaping () -&gt; Swift.Void, completion: (@escaping (Bool) -&gt; Swift.Void)? = nil)
</code></pre>
</div>
<ul>
  <li>duration æŒç»­æ—¶é—´ ä»¥ç§’ä½œä¸ºå•ä½</li>
  <li>delay å»¶è¿Ÿè°ƒç”¨æ—¶é—´ ä»¥ç§’ä½œä¸ºå•ä½</li>
  <li>usingSpringWithDamping å‡éœ‡æ¯”ç‡</li>
  <li>initialSpringVelocity åˆå§‹é€Ÿåº¦</li>
  <li>options åŠ¨ç”»é€‰é¡¹ <code class="highlighter-rouge">[], .x, [.x, .x, ...]</code>ç­‰æ ¼å¼</li>
  <li>animations åŠ¨ç”»ä»£ç å—, æ‰§è¡Œå¯åŠ¨ç”»å±æ€§çš„æ”¹å˜</li>
  <li>completion åŠ¨ç”»å®Œæˆåè°ƒç”¨çš„å°¾éšé—­åŒ…</li>
</ul>

<p>è¿™ä¸ªæ˜¯å…³äºUIViewçš„è½¬åœºåŠ¨ç”», å¯ä»¥å¯¹ä¸å¯åŠ¨ç”»å±æ€§è¿›è¡Œè½¬åœºåŠ¨ç”»</p>
<div class="highlighter-rouge"><pre class="highlight"><code>@available(iOS 4.0, *)
    open class func transition(with view: UIView, duration: TimeInterval, options: UIViewAnimationOptions = [], animations: (@escaping () -&gt; Swift.Void)?, completion: (@escaping (Bool) -&gt; Swift.Void)? = nil)
</code></pre>
</div>
<ul>
  <li>view è¿›è¡Œè½¬åœºçš„View</li>
  <li>duration æŒç»­æ—¶é—´ ä»¥ç§’ä½œä¸ºå•ä½</li>
  <li>options åŠ¨ç”»é€‰é¡¹ <code class="highlighter-rouge">[], .x, [.x, .x, ...]</code>ç­‰æ ¼å¼</li>
  <li>animations åŠ¨ç”»ä»£ç å—, æ‰§è¡Œå¯åŠ¨ç”»å±æ€§çš„æ”¹å˜</li>
  <li>completion åŠ¨ç”»å®Œæˆåè°ƒç”¨çš„å°¾éšé—­åŒ…</li>
</ul>

<p>è¿™ä¸ªæ˜¯ä»ä¸€ä¸ªViewè½¬åœºè‡³å¦ä¸€ä¸ªViewçš„åŠ¨ç”»</p>
<div class="highlighter-rouge"><pre class="highlight"><code>@available(iOS 4.0, *)
    open class func transition(from fromView: UIView, to toView: UIView, duration: TimeInterval, options: UIViewAnimationOptions = [], completion: (@escaping (Bool) -&gt; Swift.Void)? = nil) // toView added to fromView.superview, fromView removed from its superview
</code></pre>
</div>
<ul>
  <li>from è¿›è¡Œè½¬åœºçš„View</li>
  <li>to è½¬åœºåçš„View</li>
  <li>duration æŒç»­æ—¶é—´ ä»¥ç§’ä½œä¸ºå•ä½</li>
  <li>options åŠ¨ç”»é€‰é¡¹ <code class="highlighter-rouge">[], .x, [.x, .x, ...]</code>ç­‰æ ¼å¼</li>
  <li>completion åŠ¨ç”»å®Œæˆåè°ƒç”¨çš„å°¾éšé—­åŒ…</li>
</ul>

<p>å…³é”®å¸§åŠ¨ç”»:</p>
<div class="highlighter-rouge"><pre class="highlight"><code>@available(iOS 7.0, *)
    open class func animateKeyframes(withDuration duration: TimeInterval, delay: TimeInterval, options: UIViewKeyframeAnimationOptions = [], animations: @escaping () -&gt; Swift.Void, completion: (@escaping (Bool) -&gt; Swift.Void)? = nil)
</code></pre>
</div>
<ul>
  <li>duration æŒç»­æ—¶é—´ ä»¥ç§’ä½œä¸ºå•ä½</li>
  <li>delay å»¶è¿Ÿè°ƒç”¨æ—¶é—´ ä»¥ç§’ä½œä¸ºå•ä½</li>
  <li>options åŠ¨ç”»é€‰é¡¹ <code class="highlighter-rouge">[], .x, [.x, .x, ...]</code>ç­‰æ ¼å¼</li>
  <li>animations åŠ¨ç”»ä»£ç å—, æ‰§è¡Œå¯åŠ¨ç”»å±æ€§çš„æ”¹å˜</li>
  <li>completion åŠ¨ç”»å®Œæˆåè°ƒç”¨çš„å°¾éšé—­åŒ…</li>
</ul>

<p>æ·»åŠ å…³é”®å¸§:</p>
<div class="highlighter-rouge"><pre class="highlight"><code>@available(iOS 7.0, *)
    open class func addKeyframe(withRelativeStartTime frameStartTime: Double, relativeDuration frameDuration: Double, animations: @escaping () -&gt; Swift.Void) // start time and duration are values between 0.0 and 1.0 specifying time and duration relative to the overall time of the keyframe animation
</code></pre>
</div>
<ul>
  <li>withRelativeStartTime ç›¸å¯¹å¼€å§‹æ—¶é—´, å–å€¼èŒƒå›´0~1, æŒ‰ç™¾åˆ†æ¯”å–å€¼</li>
  <li>relativeDuration ç›¸å¯¹æŒç»­æ—¶é—´ å–å€¼èŒƒå›´0~1, æŒ‰ç™¾åˆ†æ¯”å–å€¼</li>
  <li>animations åŠ¨ç”»ä»£ç å—, æ‰§è¡Œå¯åŠ¨ç”»å±æ€§çš„æ”¹å˜</li>
</ul>

<p>APIä¸­æ¶‰åŠåˆ°çš„<code class="highlighter-rouge">options</code>, <code class="highlighter-rouge">UIViewAnimationOptions</code>, <code class="highlighter-rouge">UIViewKeyframeAnimationOptions</code>ä¸­çš„æšä¸¾æ•ˆæœè¿˜æ˜¯ä¸€ä¸ªä¸€ä¸ªè¯•ä¼šæœ‰æ›´æ·±çš„ä½“ä¼š.</p>

<p>è®²å®ŒAPI, æˆ‘ä»¬å°±æ¥ä½¿ç”¨è¿™äº›APIè¿›è¡Œå®æˆ˜, å’Œä¹‹å‰ä¸€æ ·, æˆ‘ä»¬å°±é€šè¿‡Stroyboardæ­å»ºç•Œé¢:</p>

<p><img src="http://upload-images.jianshu.io/upload_images/1229762-5da65a4d4bfafb70.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="" /></p>

<p>é€šè¿‡IBOutlet è¿›è¡Œå…³è”</p>
<div class="highlighter-rouge"><pre class="highlight"><code>  @IBOutlet var bgImageView: UIImageView! //èƒŒæ™¯å›¾ç‰‡
  
  @IBOutlet var summaryIcon: UIImageView! //é¡¶éƒ¨å›¾æ ‡
  @IBOutlet var summary: UILabel! //é¡¶éƒ¨æ–‡å­—
  
  @IBOutlet var flightNr: UILabel! //Flightæ–‡å­—
  @IBOutlet var gateNr: UILabel! //Gateæ–‡å­—
  @IBOutlet var departingFrom: UILabel! //å‡ºå‘åœ°æ–‡å­—
  @IBOutlet var arrivingTo: UILabel! //ç›®çš„åœ°æ–‡å­—
  @IBOutlet var planeImage: UIImageView! //é£æœºå›¾ç‰‡
  
  @IBOutlet var flightStatus: UILabel! //çŠ¶æ€æ–‡å­—
  @IBOutlet var statusBanner: UIImageView! //çŠ¶æ€å›¾ç‰‡
</code></pre>
</div>

<p>é¦–å…ˆæˆ‘ä»¬è¿›è¡Œå›¾ç‰‡çš„è½¬åœºåˆ‡æ¢</p>
<div class="highlighter-rouge"><pre class="highlight"><code>  func fadeImageView(imageView: UIImageView, toImage: UIImage, showEffects: Bool) {

    UIView.transition(with: imageView, duration: 1.0, options: .transitionCrossDissolve,
      animations: {
        imageView.image = toImage
      },
      completion: nil
    )

    UIView.animate(withDuration: 1.0, delay: 0.0, options: .curveEaseOut,
      animations: {
        self.snowView.alpha = showEffects ? 1.0 : 0.0
      },
      completion: nil
    )
  }
</code></pre>
</div>
<ul>
  <li>transitionCrossDissolve optionsæšä¸¾ä¸­çš„ä¸€ä¸ª äº¤å‰è¿‡åº¦æº¶è§£</li>
  <li>curveEaseOut optionsæšä¸¾ä¸­çš„ä¸€ä¸ª å¿«è¿›æ…¢å‡º ç±»ä¼¼åˆ¹è½¦</li>
</ul>

<p>æ¥ç€æˆ‘ä»¬æ¥åšç«‹ä½“è½¬åœºçš„æ•ˆæœ, ä½†è¿™ä¸ªå¹¶ä¸æ˜¯çœŸæ­£çš„ç«‹ä½“æ•ˆæœ, è€Œæ˜¯é€šè¿‡ä¸¤ä¸ªViewçš„åŠ¨ç”»è¿›è¡Œæ¨¡æ‹Ÿ</p>
<div class="highlighter-rouge"><pre class="highlight"><code>  func cubeTransition(label: UILabel, text: String, direction: AnimationDirection) {

    let auxLabel = UILabel(frame: label.frame) //æ–°å»ºä¸€ä¸ªä¸´æ—¶Label
    auxLabel.text = text
    auxLabel.font = label.font
    auxLabel.textAlignment = label.textAlignment
    auxLabel.textColor = label.textColor
    auxLabel.backgroundColor = label.backgroundColor

    let auxLabelOffset = CGFloat(direction.rawValue) * //è®¾ç½®åç§»
      label.frame.size.height/2.0

    auxLabel.transform = CGAffineTransform(scaleX: 1.0, y: 0.1).concatenating( //è¿™é‡Œçš„concatenating ç±»ä¼¼äºRxSwiftçš„concat, å‘åå åŠ .
      CGAffineTransform(translationX: 0.0, y: auxLabelOffset))

    label.superview!.addSubview(auxLabel) //æ·»åŠ Viewä¿æŒå’ŒLabelå¹³çº§

    UIView.animate(withDuration: 0.5, delay: 0.0, options: .curveEaseOut,
      animations: {
        auxLabel.transform = .identity //è¿˜åŸä»¿å°„
        label.transform =
          CGAffineTransform(scaleX: 1.0, y: 0.1).concatenating( //è¿›è¡Œä»¿å°„ç¼©æ”¾åŠ¨ç”»
          CGAffineTransform(translationX: 0.0, y: -auxLabelOffset)) //è¿›è¡Œä½ç§»ç¼©æ”¾åŠ¨ç”»
      },
      completion: {_ in
        label.text = auxLabel.text
        label.transform = .identity //è¿˜åŸä»¿å°„

        auxLabel.removeFromSuperview() //å®Œæˆååˆ é™¤ä¸´æ—¶Label
      }
    )
  }
</code></pre>
</div>
<p>è¿›è¡Œç§»åŠ¨åŠ¨ç”»:</p>
<div class="highlighter-rouge"><pre class="highlight"><code>  func moveLabel(label: UILabel, text: String, offset: CGPoint) {
    let auxLabel = UILabel(frame: label.frame) //åŒæ ·æ–°å»ºä¸€ä¸ªä¸´æ—¶Label
    auxLabel.text = text
    auxLabel.font = label.font
    auxLabel.textAlignment = label.textAlignment
    auxLabel.textColor = label.textColor
    auxLabel.backgroundColor = UIColor.clear

    auxLabel.transform = CGAffineTransform(translationX: offset.x, y: offset.y) //ä¸´æ—¶Labelè¿›è¡Œä½ç§»
    auxLabel.alpha = 0
    view.addSubview(auxLabel)

    UIView.animate(withDuration: 0.5, delay: 0.0, options: .curveEaseIn,
      animations: {
        label.transform = CGAffineTransform(translationX: offset.x, y: offset.y)
        label.alpha = 0.0
      },
      completion: nil
    )

    UIView.animate(withDuration: 0.25, delay: 0.1, options: .curveEaseIn,
      animations: {
        auxLabel.transform = .identity
        auxLabel.alpha = 1.0
      },
      completion: {_ in
        //clean up
        auxLabel.removeFromSuperview()
        label.text = text
        label.alpha = 1.0
        label.transform = .identity
      }
    )
  }

</code></pre>
</div>
<ul>
  <li>curveEaseIn optionsæšä¸¾ä¸­çš„ä¸€ä¸ª æ…¢è¿›å¿«å‡º ç±»ä¼¼åŠ é€Ÿåº¦</li>
</ul>

<p>ç»™é£æœºæ·»åŠ ä¸Šå…³é”®å¸§åŠ¨ç”»</p>
<div class="highlighter-rouge"><pre class="highlight"><code>func planeDepart() {
    let originalCenter = planeImage.center //ä¿å­˜é£æœºä½ç½®

    UIView.animateKeyframes(withDuration: 1.5, delay: 0.0, //è¿›è¡Œå…³é”®å¸§åŠ¨ç”»
      animations: {
        //add keyframes
        UIView.addKeyframe(withRelativeStartTime: 0.0, relativeDuration: 0.25, //æ·»åŠ å…³é”®å¸§
          animations: {
            self.planeImage.center.x += 80.0 //è¿›è¡Œä½ç§»
            self.planeImage.center.y -= 10.0
          }
        )

        UIView.addKeyframe(withRelativeStartTime: 0.1, relativeDuration: 0.4) {
          self.planeImage.transform = CGAffineTransform(rotationAngle: -.pi / 8) //è¿›è¡Œæ—‹è½¬
        }

        UIView.addKeyframe(withRelativeStartTime: 0.25, relativeDuration: 0.25) {
          self.planeImage.center.x += 100.0
          self.planeImage.center.y -= 50.0
          self.planeImage.alpha = 0.0 //æ·¡å‡ºåŠ¨ç”»
        }

        UIView.addKeyframe(withRelativeStartTime: 0.51, relativeDuration: 0.01) {
          self.planeImage.transform = .identity //é‡ç½®ä»¿å°„åŠ¨ç”»
          self.planeImage.center = CGPoint(x: 0.0, y: originalCenter.y) //é‡ç½®ä½ç½®
        }

        UIView.addKeyframe(withRelativeStartTime: 0.55, relativeDuration: 0.45) {
          self.planeImage.alpha = 1.0 //æ·¡å…¥åŠ¨ç”»
          self.planeImage.center = originalCenter //å›åˆ°åŸç‚¹
        }

      },
      completion: nil
    )
  }

</code></pre>
</div>
<p>æœ€åæˆ‘ä»¬å°†æ‰€æœ‰åŠ¨ç”»æ”¾åœ¨ä¸€èµ·</p>
<div class="highlighter-rouge"><pre class="highlight"><code>  func changeFlight(to data: FlightData, animated: Bool = false) {
    
    // populate the UI with the next flight's data
    if animated {
      planeDepart()
      summarySwitch(to: data.summary)

      fadeImageView(imageView: bgImageView,
                    toImage: UIImage(named: data.weatherImageName)!,
                    showEffects: data.showWeatherEffects)

      let direction: AnimationDirection = data.isTakingOff ?
        .positive : .negative

      cubeTransition(label: flightNr, text: data.flightNr,  direction: direction)
      cubeTransition(label: gateNr, text: data.gateNr,  direction: direction)

      let offsetDeparting = CGPoint( //è®¾å®šåç§»é‡
        x: CGFloat(direction.rawValue * 80),
        y: 0.0
      )

      moveLabel(label: departingFrom, text: data.departingFrom,
                offset: offsetDeparting)

      let offsetArriving = CGPoint( /è®¾å®šåç§»é‡
        x: 0.0,
        y: CGFloat(direction.rawValue * 50)
      )

      moveLabel(label: arrivingTo, text: data.arrivingTo,
                offset: offsetArriving)

      cubeTransition(label: flightStatus, text: data.flightStatus,  direction: direction)

    } else {
      bgImageView.image = UIImage(named: data.weatherImageName)
      snowView.isHidden = !data.showWeatherEffects
      flightNr.text = data.flightNr
      gateNr.text = data.gateNr
      departingFrom.text = data.departingFrom
      arrivingTo.text = data.arrivingTo

      flightStatus.text = data.flightStatus
      summary.text = data.summary
    }
    
    // schedule next flight
    delay(seconds: 3.0) { //3ç§’åè¿›è¡Œé€’å½’è°ƒç”¨.
      self.changeFlight(to: data.isTakingOff ? parisToRome : londonToParis, animated: true)
    }
  }
</code></pre>
</div>
<p>æ¼”ç¤ºæ•ˆæœ:</p>

<p><img src="http://upload-images.jianshu.io/upload_images/1229762-6c5bcf96d89c86d8.gif?imageMogr2/auto-orient/strip" alt="" /></p>

<p>About:</p>

<p><img src="http://upload-images.jianshu.io/upload_images/1229762-3f8925783027b3fa.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="ç‚¹å‡»ä¸‹æ–¹é“¾æ¥è·³è½¬!!" /></p>

<p><a href="https://github.com/coderZsq/coderZsq.target.swift">ğŸŒŸ æºç  è¯·ç‚¹è¿™é‡ŒğŸŒŸÂ Â»&gt; å–œæ¬¢çš„æœ‹å‹è¯·ç‚¹å–œæ¬¢Â Â»&gt; ä¸‹è½½æºç çš„åŒå­¦è¯·é€ä¸‹å°æ˜Ÿæ˜ŸÂ Â»&gt; æœ‰é—²é’±çš„å£•ä»¬å¯ä»¥è¿›è¡Œæ‰“èµÂ Â»&gt; å°å¼Ÿä¼šå°½å¿«æ¨å‡ºæ›´å¥½çš„æ–‡ç« å’Œå¤§å®¶åˆ†äº«Â Â»&gt; ä½ çš„æ¿€åŠ±å°±æ˜¯æˆ‘çš„åŠ¨åŠ›!! </a></p>

  </section>
</article>

<section class="read-more">
   
   
   <div class="read-more-item">
       <span class="read-more-item-dim">æœ€è¿‘çš„æ–‡ç« </span>
       <h2 class="post-list__post-title post-title"><a href="/2017/04/Animations-%E6%A0%B8%E5%BF%83%E5%8A%A8%E7%94%BB%E4%BB%80%E4%B9%88%E7%9A%84%E8%A6%81%E7%A0%94%E7%A9%B6%E9%80%8F!/" title="link to Animations æ ¸å¿ƒåŠ¨ç”»ä»€ä¹ˆçš„è¦ç ”ç©¶é€!">Animations æ ¸å¿ƒåŠ¨ç”»ä»€ä¹ˆçš„è¦ç ”ç©¶é€!</a></h2>
       <p class="excerpt">  çœ‹è¿‡æˆ‘å»å¹´æ–‡ç« çš„åŒå­¦ä»¬ä¸€å®šçŸ¥é“å¯¹äºåŠ¨ç”»æ–¹é¢è¿˜æ˜¯æœ‰ç‚¹å¿ƒå¾—ä½“ä¼šçš„, å¯¹äºæ ¸å¿ƒåŠ¨ç”»çš„å­¦ä¹ , ä¹‹å‰æˆ‘çœ‹çš„æ˜¯iOS Core Animationçš„ç¿»è¯‘ç‰ˆ, çœ‹å®Œæ„Ÿè§‰çœŸçš„å­¦åˆ°äº†ä¸å°‘ä¸œè¥¿, ä¸è¿‡è¿™æœ¬ä¹¦å·²ç»æœ‰ç‚¹æ—¶æ—¥äº†, æˆ‘ä»¬éœ€è¦ä¸æ—¶ä¿±è¿›å­¦ä¹ æœ€å‰æ²¿çš„æŠ€æœ¯.ä»£ç è§:githubå’Œä¹‹å‰çš„Viewçš„åŠ¨ç”»ä¸€æ ·, è¿™æ¬¡Layerçš„æ ¸å¿ƒåŠ¨ç”», æˆ‘ä»¬ä¹Ÿæ˜¯å…ˆç»†è®²API, å†è¿›è¡Œé¡¹ç›®å®æˆ˜, è¿™æ ·ä¼šæ¯”è¾ƒå®¹æ˜“ç†è§£, æ–°å…¥è¡Œçš„åŒå­¦ä¸ä¼šæœ›è€Œå´æ­¥.å…¶å®åˆšå­¦ä¹ æ ¸å¿ƒåŠ¨ç”»çš„æ—¶å€™è¿˜æœ‰æœ‰ç‚¹éš¾åº¦çš„, å…ˆæä¸¤ä¸ªæ³¨æ„ç‚¹: 1) ç›¸å¯¹äºviewçš„c...&hellip;</p>
       <div class="post-list__meta"><time datetime="2017-04-27 10:44:00 +0800" class="post-list__meta--date date">2017-04-27</time> &#8226; <span class="post-list__meta--tags tags">ç§»åŠ¨å¼€å‘</span><a class="btn-border-small" href=/2017/04/Animations-%E6%A0%B8%E5%BF%83%E5%8A%A8%E7%94%BB%E4%BB%80%E4%B9%88%E7%9A%84%E8%A6%81%E7%A0%94%E7%A9%B6%E9%80%8F!/>ç»§ç»­é˜…è¯»</a></div>
   </div>
   
   
   
   
   <div class="read-more-item">
       <span class="read-more-item-dim">æ›´æ—©çš„æ–‡ç« </span>
       <h2 class="post-list__post-title post-title"><a href="/2017/04/RxSwift-%E5%87%BD%E6%95%B0%E5%BC%8F%E7%BB%84%E5%90%88%E8%BF%90%E7%AE%97%E7%AC%A6%E5%AE%9E%E6%93%8D/" title="link to RxSwift å‡½æ•°å¼ç»„åˆè¿ç®—ç¬¦å®æ“">RxSwift å‡½æ•°å¼ç»„åˆè¿ç®—ç¬¦å®æ“</a></h2>
       <p class="excerpt">  ä¸Šå‘¨æˆ‘ä»¬å¼€å¯äº†RxSwiftçš„å­¦ä¹ ä¹‹æ—…, ä»å¯è§‚å¯Ÿåºåˆ—â€“&gt;è¿‡æ»¤è¿ç®—ç¬¦â€“&gt;æ˜ å°„è¿ç®—ç¬¦, æ¥ä¸‹æ¥æˆ‘ä»¬æ¥è¯´è¯´ç»„åˆè¿ç®—ç¬¦. è¯´å®è¯, å¯¹äºä¹‹å‰çš„å†…å®¹çš„å­¦ä¹ , æˆ‘è§‰å¾—è¿˜æ˜¯æ¯”è¾ƒé€šä¿—æ˜“æ‡‚çš„, ä½†æ˜¯è¿™æ¬¡çš„ç»„åˆè¿ç®—ç¬¦ç›¸æ¯”ä¹‹å‰åœ¨ç†è§£éš¾æ˜“ç¨‹åº¦ä¸Šåˆä¸Šäº†ä¸ªæ¡£æ¬¡, æœ¬èŠ‚æˆ‘ä»¬å°±æ¥æ”»å…‹è¿™ä¸€æŒ‘æˆ˜å§! ä»£ç è§:githubæœ¬èŠ‚æ‰€éœ€çš„ä¸€äº›å…³äºç»„åˆçš„åŸºæœ¬çŸ¥è¯†å·²ç»æ›´æ–°åˆ°githubä»£ç ä¸­çš„playgroundæ–‡ä»¶ä¸­, æ²¡æœ‰æ¥è§¦è¿‡å“åº”å¼ç¼–ç¨‹çš„åŒå­¦è¯·å’Œä¹‹å‰ä¸€æ ·å…ˆè¡Œåœ¨playgroundä¸­äº†è§£æ¦‚è¦ä»¥ä¾¿æ›´å¥½çš„ç†è§£æœ¬æ–‡. æœ¬...&hellip;</p>
       <div class="post-list__meta"><time datetime="2017-04-24 14:51:00 +0800" class="post-list__meta--date date">2017-04-24</time> &#8226; <span class="post-list__meta--tags tags">ç§»åŠ¨å¼€å‘</span><a class="btn-border-small" href=/2017/04/RxSwift-%E5%87%BD%E6%95%B0%E5%BC%8F%E7%BB%84%E5%90%88%E8%BF%90%E7%AE%97%E7%AC%A6%E5%AE%9E%E6%93%8D/>ç»§ç»­é˜…è¯»</a></div>
   </div>
   
</section>

<section class="post-comments">
  
  
  
  
</section>


            <section class="footer">
    <footer>
    	<span class="footer__copyright">æœ¬ç«™ç‚¹é‡‡ç”¨<a href="http://creativecommons.org/licenses/by-nc-sa/4.0/">çŸ¥è¯†å…±äº« ç½²å-éå•†ä¸šæ€§ä½¿ç”¨-ç›¸åŒæ–¹å¼å…±äº« 4.0 å›½é™… è®¸å¯åè®®</a></span>
        <span class="footer__copyright">ç”± <a href="https://jekyllrb.com">Jekyll</a> äº 2018-04-19 ç”Ÿæˆï¼Œæ„Ÿè°¢ <a href="https://www.digitalocean.com/?refcode=30ed2d146762">Digital Ocean</a> ä¸ºæœ¬ç«™æä¾›ç¨³å®šçš„ VPS æœåŠ¡</span>
        <span class="footer__copyright">æœ¬ç«™ç”± <a href="https://github.com/coderZsq">@Castie!</a> åˆ›å»ºï¼Œé‡‡ç”¨ <a href="https://github.com/onevcat/vno-jekyll">Vno - Jekyll</a> ä½œä¸ºä¸»é¢˜ï¼Œæ‚¨å¯ä»¥åœ¨ GitHub æ‰¾åˆ°<a href="https://github.com/onevcat/OneV-s-Den">æœ¬ç«™æºç </a> - &copy; 2018</span>
    </footer>
</section>

        </div>
    </div>
    
    <script type="text/javascript" src="//code.jquery.com/jquery-1.11.3.min.js"></script>

<script type="text/javascript" src="/js/main.js"></script>



    
  </body>

</html>
