<!DOCTYPE html>
<html>

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  <title>Castie! Notes</title>
  <meta name="description" content="  ä¸Šå›æˆ‘ä»¬è¯´åˆ°MVVM, è¯´çœŸçš„æˆ‘çœŸæ²¡è§‰å¾—MVVMä¸ºä»€ä¹ˆä¼šé¼“å¹çš„é‚£ä¹ˆç¥, ç”¨å¤§ç¯‡å¹…çš„å™è¿°æˆ‘ç€å®æä¸èµ·åŠ². å›é¡¾ä¸€ä¸‹å†…å®¹, æˆ‘ä»¬é€šè¿‡Node.jsæ­å»ºäº†å›¾ç‰‡æœåŠ¡å™¨, å¹¶é€šè¿‡KingfisheråŠ è½½å‡ºæ¥, è¯´çœŸçš„å‰ä¸¤ç¯‡ä¸»è¦è¿˜æ˜¯å™è¿°ç§»åŠ¨ç«¯å…¥é—¨åç«¯å§.. å™—.. ç¬‘.. è¿™ä¸€èŠ‚æˆ‘ä»¬æ¥è¯´è¯´MVPæ¨¡å¼, ä¹Ÿæ˜¯æˆ‘æ¯”è¾ƒå–œæ¬¢ä»¥åŠ...">
  <meta name="author" content="Wei Wang">

  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="Hybird æ­å»ºå‰ç«¯Vue.jså¹¶å‡çº§è‡³MVP">
  <meta name="twitter:description" content="  ä¸Šå›æˆ‘ä»¬è¯´åˆ°MVVM, è¯´çœŸçš„æˆ‘çœŸæ²¡è§‰å¾—MVVMä¸ºä»€ä¹ˆä¼šé¼“å¹çš„é‚£ä¹ˆç¥, ç”¨å¤§ç¯‡å¹…çš„å™è¿°æˆ‘ç€å®æä¸èµ·åŠ². å›é¡¾ä¸€ä¸‹å†…å®¹, æˆ‘ä»¬é€šè¿‡Node.jsæ­å»ºäº†å›¾ç‰‡æœåŠ¡å™¨, å¹¶é€šè¿‡KingfisheråŠ è½½å‡ºæ¥, è¯´çœŸçš„å‰ä¸¤ç¯‡ä¸»è¦è¿˜æ˜¯å™è¿°ç§»åŠ¨ç«¯å…¥é—¨åç«¯å§.. å™—.. ç¬‘.. è¿™ä¸€èŠ‚æˆ‘ä»¬æ¥è¯´è¯´MVPæ¨¡å¼, ä¹Ÿæ˜¯æˆ‘æ¯”è¾ƒå–œæ¬¢ä»¥åŠ...">
  
  <meta property="og:type" content="article">
  <meta property="og:title" content="Hybird æ­å»ºå‰ç«¯Vue.jså¹¶å‡çº§è‡³MVP">
  <meta property="og:description" content="  ä¸Šå›æˆ‘ä»¬è¯´åˆ°MVVM, è¯´çœŸçš„æˆ‘çœŸæ²¡è§‰å¾—MVVMä¸ºä»€ä¹ˆä¼šé¼“å¹çš„é‚£ä¹ˆç¥, ç”¨å¤§ç¯‡å¹…çš„å™è¿°æˆ‘ç€å®æä¸èµ·åŠ². å›é¡¾ä¸€ä¸‹å†…å®¹, æˆ‘ä»¬é€šè¿‡Node.jsæ­å»ºäº†å›¾ç‰‡æœåŠ¡å™¨, å¹¶é€šè¿‡KingfisheråŠ è½½å‡ºæ¥, è¯´çœŸçš„å‰ä¸¤ç¯‡ä¸»è¦è¿˜æ˜¯å™è¿°ç§»åŠ¨ç«¯å…¥é—¨åç«¯å§.. å™—.. ç¬‘.. è¿™ä¸€èŠ‚æˆ‘ä»¬æ¥è¯´è¯´MVPæ¨¡å¼, ä¹Ÿæ˜¯æˆ‘æ¯”è¾ƒå–œæ¬¢ä»¥åŠ...">
  
  <link rel="icon" type="image/ico" href="/assets/images/favicon.ico" />
  <link href="/assets/images/favicon.ico" rel="shortcut icon" type="image/ico">
  
  <link rel="stylesheet" href="/css/main.css">
  <link href="//netdna.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet">

  <link rel="canonical" href="http://localhost:4000/2017/04/Hybird-%E6%90%AD%E5%BB%BA%E5%89%8D%E7%AB%AFVue.js%E5%B9%B6%E5%8D%87%E7%BA%A7%E8%87%B3MVP/">
  <link rel="alternate" type="application/rss+xml" title="Castie!" href="http://localhost:4000/feed.xml">
  
  <meta name="google-site-verification" content="1-1ZlHoRvM0T2FqPbW2S-qLgYXN6rsn52kErlMPd_gw" />
  
</head>


  <body>

    <span class="mobile btn-mobile-menu">
        <i class="fa fa-list btn-mobile-menu__icon"></i>
        <i class="fa fa-angle-up btn-mobile-close__icon hidden"></i>
    </span>
    
    <header class="panel-cover panel-cover--collapsed" style="background-image: url('/assets/images/background-cover.jpg')">
  <div class="panel-main">

    <div class="panel-main__inner panel-inverted">
    <div class="panel-main__content">

        <a href="/#blog" title="å‰å¾€ Castie! çš„ä¸»é¡µ" class="blog-button"><img src="/assets/images/avatar.jpg" width="80" alt="Castie! logo" class="panel-cover__logo logo" /></a>
        <h1 class="panel-cover__title panel-title"><a href="/#blog" title="link to homepage for Castie!" class="blog-button">Castie!</a></h1>
        
        <span class="panel-cover__subtitle panel-subtitle">æ­£æ€åˆ†å¸ƒ, ä¼˜åŠ£ä¼´ç”Ÿ</span>
        
        <hr class="panel-cover__divider" />
        <p class="panel-cover__description">åŒ—å†¥æœ‰é±¼ï¼Œå…¶åä¸ºé²²ï¼ˆkÅ«nï¼‰ã€‚é²²ä¹‹å¤§ï¼Œä¸çŸ¥å…¶å‡ åƒé‡Œä¹Ÿï¼›åŒ–è€Œä¸ºé¸Ÿï¼Œå…¶åä¸ºé¹ã€‚é¹ä¹‹èƒŒï¼Œä¸çŸ¥å…¶å‡ åƒé‡Œä¹Ÿï¼›æ€’è€Œé£ï¼Œå…¶ç¿¼è‹¥å‚å¤©ä¹‹äº‘ã€‚æ˜¯é¸Ÿä¹Ÿï¼Œæµ·è¿åˆ™å°†å¾™äºå—å†¥ã€‚å—å†¥è€…ï¼Œå¤©æ± ä¹Ÿã€‚</p>
        <hr class="panel-cover__divider panel-cover__divider--secondary" />
        
        
        <p class="panel-cover__description">åŒ—æµ·è‹¥æ›°ï¼šâ€œäº•é¼ƒä¸å¯ä»¥è¯­äºæµ·è€…ï¼Œæ‹˜äºè™šä¹Ÿï¼›å¤è™«ä¸å¯ä»¥è¯­äºå†°è€…ï¼Œç¬ƒäºæ—¶ä¹Ÿï¼›æ›²å£«ä¸å¯ä»¥è¯­äºé“è€…ï¼ŒæŸäºæ•™ä¹Ÿã€‚ä»Šå°”å‡ºäºå´–æ¶˜ï¼Œè§‚äºå¤§æµ·ï¼Œä¹ƒçŸ¥å°”ä¸‘ï¼Œå°”å°†å¯ä¸è¯­å¤§ç†çŸ£ã€‚</p>
        
        
        <div class="navigation-wrapper">
          <div>
            <nav class="cover-navigation cover-navigation--primary">
              <ul class="navigation">
                <li class="navigation__item"><a href="/#blog" title="è®¿é—®åšå®¢" class="blog-button">åšå®¢</a></li>
                
                  <li class="navigation__item"><a href="https://coderzsq.github.io/coderZsq.practice.web/" target="_blank" title="æˆ‘çš„ç®€å†">ç®€å†</a></li>
                
              </ul>
            </nav>
          </div>
          
          <div><nav class="cover-navigation navigation--social">
  <ul class="navigation">

    
    <!-- juejin-->
    <li class="navigation__item">
      <a href="https://juejin.im/user/57e735dfa22b9d00614eecb8/posts" title="@coderZsq çš„ç¨€åœŸæ˜é‡‘" target="_blank">
        <i class='social fa fa-book'></i>
        <span class="label">juejin</span>
      </a>
    </li>
    

  

  
  <!-- Github -->
  <li class="navigation__item">
    <a href="https://github.com/coderZsq" title="@coderZsq çš„ Github" target="_blank">
      <i class='social fa fa-github'></i>
      <span class="label">Github</span>
    </a>
  </li>
  

  

  

  <!-- RSS -->
  <li class="navigation__item">
    <a href="/feed.xml" rel="author" title="RSS" target="_blank">
      <i class='social fa fa-rss'></i>
      <span class="label">RSS</span>
    </a>
  </li>

  
  <!-- Email -->
  <li class="navigation__item">
    <a href="mailto:a13701777868@gmail.com" title="Contact me">
      <i class='social fa fa-envelope'></i>
      <span class="label">Email</span>
    </a>
  </li>
  

  </ul>
</nav>
</div>
        </div>
      </div>
    </div>
    
    
    <div class="panel-cover--overlay cover-disabled"></div>
    
  </div>
</header>


    <div class="content-wrapper">
        <div class="content-wrapper__inner">
            <article class="post-container post-container--single" itemscope itemtype="http://schema.org/BlogPosting">
  <header class="post-header">
    <div class="post-meta">
      <time datetime="2017-04-11 15:06:00 +0800" itemprop="datePublished" class="post-meta__date date">2017-04-11</time> &#8226; <span class="post-meta__tags tags">ç§»åŠ¨å¼€å‘</span>
    </div>
    <h1 class="post-title">Hybird æ­å»ºå‰ç«¯Vue.jså¹¶å‡çº§è‡³MVP</h1>
  </header>

  <section class="post">
    <blockquote>
  <p>ä¸Šå›æˆ‘ä»¬è¯´åˆ°MVVM, è¯´çœŸçš„æˆ‘çœŸæ²¡è§‰å¾—MVVMä¸ºä»€ä¹ˆä¼šé¼“å¹çš„é‚£ä¹ˆç¥, ç”¨å¤§ç¯‡å¹…çš„å™è¿°æˆ‘ç€å®æä¸èµ·åŠ². å›é¡¾ä¸€ä¸‹å†…å®¹, æˆ‘ä»¬é€šè¿‡Node.jsæ­å»ºäº†å›¾ç‰‡æœåŠ¡å™¨, å¹¶é€šè¿‡KingfisheråŠ è½½å‡ºæ¥, è¯´çœŸçš„å‰ä¸¤ç¯‡ä¸»è¦è¿˜æ˜¯å™è¿°ç§»åŠ¨ç«¯å…¥é—¨åç«¯å§.. å™—.. ç¬‘.. è¿™ä¸€èŠ‚æˆ‘ä»¬æ¥è¯´è¯´MVPæ¨¡å¼, ä¹Ÿæ˜¯æˆ‘æ¯”è¾ƒå–œæ¬¢ä»¥åŠæ¨èå¤§å®¶ä½¿ç”¨çš„ä¸€ç§è®¾è®¡æ€æƒ³. ä»£ç è§:<a href="https://github.com/coderZsq/coderZsq.target.swift">github</a></p>
</blockquote>

<p><img src="http://upload-images.jianshu.io/upload_images/1229762-3866097366648136.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="" /></p>

<h6 id="å‚è€ƒé“¾æ¥">å‚è€ƒé“¾æ¥:</h6>

<ul>
  <li><a href="http://www.jianshu.com/p/5a03995a6ce1">Hybird æ­å»ºé›¶è€¦åˆæ¶æ„ä»MVCå¼€å§‹</a></li>
  <li><a href="http://www.jianshu.com/p/846b9f181cb7">Hybird æ­å»ºåç«¯Koa.jså¹¶è¿‡åº¦åˆ°MVVM</a></li>
</ul>

<p>ä»¥ä¸‹å†…å®¹åœ¨ä¸Šè¿°æ–‡ç« åŸºç¡€ä¸Šè¿›è¡Œ, è¯·äº‹å…ˆæŸ¥é˜….</p>

<p>çœ‹äº†ç½‘ä¸Šå¥½å¤šç±»å‹çš„æ¶æ„è®¾è®¡, ç”¨é‚£äº›ç„ä¹çš„ç†è®º, è¯¸å¦‚é«˜å†…èšä½è€¦åˆ, DRYç­‰ä¸“æœ‰åè¯ä¹‹ç±»çš„æ³›æ³›è€Œè°ˆ, ä¸€æ¡æ¡æçº²æŒˆé¢†çš„è¯‰è¯´ç€ç¼–å†™ä»£ç çš„è¯¥æœ‰çš„è§„èŒƒ, æˆ‘ä¸å¦è®¤è¿™äº›æ€æƒ³å¾ˆé‡è¦, ä½†ä¸èƒ½è¿ç”¨åˆ°å®é™…ä¸Šä¹Ÿåªèƒ½æ˜¯å¤¸å¤¸å…¶è°ˆç½¢äº†, ä¹Ÿè®¸æ˜¯æˆ‘çš„é“è¡Œç•¥ä½ä¸èƒ½ä¼åŠé‚£æ ·çš„é«˜åº¦, ä½†å…‰æœ‰æ€ç»´æ–¹å¼ä¸ç»™å®æ“æ–¹å¼, ä¸å®—æ•™åˆæœ‰ä½•å¼‚? æ€»ç»“å°±æ˜¯, å¯¹äºæ¶æ„è®¾è®¡, ä¸ä¸Šä»£ç å°±æ˜¯æ‰¯!</p>

<p>MVP</p>

<p>MVPå°±æ˜¯ Most Valuable Player, æœ€æœ‰ä»·å€¼çƒå‘˜.. ç¬‘â€ è¯è¯´æˆ‘å¤§å¨å°‘åœºå‡ä¸‰åŒèµ›å­£å°ç¥å•Š, è¨€å½’æ­£ä¼ , MVPåœ¨æ¶æ„è®¾è®¡æ¥è¯´æ˜¯æŒ‡ Model, View, Presenter,  å…¶ä¸­çš„PresenteræŒ‡çš„æ˜¯å±•ç¤ºå±‚, æ“ä½œé¡µé¢é€»è¾‘çš„ä¸€å±‚. MVPä¹Ÿæ˜¯æˆ‘æœ€ä¸ºæ¨èçš„ä¸€ç§è®¾è®¡æ¨¡å¼, åšAndroidçš„åŒå­¦åº”è¯¥æœ‰å¬è¯´è¿‡é€‚é…å™¨æ¨¡å¼, ä¹Ÿå°±æ˜¯Adapter, MVPä¸­çš„Presenterå°±å¥½åƒæ˜¯åŒå‘çš„Adapter, å¯¹ä»£ç è¿›è¡Œå®Œå…¨çš„è§£è€¦å®ç°ç»„ä»¶åŒ–.</p>

<p>æˆ‘ä»¬æ¥çœ‹çœ‹å¦‚ä½•åˆ‡æ¢åˆ°MVPæ¨¡å¼:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>.
â”œâ”€â”€ Controller.swift
â”œâ”€â”€ Model.swift
â”œâ”€â”€ Presenter.swift
â”œâ”€â”€ View.swift
â””â”€â”€ ViewModel.swift
</code></pre>
</div>

<p>æˆ‘ä»¬åœ¨ç›®å½•ç»“æ„ä¸­æ·»åŠ Presenter.swift</p>

<p>Presenter.swift</p>

<div class="highlighter-rouge"><pre class="highlight"><code>
protocol ModelInterface {
    var text : String {get set}
    var detailText : String {get set}
    var imageUrl : String {get set}
}

protocol ViewInterface {
    var viewModel: ViewModelInterface? {get set}
}

protocol ViewModelInterface {
    var models: [ModelInterface] {get set}
    mutating func dynamicBinding(finishedCallback : @escaping () -&gt; ())
}

class Presenter {
    var view: ViewInterface?
    var viewModel: ViewModelInterface?
}

extension Presenter {
    
    func adapter&lt;VM: ViewModelInterface,V: ViewInterface&gt;(viewModel: VM,  view: V) {
        
        self.view = view;
        self.viewModel = viewModel
        
        func dynamicBinding() {
            self.viewModel?.dynamicBinding {
                self.view?.viewModel = viewModel
            }
        }; dynamicBinding()
    }
}

</code></pre>
</div>

<p>MVPæ¨¡å¼è¿˜æ˜¯æœ‰å¿…è¦è¯¦ç»†çš„è¯´æ˜ä¸€ä¸‹çš„, æˆ‘ä»¬å¯¹äºModel, View, ViewModel, ä¹Ÿå°±æ˜¯ä¹‹å‰çš„MVVMå¯¹åº”çš„å®šä¹‰åè®®, åè®®åœ¨Javaä¸­ä¹Ÿå«æ¥å£, å°±æ˜¯åˆ¶å®šä¸€å¥—å¤§å®¶éƒ½è¯¥éµå®ˆçš„è§„èŒƒ. å°†MVVMå…¨éƒ¨æŠ½è±¡åŒ–å°±æ˜¯Presenterå±‚çš„ä¸»è¦èŒè´£.</p>

<p>æˆ‘ä»¬å¯¹åº”ä¿®æ”¹ä»£ç , ä½¿å…¶éµå®ˆPresenterå®šä¹‰çš„åè®®.</p>

<p>Model.swift</p>

<div class="highlighter-rouge"><pre class="highlight"><code>class Model: NSObject, ModelInterface { //update
    
    var text : String = ""
    var detailText : String = ""
    var imageUrl : String = ""
    
    init(dict : [String : Any]) {
        super.init()
        setValuesForKeys(dict)
    }
    
    override func setValue(_ value: Any?, forUndefinedKey key: String) {}
}

</code></pre>
</div>

<p>View.swift</p>

<div class="highlighter-rouge"><pre class="highlight"><code>class View: UIView, ViewInterface { //update
    
    var value: ViewModelInterface? //update
    var viewModel: ViewModelInterface? { //update
        
        get { return value }
        set {
            value = newValue
            tableView.reloadData()
        }
    }
    
    fileprivate lazy var tableView: UITableView = { [weak self] in
        var tableView = UITableView(frame: self!.bounds, style: .plain)
        tableView.dataSource = self
        tableView.delegate = self
        return tableView
    }()
    
    override init(frame: CGRect) {
        super.init(frame: frame)
        addSubview(tableView)
    }
    
    required init?(coder aDecoder: NSCoder) {
        fatalError("init(coder:) has not been implemented")
    }
}

extension View: UITableViewDataSource {
    
    func tableView(_ tableView: UITableView, numberOfRowsInSection section: Int) -&gt; Int {
        return viewModel?.models.count ?? 0
    }
    
    func tableView(_ tableView: UITableView, cellForRowAt indexPath: IndexPath) -&gt; UITableViewCell {
        
        let identifier = "identifier"
        let model: ModelInterface? = viewModel?.models[indexPath.row] //update
        let cell = tableView.dequeueReusableCell(withIdentifier: identifier) ?? UITableViewCell(style: .subtitle, reuseIdentifier: identifier)
        cell.textLabel?.text = model?.text
        cell.detailTextLabel?.text = model?.detailText
        cell.imageView?.loadUrl(imageUrl: model?.imageUrl)
        return cell
    }
}

extension View: UITableViewDelegate {
    
    func tableView(_ tableView: UITableView, heightForRowAt indexPath: IndexPath) -&gt; CGFloat {
        return 100
    }
    
    func tableView(_ tableView: UITableView, didSelectRowAt indexPath: IndexPath) {
        tableView.deselectRow(at: indexPath, animated: true)
    }
}


</code></pre>
</div>

<p>ViewModel.swift</p>

<div class="highlighter-rouge"><pre class="highlight"><code>class ViewModel: ViewModelInterface { //update
    lazy var models: [ModelInterface] = [ModelInterface]() //update
}

extension ViewModel {
    
    func dynamicBinding(finishedCallback : @escaping () -&gt; ()) {
        
        Http.requestData(.get, URLString: "http://localhost:3001/api/J1/getJ1List") { (response) in
            guard let result = response as? [String : Any] else { return }
            guard let data:[String : Any] = result["data"] as? [String : Any] else { return }
            guard let models:[[String : Any]] = data["models"] as? [[String : Any]] else { return }
            
            self.models.removeAll()
            for dict in models {
                self.models.append(Model(dict: dict))
            }
            
            finishedCallback()
        }
    }
}

</code></pre>
</div>

<p>Controller.swift</p>

<div class="highlighter-rouge"><pre class="highlight"><code>
class Controller: UIViewController {

    fileprivate lazy var viewModel: ViewModel = ViewModel()
    fileprivate lazy var presenter: Presenter = Presenter() //update
    fileprivate lazy var baseView: View = { [weak self] in
        return View(frame: self!.view.bounds)
    }()
    
    override func loadView() {
        super.loadView()
        title = "J1"
    }
    
    override func viewDidLoad() {
        super.viewDidLoad()
        setupView()
        adapterView()
    }
}

extension Controller {
    
    fileprivate func setupView() {
        view.addSubview(baseView)
    }
    

    fileprivate func adapterView() {
        presenter.adapter(viewModel: viewModel, view: baseView) //update
    }
}

</code></pre>
</div>
<p>æœ€åæˆ‘ä»¬åœ¨Controllerä¸­å¼•å…¥Presenter, å¹¶å¯¹Viewå’ŒViewModelè¿›è¡Œé€‚é….</p>

<p>è¿è¡Œä¸€ä¸‹, å’Œä¹‹å‰ä¸€æ ·æ²¡æœ‰ä»€ä¹ˆå¼‚å¸¸, ä½†ä»£ç ä¹‹é—´å·²ç»å®Œå…¨çš„é›¶è€¦åˆäº†, åªè¦éµå®ˆPresenterå†…æ‰€å®šä¹‰çš„åè®®, æ›¿æ¢æ‰ä»»æ„ä¸€ä¸ªéƒ¨ä»¶, ä¹Ÿä¸ä¼šæœ‰ä»€ä¹ˆé—®é¢˜. è¿™ç§ä»£ç è®¾è®¡å°±èƒ½å¤Ÿè½»æ¾çš„å®ç°ç»„ä»¶åŒ–äº†.</p>

<p>ä½†Presenterä»…ä»…æ˜¯è´Ÿè´£è¿™ç‚¹å·¥ä½œå—? å…¶å®æˆ‘ä»¬å¯ä»¥å°†Viewä¸­çš„é€»è¾‘ä¹Ÿé€šè¿‡åè®®çš„å½¢å¼æ¥å…¥è¿›æ¥, å…·ä½“å¦‚ä½•å®ç°, ä¸æ€¥, æˆ‘ä»¬å…ˆæ„å»ºä¸€ä¸ªå‰ç«¯çš„é¡¹ç›®å§!</p>

<p>å¯¹äºå‰ç«¯, æˆ‘ä½¿ç”¨çš„æ¡†æ¶æ˜¯å°¤é›¨æºªå¤§ç¥çš„<a href="https://vuejs.org/">Vue</a>, å¯¹äºä¸ºä»€ä¹ˆä½¿ç”¨Vueè€Œä¸ä½¿ç”¨Googleçš„Angluar, æˆ–æ˜¯Facebookçš„React, å“.. å°±æ˜¯ä»»æ€§, éšä¾¿â€¦</p>

<p>å’Œä¹‹å‰çš„Koaä¸€æ ·, æˆ‘ä»¬ä¹Ÿæ‰¾ä¸€ä¸ªç”Ÿæˆå™¨å§, å¥½åœ¨Vueä¸‰ä»¶å¥—ä¸­å°±æœ‰ç”Ÿæˆå™¨cli, å¥½å§ä¸“ä¸šåè¯è„šæ‰‹æ¶ - - , æˆ‘ä»¬å°±é€šè¿‡å®ƒæ¥å¿«é€Ÿæ„å»ºå‰ç«¯å·¥ç¨‹å§!</p>

<ol>
  <li>$ npm install webpack -g</li>
  <li>$ npm install vue-cli -g</li>
  <li>cd ç›®å½• $ vue init webpack RouterPattern</li>
</ol>

<div class="highlighter-rouge"><pre class="highlight"><code>? Project name routerpattern
? Project description A Vue.js project
? Author zhushuangquan &lt;zhushuangquan@j1.com&gt;
? Vue build standalone
? Install vue-router? Yes
? Use ESLint to lint your code? Yes
? Pick an ESLint preset Standard
? Setup unit tests with Karma + Mocha? Yes
? Setup e2e tests with Nightwatch? Yes

   vue-cli Â· Generated "RouterPattern".

   To get started:
   
     cd RouterPattern
     npm install
     npm run dev
   
   Documentation can be found at https://vuejs-templates.github.io/webpack

// webpackçš„é¡¹ç›®ä¸èƒ½ç”¨å¤§å†™å­—æ¯, æ‰€ä»¥æˆ‘ä»¬éƒ½æ”¹ä¸ºå°å†™.

</code></pre>
</div>

<div class="highlighter-rouge"><pre class="highlight"><code>.
â”œâ”€â”€ README.md
â”œâ”€â”€ build
â”‚Â Â  â”œâ”€â”€ build.js
â”‚Â Â  â”œâ”€â”€ check-versions.js
â”‚Â Â  â”œâ”€â”€ dev-client.js
â”‚Â Â  â”œâ”€â”€ dev-server.js
â”‚Â Â  â”œâ”€â”€ utils.js
â”‚Â Â  â”œâ”€â”€ vue-loader.conf.js
â”‚Â Â  â”œâ”€â”€ webpack.base.conf.js
â”‚Â Â  â”œâ”€â”€ webpack.dev.conf.js
â”‚Â Â  â””â”€â”€ webpack.prod.conf.js
â”œâ”€â”€ config
â”‚Â Â  â”œâ”€â”€ dev.env.js
â”‚Â Â  â”œâ”€â”€ index.js
â”‚Â Â  â””â”€â”€ prod.env.js
â”œâ”€â”€ index.html
â”œâ”€â”€ package.json
â”œâ”€â”€ src
â”‚Â Â  â”œâ”€â”€ App.vue
â”‚Â Â  â”œâ”€â”€ assets
â”‚Â Â  â”‚Â Â  â””â”€â”€ logo.png
â”‚Â Â  â”œâ”€â”€ components
â”‚Â Â  â”‚Â Â  â””â”€â”€ Hello.vue
â”‚Â Â  â”œâ”€â”€ main.js
â”‚Â Â  â””â”€â”€ router
â”‚Â Â      â””â”€â”€ index.js
â””â”€â”€ static

</code></pre>
</div>

<p>ç»ˆç«¯æ‰§è¡Œ $ npm install  $ npm run dev ååœ¨localhost:8080 ä¸Šå°±èƒ½çœ‹åˆ°æ¬¢è¿é¡µé¢äº†.</p>

<p>å‰ç«¯çš„éƒ¨åˆ†æˆ‘ä»¬å°±å…ˆåˆ°è¿™é‡Œ, æˆ‘ä»¬å›åˆ°ç§»åŠ¨ç«¯æ¥, æœ‰äº†Webé¡µé¢, å¯¹åº”çš„æˆ‘ä»¬å°±éœ€è¦åˆ›å»ºWebViewäº†.</p>

<div class="highlighter-rouge"><pre class="highlight"><code>import WebKit

class WebViewController: UIViewController {
    
    fileprivate lazy var configuretion: WKWebViewConfiguration = { [weak self] in
        let configuretion = WKWebViewConfiguration()
        return configuretion
    }()
    
    fileprivate lazy var webView: WKWebView = { [weak self] in
        let webView = WKWebView(frame: self!.view.bounds)
        webView.navigationDelegate = self
        webView.uiDelegate = self
        return webView
    }()
    
    fileprivate lazy var progressView: UIProgressView = {
        let progressView = UIProgressView(frame: CGRect(x: 0, y: 65, width: self.view.bounds.size.width, height: 2))
        progressView.trackTintColor = .clear
        return progressView
    }()
    
    fileprivate var absoluteUrl = ""
    
    init (_ url: String) {
        super.init(nibName: nil, bundle: nil)
        absoluteUrl = url.addingPercentEncoding(withAllowedCharacters: .urlQueryAllowed) ?? ""
    }
    
    required init?(coder aDecoder: NSCoder) {
        fatalError("init(coder:) has not been implemented")
    }
    
    override func viewDidLoad() {
        super.viewDidLoad()
        view.addSubview(webView)
        view.addSubview(progressView)
        
        func loadRequest() {
            var request = URLRequest(url: URL(string: absoluteUrl)!)
            request.addValue("skey=skeyValue", forHTTPHeaderField: "Cookie")
            webView.addObserver(self, forKeyPath: "estimatedProgress", options: [.new, .old], context: nil)
            webView.load(request)
        }; loadRequest()
    }
    
    override func observeValue(forKeyPath keyPath: String?, of object: Any?, change: [NSKeyValueChangeKey : Any]?, context: UnsafeMutableRawPointer?) {
        
        if keyPath == "estimatedProgress" {
            progressView.alpha = 1.0
            progressView.setProgress(Float(webView.estimatedProgress), animated: true)
            if webView.estimatedProgress &gt;= 1.0 {
                UIView.animate(withDuration: 0.25, delay: 0.25, options: [.curveEaseOut], animations: {
                    self.progressView.alpha = 0.0
                    }, completion: { (finished) in
                        self.progressView.setProgress(0.0, animated: true)
                })
            }
        }
    }
    
    deinit {
        webView.removeObserver(self, forKeyPath: "estimatedProgress")
    }
}

extension WebViewController: WKNavigationDelegate {
    
    func webView(_ webView: WKWebView, didFinish navigation: WKNavigation!) {
        title = webView.title
    }
}

extension WebViewController: WKUIDelegate {
    
    func webView(_ webView: WKWebView, runJavaScriptAlertPanelWithMessage message: String, initiatedByFrame frame: WKFrameInfo, completionHandler: @escaping () -&gt; Void) {
        
        let alertViewController = UIAlertController(title: nil, message: message, preferredStyle: .alert)
        alertViewController.addAction(UIAlertAction(title: "ç¡®å®š", style: .default, handler: { (action) in
            completionHandler()
        }))
        
        present(alertViewController, animated: false, completion: nil)
    }
}

</code></pre>
</div>

<p>ä¹‹å‰çš„UIWebViewçš„ç®€å•äº¤äº’å·²ç»æœ‰è®²è§£, è¿™æ¬¡å°±ä½¿ç”¨æœ€æ–°çš„WKWebViewå§. ä»£ç æ²¡ä»€ä¹ˆè¯´çš„, åªä¸è¿‡WKçš„å†…æ ¸ç›¸åŒ, ä¸JSäº¤äº’æ›´åŠ æ–¹ä¾¿äº†, è¿™ä¸ªæˆ‘ä»¬ä¸‹æ¬¡å†è°ˆ.</p>

<p>æˆ‘ä»¬ç‚¹å‡»cellè®©å®ƒpushåˆ°åˆšæ‰vueçš„å±•ç¤ºé¡µ, åœ¨Viewä¸­æ‹¿åˆ°å½“å‰æ§åˆ¶å™¨ä¸æ–¹ä¾¿, æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªå…¨å±€å˜é‡æ¥ä¿å­˜å½“å‰æ§åˆ¶å™¨.</p>

<p>ViewController.swift</p>

<div class="highlighter-rouge"><pre class="highlight"><code>var currentController: ViewController?

class ViewController: UIViewController {
    
    override func viewWillAppear(_ animated: Bool) {
        super.viewWillAppear(animated)
        currentController = self
    }
}

</code></pre>
</div>

<p>å†è®©Controllerå’ŒWebViewControllerç»§æ‰¿ä¸ViewController, è¿™æ ·åœ¨å“ªé‡Œéƒ½èƒ½æ‹¿åˆ°å½“å‰æ§åˆ¶å™¨äº†.</p>

<p>View.swift</p>

<div class="highlighter-rouge"><pre class="highlight"><code>
    func tableView(_ tableView: UITableView, didSelectRowAt indexPath: IndexPath) {
        tableView.deselectRow(at: indexPath, animated: true)
        currentController?.navigationController?.pushViewController(WebViewController("http://localhost:8080/"), animated: true)
    }

</code></pre>
</div>

<p>è¿™æ ·æˆ‘ä»¬å°±èƒ½å¤Ÿè·³è½¬åˆ°åˆšæ‰Vueç”Ÿæˆçš„é¡µé¢äº†, ä½†æ˜¯è¿™ç§è·³è½¬é€»è¾‘å†™åœ¨Viewä¸­, ä¸æ˜¯å¾ˆå¥½ç»´æŠ¤, è¿™æ—¶Presenter, å°±èƒ½å¤Ÿå®è¡Œå®ƒçš„ç¬¬äºŒä¸ªç”¨é€”äº† â€“ ç»Ÿç­¹ä¸šåŠ¡é€»è¾‘.</p>

<p>æˆ‘ä»¬åœ¨Viewä¸­å®šä¹‰æ“ä½œåè®®: ViewOperation</p>

<p>View.swift</p>

<div class="highlighter-rouge"><pre class="highlight"><code>
protocol ViewOperation { //update
    mutating func pushTo() -&gt; Void
}

class View: UIView, ViewInterface {
    
    var operation: ViewOperation? //update
    var value: ViewModelInterface?
    var viewModel: ViewModelInterface? {
        
        get { return value }
        set {
            value = newValue
            tableView.reloadData()
        }
    }
    
    fileprivate lazy var tableView: UITableView = { [weak self] in
        var tableView = UITableView(frame: self!.bounds, style: .plain)
        tableView.dataSource = self
        tableView.delegate = self
        return tableView
        }()
    
    override init(frame: CGRect) {
        super.init(frame: frame)
        addSubview(tableView)
    }
    
    required init?(coder aDecoder: NSCoder) {
        fatalError("init(coder:) has not been implemented")
    }
}

extension View: UITableViewDataSource {
    
    func tableView(_ tableView: UITableView, numberOfRowsInSection section: Int) -&gt; Int {
        return viewModel?.models.count ?? 0
    }
    
    func tableView(_ tableView: UITableView, cellForRowAt indexPath: IndexPath) -&gt; UITableViewCell {
        
        let identifier = "identifier"
        let model: ModelInterface? = viewModel?.models[indexPath.row]
        let cell = tableView.dequeueReusableCell(withIdentifier: identifier) ?? UITableViewCell(style: .subtitle, reuseIdentifier: identifier)
        cell.textLabel?.text = model?.text
        cell.detailTextLabel?.text = model?.detailText
        cell.imageView?.loadUrl(imageUrl: model?.imageUrl)
        return cell
    }
}

extension View: UITableViewDelegate {
    
    func tableView(_ tableView: UITableView, heightForRowAt indexPath: IndexPath) -&gt; CGFloat {
        return 100
    }
    
    func tableView(_ tableView: UITableView, didSelectRowAt indexPath: IndexPath) {
        tableView.deselectRow(at: indexPath, animated: true)
        operation?.pushTo() //update
    }
}


</code></pre>
</div>

<p>åœ¨Presenterä¸­è¿›è¡Œå®ç°</p>

<p>Presenter.swift</p>

<div class="highlighter-rouge"><pre class="highlight"><code>
extension Presenter: ViewOperation {
    
    func pushTo() {
        currentController?.navigationController?.pushViewController(WebViewController("http://localhost:8080/"), animated: true)
    }
}

</code></pre>
</div>

<p>è¿™æ ·æˆ‘ä»¬æŠŠä¸šåŠ¡é€»è¾‘éƒ½æŠ½è±¡å‡ºæ¥äº†, Presenterä¸­æ—¢èƒ½æ‹¿åˆ°æ•°æ®åˆèƒ½æ‹¿åˆ°è§†å›¾è¿˜èƒ½è¿›è¡Œä¸šåŠ¡æ“ä½œ, ç®€ç›´å¤ªæ£’äº†, è¿™å°±æ˜¯æˆ‘å‘ä½ æ¨èçš„MVPæ¨¡å¼!</p>

<p>About:</p>

<p><img src="http://upload-images.jianshu.io/upload_images/1229762-3f8925783027b3fa.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="ç‚¹å‡»ä¸‹æ–¹é“¾æ¥è·³è½¬!!" /></p>

<p><a href="https://github.com/coderZsq/coderZsq.target.swift">ğŸŒŸ æºç  è¯·ç‚¹è¿™é‡ŒğŸŒŸÂ Â»&gt; å–œæ¬¢çš„æœ‹å‹è¯·ç‚¹å–œæ¬¢Â Â»&gt; ä¸‹è½½æºç çš„åŒå­¦è¯·é€ä¸‹å°æ˜Ÿæ˜ŸÂ Â»&gt; æœ‰é—²é’±çš„å£•ä»¬å¯ä»¥è¿›è¡Œæ‰“èµÂ Â»&gt; å°å¼Ÿä¼šå°½å¿«æ¨å‡ºæ›´å¥½çš„æ–‡ç« å’Œå¤§å®¶åˆ†äº«Â Â»&gt; ä½ çš„æ¿€åŠ±å°±æ˜¯æˆ‘çš„åŠ¨åŠ›!! </a></p>

  </section>
</article>

<section class="read-more">
   
   
   <div class="read-more-item">
       <span class="read-more-item-dim">æœ€è¿‘çš„æ–‡ç« </span>
       <h2 class="post-list__post-title post-title"><a href="/2017/04/Hybird-%E6%90%AD%E5%BB%BA%E8%B7%AF%E7%94%B1Router%E5%AE%9E%E7%8E%B0%E7%BB%84%E4%BB%B6%E5%8C%96/" title="link to Hybird æ­å»ºè·¯ç”±Routerå®ç°ç»„ä»¶åŒ–">Hybird æ­å»ºè·¯ç”±Routerå®ç°ç»„ä»¶åŒ–</a></h2>
       <p class="excerpt">  MVPæ˜¯ä¸ªéå¸¸å¥½çš„è®¾è®¡æ¨¡å¼, èƒ½å¤Ÿè¿›è¡Œä»£ç è§£è€¦, ä¸šåŠ¡åˆ†å±‚, ç»„ä»¶åŒ–å¿…å¤‡è‰¯å“, ä½†æ˜¯è¿˜èƒ½ä¸èƒ½å†æå‡ä¸€æ­¥å‘¢? ç°åœ¨é¡¹ç›®ä¸­çš„è€¦åˆæ˜¯å¾ˆå°‘äº†, ä½†æ˜¯æ§åˆ¶å™¨ä¹‹å‰çš„åˆ‡æ¢è¿˜æ˜¯æœ‰è€¦åˆå­˜åœ¨, æœ‰ä»€ä¹ˆåŠæ³•èƒ½å¤Ÿå®ç°æ§åˆ¶å™¨é›¶è€¦åˆå‘¢?? é‚£å°±è¦ç¥­å‡ºæœ¬ç³»åˆ—çš„æ ¸å¿ƒRouteræ¨¡å¼äº†.ä»£ç è§: githubå‚è€ƒé“¾æ¥:  Hybird æ­å»ºé›¶è€¦åˆæ¶æ„ä»MVCå¼€å§‹  Hybird æ­å»ºåç«¯Koa.jså¹¶è¿‡åº¦åˆ°MVVM  Hybird æ­å»ºå‰ç«¯Vue.jså¹¶å‡çº§è‡³MVPä»¥ä¸‹å†…å®¹åœ¨ä¸Šè¿°æ–‡ç« åŸºç¡€ä¸Šè¿›è¡Œ, è¯·äº‹å…ˆæŸ¥é˜….é›¶è€¦åˆä¸€ç›´...&hellip;</p>
       <div class="post-list__meta"><time datetime="2017-04-12 13:40:00 +0800" class="post-list__meta--date date">2017-04-12</time> &#8226; <span class="post-list__meta--tags tags">ç§»åŠ¨å¼€å‘</span><a class="btn-border-small" href=/2017/04/Hybird-%E6%90%AD%E5%BB%BA%E8%B7%AF%E7%94%B1Router%E5%AE%9E%E7%8E%B0%E7%BB%84%E4%BB%B6%E5%8C%96/>ç»§ç»­é˜…è¯»</a></div>
   </div>
   
   
   
   
   <div class="read-more-item">
       <span class="read-more-item-dim">æ›´æ—©çš„æ–‡ç« </span>
       <h2 class="post-list__post-title post-title"><a href="/2017/04/Hybird-%E6%90%AD%E5%BB%BA%E5%90%8E%E7%AB%AFKoa.js%E5%B9%B6%E8%BF%87%E5%BA%A6%E5%88%B0MVVM/" title="link to Hybird æ­å»ºåç«¯Koa.jså¹¶è¿‡åº¦åˆ°MVVM">Hybird æ­å»ºåç«¯Koa.jså¹¶è¿‡åº¦åˆ°MVVM</a></h2>
       <p class="excerpt">  å›é¡¾ä¸ŠæœŸçš„å†…å®¹, æˆ‘ä»¬é€šè¿‡Koaæ­å»ºæœåŠ¡å™¨å®ç°äº†ç§»åŠ¨ç«¯ä¸åç«¯çš„äº¤äº’, ä½¿å¾—appä¸å†åªæ˜¯ä¸ªå£³å­,  é€šè¿‡CocoaPodsé›†æˆäº†AlamofireæˆåŠŸè°ƒç”¨åç«¯çš„API, å®ç°äº†æœ€ç²¾ç®€ä¹Ÿæ˜¯æœ€ç»å…¸çš„MVCæ¶æ„, ä»Šå¤©æˆ‘ä»¬æ¥è¯´è¯´ä¹‹å‰å¤§çƒ­çš„MVVMæ¶æ„.ä»£ç è¯¦è§:githubå‚è€ƒé“¾æ¥:  Hybird æ­å»ºé›¶è€¦åˆæ¶æ„ä»MVCå¼€å§‹ä»¥ä¸‹å†…å®¹åœ¨ä¸Šè¿°æ–‡ç« åŸºç¡€ä¸Šè¿›è¡Œ, è¯·äº‹å…ˆæŸ¥é˜….å…¶å®ç°åœ¨iOSå¼€å‘è¿˜æ˜¯åœ¨Objective-Cçš„å¤§ç¯å¢ƒä¸‹, è®©æˆ‘åœ¨é¡¹ç›®ä¸­ä½¿ç”¨MVVMè¿™ç§æ¶æ„, å…¶å®æˆ‘æ˜¯æ‹’ç»çš„, å› ä¸ºä¸ªäººè§‰...&hellip;</p>
       <div class="post-list__meta"><time datetime="2017-04-11 12:42:00 +0800" class="post-list__meta--date date">2017-04-11</time> &#8226; <span class="post-list__meta--tags tags">ç§»åŠ¨å¼€å‘</span><a class="btn-border-small" href=/2017/04/Hybird-%E6%90%AD%E5%BB%BA%E5%90%8E%E7%AB%AFKoa.js%E5%B9%B6%E8%BF%87%E5%BA%A6%E5%88%B0MVVM/>ç»§ç»­é˜…è¯»</a></div>
   </div>
   
</section>

<section class="post-comments">
  
  
  
  
</section>


            <section class="footer">
    <footer>
    	<span class="footer__copyright">æœ¬ç«™ç‚¹é‡‡ç”¨<a href="http://creativecommons.org/licenses/by-nc-sa/4.0/">çŸ¥è¯†å…±äº« ç½²å-éå•†ä¸šæ€§ä½¿ç”¨-ç›¸åŒæ–¹å¼å…±äº« 4.0 å›½é™… è®¸å¯åè®®</a></span>
        <span class="footer__copyright">ç”± <a href="https://jekyllrb.com">Jekyll</a> äº 2018-07-19 ç”Ÿæˆï¼Œæ„Ÿè°¢ <a href="https://www.digitalocean.com/?refcode=30ed2d146762">Digital Ocean</a> ä¸ºæœ¬ç«™æä¾›ç¨³å®šçš„ VPS æœåŠ¡</span>
        <span class="footer__copyright">æœ¬ç«™ç”± <a href="https://github.com/coderZsq">@Castie!</a> åˆ›å»ºï¼Œé‡‡ç”¨ <a href="https://github.com/onevcat/vno-jekyll">Vno - Jekyll</a> ä½œä¸ºä¸»é¢˜ï¼Œæ‚¨å¯ä»¥åœ¨ GitHub æ‰¾åˆ°<a href="https://github.com/onevcat/OneV-s-Den">æœ¬ç«™æºç </a> - &copy; 2018</span>
    </footer>
</section>

        </div>
    </div>
    
    <script type="text/javascript" src="//code.jquery.com/jquery-1.11.3.min.js"></script>

<script type="text/javascript" src="/js/main.js"></script>



    
  </body>

</html>
