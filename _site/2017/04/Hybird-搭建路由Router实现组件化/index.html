<!DOCTYPE html>
<html>

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  <title>Castie! Notes</title>
  <meta name="description" content="  MVPæ˜¯ä¸ªéå¸¸å¥½çš„è®¾è®¡æ¨¡å¼, èƒ½å¤Ÿè¿›è¡Œä»£ç è§£è€¦, ä¸šåŠ¡åˆ†å±‚, ç»„ä»¶åŒ–å¿…å¤‡è‰¯å“, ä½†æ˜¯è¿˜èƒ½ä¸èƒ½å†æå‡ä¸€æ­¥å‘¢? ç°åœ¨é¡¹ç›®ä¸­çš„è€¦åˆæ˜¯å¾ˆå°‘äº†, ä½†æ˜¯æ§åˆ¶å™¨ä¹‹å‰çš„åˆ‡æ¢è¿˜æ˜¯æœ‰è€¦åˆå­˜åœ¨, æœ‰ä»€ä¹ˆåŠæ³•èƒ½å¤Ÿå®ç°æ§åˆ¶å™¨é›¶è€¦åˆå‘¢?? é‚£å°±è¦ç¥­å‡ºæœ¬ç³»åˆ—çš„æ ¸å¿ƒRouteræ¨¡å¼äº†.ä»£ç è§: github">
  <meta name="author" content="Wei Wang">

  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="Hybird æ­å»ºè·¯ç”±Routerå®ç°ç»„ä»¶åŒ–">
  <meta name="twitter:description" content="  MVPæ˜¯ä¸ªéå¸¸å¥½çš„è®¾è®¡æ¨¡å¼, èƒ½å¤Ÿè¿›è¡Œä»£ç è§£è€¦, ä¸šåŠ¡åˆ†å±‚, ç»„ä»¶åŒ–å¿…å¤‡è‰¯å“, ä½†æ˜¯è¿˜èƒ½ä¸èƒ½å†æå‡ä¸€æ­¥å‘¢? ç°åœ¨é¡¹ç›®ä¸­çš„è€¦åˆæ˜¯å¾ˆå°‘äº†, ä½†æ˜¯æ§åˆ¶å™¨ä¹‹å‰çš„åˆ‡æ¢è¿˜æ˜¯æœ‰è€¦åˆå­˜åœ¨, æœ‰ä»€ä¹ˆåŠæ³•èƒ½å¤Ÿå®ç°æ§åˆ¶å™¨é›¶è€¦åˆå‘¢?? é‚£å°±è¦ç¥­å‡ºæœ¬ç³»åˆ—çš„æ ¸å¿ƒRouteræ¨¡å¼äº†.ä»£ç è§: github">
  
  <meta property="og:type" content="article">
  <meta property="og:title" content="Hybird æ­å»ºè·¯ç”±Routerå®ç°ç»„ä»¶åŒ–">
  <meta property="og:description" content="  MVPæ˜¯ä¸ªéå¸¸å¥½çš„è®¾è®¡æ¨¡å¼, èƒ½å¤Ÿè¿›è¡Œä»£ç è§£è€¦, ä¸šåŠ¡åˆ†å±‚, ç»„ä»¶åŒ–å¿…å¤‡è‰¯å“, ä½†æ˜¯è¿˜èƒ½ä¸èƒ½å†æå‡ä¸€æ­¥å‘¢? ç°åœ¨é¡¹ç›®ä¸­çš„è€¦åˆæ˜¯å¾ˆå°‘äº†, ä½†æ˜¯æ§åˆ¶å™¨ä¹‹å‰çš„åˆ‡æ¢è¿˜æ˜¯æœ‰è€¦åˆå­˜åœ¨, æœ‰ä»€ä¹ˆåŠæ³•èƒ½å¤Ÿå®ç°æ§åˆ¶å™¨é›¶è€¦åˆå‘¢?? é‚£å°±è¦ç¥­å‡ºæœ¬ç³»åˆ—çš„æ ¸å¿ƒRouteræ¨¡å¼äº†.ä»£ç è§: github">
  
  <link rel="icon" type="image/ico" href="/assets/images/favicon.ico" />
  <link href="/assets/images/favicon.ico" rel="shortcut icon" type="image/ico">
  
  <link rel="stylesheet" href="/css/main.css">
  <link href="//netdna.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet">

  <link rel="canonical" href="http://localhost:4000/2017/04/Hybird-%E6%90%AD%E5%BB%BA%E8%B7%AF%E7%94%B1Router%E5%AE%9E%E7%8E%B0%E7%BB%84%E4%BB%B6%E5%8C%96/">
  <link rel="alternate" type="application/rss+xml" title="Castie!" href="http://localhost:4000/feed.xml">
  
  <meta name="google-site-verification" content="1-1ZlHoRvM0T2FqPbW2S-qLgYXN6rsn52kErlMPd_gw" />
  
</head>


  <body>

    <span class="mobile btn-mobile-menu">
        <i class="fa fa-list btn-mobile-menu__icon"></i>
        <i class="fa fa-angle-up btn-mobile-close__icon hidden"></i>
    </span>
    
    <header class="panel-cover panel-cover--collapsed" style="background-image: url('/assets/images/background-cover.jpg')">
  <div class="panel-main">

    <div class="panel-main__inner panel-inverted">
    <div class="panel-main__content">

        <a href="/#blog" title="å‰å¾€ Castie! çš„ä¸»é¡µ" class="blog-button"><img src="/assets/images/avatar.jpg" width="80" alt="Castie! logo" class="panel-cover__logo logo" /></a>
        <h1 class="panel-cover__title panel-title"><a href="/#blog" title="link to homepage for Castie!" class="blog-button">Castie!</a></h1>
        
        <span class="panel-cover__subtitle panel-subtitle">æ­£æ€åˆ†å¸ƒ, ä¼˜åŠ£ä¼´ç”Ÿ</span>
        
        <hr class="panel-cover__divider" />
        <p class="panel-cover__description">åŒ—å†¥æœ‰é±¼ï¼Œå…¶åä¸ºé²²ï¼ˆkÅ«nï¼‰ã€‚é²²ä¹‹å¤§ï¼Œä¸çŸ¥å…¶å‡ åƒé‡Œä¹Ÿï¼›åŒ–è€Œä¸ºé¸Ÿï¼Œå…¶åä¸ºé¹ã€‚é¹ä¹‹èƒŒï¼Œä¸çŸ¥å…¶å‡ åƒé‡Œä¹Ÿï¼›æ€’è€Œé£ï¼Œå…¶ç¿¼è‹¥å‚å¤©ä¹‹äº‘ã€‚æ˜¯é¸Ÿä¹Ÿï¼Œæµ·è¿åˆ™å°†å¾™äºå—å†¥ã€‚å—å†¥è€…ï¼Œå¤©æ± ä¹Ÿã€‚</p>
        <hr class="panel-cover__divider panel-cover__divider--secondary" />
        
        
        <p class="panel-cover__description">åŒ—æµ·è‹¥æ›°ï¼šâ€œäº•é¼ƒä¸å¯ä»¥è¯­äºæµ·è€…ï¼Œæ‹˜äºè™šä¹Ÿï¼›å¤è™«ä¸å¯ä»¥è¯­äºå†°è€…ï¼Œç¬ƒäºæ—¶ä¹Ÿï¼›æ›²å£«ä¸å¯ä»¥è¯­äºé“è€…ï¼ŒæŸäºæ•™ä¹Ÿã€‚ä»Šå°”å‡ºäºå´–æ¶˜ï¼Œè§‚äºå¤§æµ·ï¼Œä¹ƒçŸ¥å°”ä¸‘ï¼Œå°”å°†å¯ä¸è¯­å¤§ç†çŸ£ã€‚</p>
        
        
        <div class="navigation-wrapper">
          <div>
            <nav class="cover-navigation cover-navigation--primary">
              <ul class="navigation">
                <li class="navigation__item"><a href="/#blog" title="è®¿é—®åšå®¢" class="blog-button">åšå®¢</a></li>
                
                  <li class="navigation__item"><a href="https://coderzsq.github.io/coderZsq.practice.web/" target="_blank" title="æˆ‘çš„ç®€å†">ç®€å†</a></li>
                
              </ul>
            </nav>
          </div>
          
          <div><nav class="cover-navigation navigation--social">
  <ul class="navigation">

    
    <!-- juejin-->
    <li class="navigation__item">
      <a href="https://juejin.im/user/57e735dfa22b9d00614eecb8/posts" title="@coderZsq çš„ç¨€åœŸæ˜é‡‘" target="_blank">
        <i class='social fa fa-book'></i>
        <span class="label">juejin</span>
      </a>
    </li>
    

  

  
  <!-- Github -->
  <li class="navigation__item">
    <a href="https://github.com/coderZsq" title="@coderZsq çš„ Github" target="_blank">
      <i class='social fa fa-github'></i>
      <span class="label">Github</span>
    </a>
  </li>
  

  

  

  <!-- RSS -->
  <li class="navigation__item">
    <a href="/feed.xml" rel="author" title="RSS" target="_blank">
      <i class='social fa fa-rss'></i>
      <span class="label">RSS</span>
    </a>
  </li>

  
  <!-- Email -->
  <li class="navigation__item">
    <a href="mailto:a13701777868@gmail.com" title="Contact me">
      <i class='social fa fa-envelope'></i>
      <span class="label">Email</span>
    </a>
  </li>
  

  </ul>
</nav>
</div>
        </div>
      </div>
    </div>
    
    
    <div class="panel-cover--overlay cover-disabled"></div>
    
  </div>
</header>


    <div class="content-wrapper">
        <div class="content-wrapper__inner">
            <article class="post-container post-container--single" itemscope itemtype="http://schema.org/BlogPosting">
  <header class="post-header">
    <div class="post-meta">
      <time datetime="2017-04-12 13:40:00 +0800" itemprop="datePublished" class="post-meta__date date">2017-04-12</time> &#8226; <span class="post-meta__tags tags">ç§»åŠ¨å¼€å‘</span>
    </div>
    <h1 class="post-title">Hybird æ­å»ºè·¯ç”±Routerå®ç°ç»„ä»¶åŒ–</h1>
  </header>

  <section class="post">
    <blockquote>
  <p>MVPæ˜¯ä¸ªéå¸¸å¥½çš„è®¾è®¡æ¨¡å¼, èƒ½å¤Ÿè¿›è¡Œä»£ç è§£è€¦, ä¸šåŠ¡åˆ†å±‚, ç»„ä»¶åŒ–å¿…å¤‡è‰¯å“, ä½†æ˜¯è¿˜èƒ½ä¸èƒ½å†æå‡ä¸€æ­¥å‘¢? ç°åœ¨é¡¹ç›®ä¸­çš„è€¦åˆæ˜¯å¾ˆå°‘äº†, ä½†æ˜¯æ§åˆ¶å™¨ä¹‹å‰çš„åˆ‡æ¢è¿˜æ˜¯æœ‰è€¦åˆå­˜åœ¨, æœ‰ä»€ä¹ˆåŠæ³•èƒ½å¤Ÿå®ç°æ§åˆ¶å™¨é›¶è€¦åˆå‘¢?? é‚£å°±è¦ç¥­å‡ºæœ¬ç³»åˆ—çš„æ ¸å¿ƒRouteræ¨¡å¼äº†.ä»£ç è§: <a href="https://github.com/coderZsq/coderZsq.target.swift">github</a></p>
</blockquote>

<p><img src="http://upload-images.jianshu.io/upload_images/1229762-3866097366648136.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="" /></p>

<h6 id="å‚è€ƒé“¾æ¥">å‚è€ƒé“¾æ¥:</h6>

<ul>
  <li><a href="http://www.jianshu.com/p/5a03995a6ce1">Hybird æ­å»ºé›¶è€¦åˆæ¶æ„ä»MVCå¼€å§‹</a></li>
  <li><a href="http://www.jianshu.com/p/846b9f181cb7">Hybird æ­å»ºåç«¯Koa.jså¹¶è¿‡åº¦åˆ°MVVM</a></li>
  <li><a href="http://www.jianshu.com/p/8d4a84e3ddaa">Hybird æ­å»ºå‰ç«¯Vue.jså¹¶å‡çº§è‡³MVP</a></li>
</ul>

<p>ä»¥ä¸‹å†…å®¹åœ¨ä¸Šè¿°æ–‡ç« åŸºç¡€ä¸Šè¿›è¡Œ, è¯·äº‹å…ˆæŸ¥é˜….</p>

<p>é›¶è€¦åˆä¸€ç›´éƒ½æ˜¯ç¥è¯èˆ¬çš„å­˜åœ¨, ä½†æ˜¯èº«è¾¹çš„è´Ÿèƒ½é‡æ€»æ˜¯ä¸ç»äºè€³, ä¸è¦ä¸ºäº†ç”¨è®¾è®¡æ¨¡å¼è€Œè®¾è®¡æ¨¡å¼, è¯¶.. æˆ‘ä»¬è¿˜æ˜¯å›åˆ°Routerä¸Šæ¥å§, ç©¶ç«Ÿå¦‚ä½•æ‰èƒ½æ„å»ºRouteræ¶æ„å‘¢? ä¸æ€¥, æˆ‘ä»¬å…ˆæŠŠå‰ç«¯çš„é¡¹ç›®ç»™æ­å»ºå®Œæ¯•å§.</p>

<p>é¦–å…ˆæˆ‘ä»¬å°†ç«¯å£å·æ”¹ä¸º3000, å¯¹åº”ç«¯å£ å‰ç«¯: 3000, æ¥å£æœåŠ¡å™¨: 3001, å›¾ç‰‡æœåŠ¡å™¨: 3002</p>

<div class="highlighter-rouge"><pre class="highlight"><code>â”œâ”€â”€ config
  â”œâ”€â”€ dev.env.js
  â”œâ”€â”€ index.js
  â””â”€â”€ prod.env.js
</code></pre>
</div>

<p>index.js</p>

<div class="highlighter-rouge"><pre class="highlight"><code>  dev: {
    env: require('./dev.env'),
    port: 3000, //update
    autoOpenBrowser: true,
    assetsSubDirectory: 'static',
    assetsPublicPath: '/',
    proxyTable: {},
    // CSS Sourcemaps off by default because relative paths are "buggy"
    // with this option, according to the CSS-Loader README
    // (https://github.com/webpack/css-loader#sourcemaps)
    // In our experience, they generally work as expected,
    // just be aware of this issue when enabling this option.
    cssSourceMap: false
  }
}


</code></pre>
</div>

<p>æˆ‘ä»¬å…ˆåœ¨package.jsonä¸­æ·»åŠ ç½‘ç»œè¯·æ±‚axios, Vue2å¼€å§‹çš„å®˜æ–¹æ¨è,</p>

<p>package.json</p>

<div class="highlighter-rouge"><pre class="highlight"><code>  "dependencies": {
    "axios": "^0.15.3",
    "element-ui": "^1.1.2",
    "stylus": "^0.54.5",
    "stylus-loader": "^2.4.0",
    "vue": "^2.1.0",
    "vue-router": "^2.1.1"
  },
</code></pre>
</div>

<p>å¹¶åœ¨srcä¸‹åˆ›å»ºjavascripts å’Œ stylesheets ä¸¤ä¸ªç›®å½•:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>.
â”œâ”€â”€ App.vue
â”œâ”€â”€ assets
â”‚Â Â  â””â”€â”€ logo.png
â”œâ”€â”€ components
â”œâ”€â”€ javascripts
â”œâ”€â”€ main.js
â”œâ”€â”€ router
â”‚Â Â  â””â”€â”€ index.js
â””â”€â”€ stylesheets
</code></pre>
</div>

<p>å¹¶åœ¨javascriptsä¸­æ·»åŠ http.jsæ¥æ‰§è¡Œç½‘è·¯è¯·æ±‚è„šæœ¬:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>â”œâ”€â”€ javascripts
 Â Â  â”œâ”€â”€ http.js

</code></pre>
</div>

<p>http.js</p>

<div class="highlighter-rouge"><pre class="highlight"><code>
import axios from 'axios'

export function GET(url) {

  return new Promise((resolve, reject) =&gt; {
    axios.get(url).then((response) =&gt; {
      resolve(response.data.data);
    }).catch((error) =&gt; {
      reject(error);
    })
  });
}

export const URL = {
  getJ1List: 'http://localhost:3001/api/J1/getJ1List'
}


</code></pre>
</div>

<p>ä»£ç ä¹Ÿå¾ˆç®€å•, å’Œä¹‹å‰Swiftçš„Alamofireä¸€æ ·, åœ¨å¤–é¢å°è£…ä¸€å±‚, ä½¿ç”¨ES6è¯­æ³•çš„Promise, å¹¶å®šä¹‰æ¥å£URL.</p>

<p>æ¥ç€æˆ‘ä»¬å°†Hello.vueä¿®æ”¹ä¸ºJ1.vue</p>

<div class="highlighter-rouge"><pre class="highlight"><code>â”œâ”€â”€ src
  â”œâ”€â”€ components
    â””â”€â”€ J1.vue
</code></pre>
</div>

<p>J1.vue</p>

<div class="highlighter-rouge"><pre class="highlight"><code>
&lt;template lang="html"&gt;
  &lt;div&gt;
    &lt;div class="cell" v-for="model in models"&gt;
        ![](model.imageUrl)
        &lt;span&gt;&lt;/span&gt;
        &lt;span&gt;&lt;/span&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;script&gt;

import { GET,URL } from '../javascripts/http'

export default {
  data () {
    return {
      title: '',
      models: []
    }
  },
  methods: {
    request: function() {
      GET(URL.getJ1List).then((data) =&gt; {
          this.models = data.models;
      }).catch((error) =&gt; {

      })
    }
  },
  mounted:function () {
    this.title = document.title = "J1";
    this.request();
    // alert(window.location.href);
  }
}
&lt;/script&gt;

&lt;style scoped&gt;

.cell {
    height: 100px;
    position: relative;
    border-bottom: 1px solid lightgray;
}

.cell img {
    position: absolute;
    top: 50%;
    transform: translateY(-50%);
    padding-left: 10px;
}

.cell span:first-of-type {
    position: absolute;
    top: 35%;
    transform: translateY(-35%);
    padding-left: 84px;
    font-size: 15px;
}

.cell span:last-of-type {
    position: absolute;
    top: 65%;
    transform: translateY(-65%);
    padding-left: 84px;
    font-size: 12px;
}

&lt;/style&gt;

</code></pre>
</div>
<p>æ¥ä¸‹æ¥æˆ‘ä»¬ä¿®æ”¹è·¯ç”±:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>â”œâ”€â”€ src
  â”œâ”€â”€ router
    â””â”€â”€ index.js
</code></pre>
</div>

<div class="highlighter-rouge"><pre class="highlight"><code>import Vue from 'vue'
import Router from 'vue-router'
import J1 from '../components/J1'

Vue.use(Router)

export default new Router({
  routes: [{
      path: '/',
      component: J1
    },
    {
      path: '/J1',
      component: J1
    },
    {
      path: '*',
      redirect: '/'
    }
  ]
})

</code></pre>
</div>

<p>æ‰§è¡Œä¸€ä¸‹, æ€ä¹ˆä»€ä¹ˆéƒ½æ²¡æœ‰, è¿™ä¸ªå°±è¦è¯´åˆ°ajaxçš„è·¨åŸŸé—®é¢˜äº†, æˆ‘ä»¬è¿™é‡Œä¸å±•å¼€, å¯¹è·¨åŸŸæœ‰ç–‘é—®çš„åŒå­¦è¯·è‡ªè¡ŒGoogle.</p>

<p>è¦è§£å†³è·¨åŸŸ, æˆ‘ä»¬é€šè¿‡åœ¨åç«¯åŠ è½½è·¨åŸŸæƒé™çš„æ–¹å¼:</p>

<p>åœ¨server/app.js ä¸­æ·»åŠ :</p>

<div class="highlighter-rouge"><pre class="highlight"><code>const cors = require('koa-cors');

app.use(cors());

</code></pre>
</div>
<p>å½“ç„¶ä½ éœ€è¦ npm installä¸€ä¸‹äº†, è¿™æ ·æˆ‘ä»¬å°±èƒ½çœ‹è§webç«¯çš„æ˜¾ç¤ºäº†.</p>

<p>å‰ç«¯ä¸å°å™è¿°çš„æœ‰ç‚¹å¤šäº†, ä½†è¿™å¯¹äºçƒ­ä¿®å¤è¿˜æ˜¯å¿…é¡»çš„, æˆ‘ä»¬å›åˆ°ç§»åŠ¨ç«¯çš„é¡¹ç›®ä¸Šæ¥, åœ¨åŠ è½½webViewçš„æ—¶å€™å°†ç«¯å£å·æ”¹ä¸º3000, è¿™æ ·æˆ‘ä»¬åœ¨appç«¯å°±èƒ½å¤ŸåŠ è½½åˆšæ‰åˆ›å»ºç›¸åŒç‰ˆæœ¬çš„webé¡µé¢äº†.</p>

<p>è¿è½½åˆ°ç°åœ¨, æˆ‘ä»¬å‘ç°äº†Koaä¸­çš„æ¥å£æ˜¯åŸºäºRouterçš„, Vueä¸­çš„é¡µé¢è·³è½¬ä¹Ÿæ˜¯åŸºäºRouterçš„, é‚£æˆ‘ä»¬ç§»åŠ¨ç«¯èƒ½ä¸èƒ½ä¹Ÿæœ‰è‡ªå·±çš„Routerè·³è½¬æœºåˆ¶å‘¢? å…¶å®ä¸€äº›ç´§è·Ÿæ½®æµçš„å¼€å‘è€…éƒ½çŸ¥é“ç°åœ¨æµè¡Œç»„ä»¶åŒ–, è€Œç§»åŠ¨ç«¯ç»„ä»¶åŒ–çš„ä»£è¡¨å°±æ˜¯Router, ä¹Ÿæœ‰ä¸€äº›ç¬¬ä¸‰æ–¹æ¡†æ¶ä¹‹ç±»çš„, å­°ä¼˜å­°åŠ£æˆ‘æ²¡ç”¨è¿‡, ä¹Ÿä¸æ¸…æ¥š, åœ¨è¿™é‡Œæˆ‘åªæ˜¯åŸºäºå¯¹å‰ç«¯è·¯ç”±çš„ç†è§£æ¥æ­å»ºä¸€ä¸ªç§»åŠ¨ç«¯çš„è·¯ç”±, é¦–å…ˆæˆ‘ä»¬æ·»åŠ ä¸€ä¸ªRouter.swift.</p>

<p>Router.swift</p>

<div class="highlighter-rouge"><pre class="highlight"><code>class Router {
    static let shareRouter = Router()
    var params: [String : Any]?
    fileprivate let map = ["J1" : "Controller"]
}


extension Router {
    
    func addParam(key: String, value: Any) {
        params?[key] = value
    }
    
    func clearParams() {
        params?.removeAll()
    }
    
    func push(_ path: String) {
        guard let nativeController = NSClassFromString("RouterPatterm.\(self.map[path]!)") as? UIViewController.Type else { return }
        currentController?.navigationController?.pushViewController(nativeController.init(), animated: true)
    }
}

</code></pre>
</div>

<p>é¦–å…ˆRouterå¿…é¡»æ˜¯ä¸€ä¸ªå•ä¾‹, Swiftçš„å•ä¾‹æ¯”èµ·Objective-CçœŸæ˜¯ç®€å•å¤ªå¤šäº†, æ¥çœ‹æˆ‘ä»¬çš„Routerç±», mapæ˜¯å¯¹åº”åŒ¹é…è·³è½¬æ§åˆ¶å™¨,å¹¶å¯ä»¥æ·»åŠ å‚æ•°, åˆ é™¤å‚æ•°, å’Œè·³è½¬çš„æ–¹æ³•, å½“ç„¶ä¹Ÿå¯ä»¥åŠ ä¸Špopç­‰å…¶ä»–åŠŸèƒ½, æˆ‘è¿™é‡Œå°±ä¸æ¼”ç¤º, æœ‰å…´è¶£çš„åŒå­¦è‡ªè¡Œç ”ç©¶.</p>

<p>å®šä¹‰å®Œæˆä¹‹å, æˆ‘ä»¬å°±å¯ä»¥è¿›è¡Œä½¿ç”¨äº†, æˆ‘ä»¬ä¿®æ”¹ä¸šåŠ¡é€»è¾‘çš„Presenter.swift</p>

<p>Presenter.swift</p>

<div class="highlighter-rouge"><pre class="highlight"><code>
extension Presenter: ViewOperation {
    
    func pushTo() {
        Router.shareRouter.params = [
            "text" : "appç«¯ ä¼ å…¥æ•°æ®",
            "code" : 1001
        ]
        Router.shareRouter.push("J1") //update
    }
}

</code></pre>
</div>

<p>åœ¨æ“ä½œè¿™é‡Œç›´æ¥æ›´æ”¹ä¸ºä½¿ç”¨Routerè·³è½¬, è¿™æ ·æ›´å…·mapå®šä¹‰çš„åŒ¹é…, æˆ‘ä»¬å°±èƒ½å¤Ÿè¿›è¡Œé›¶è€¦åˆçš„é¡µé¢è·³è½¬äº†. å¦‚æœéœ€è¦ä¼ å‚ä¹Ÿå¯ä»¥é€šè¿‡å­—å…¸çš„å½¢å¼å­˜å‚¨åœ¨è·¯ç”±ä¸­, å½“ä½¿ç”¨å®Œæˆåå¯¹å‚æ•°åšæ¸…ç©ºæ“ä½œå°±å¯ä»¥äº†.</p>

<p>ç°åœ¨æˆ‘ä»¬å¯¹ç§»åŠ¨ç«¯çš„è·¯ç”±è·³è½¬å·²ç»åˆ°ä½äº†, æ¥ä¸‹å•¦è¯¥è¯´è¯´é‡ç‚¹çš„çƒ­æ›´æ–°çš„æ€æƒ³äº†, æˆ‘ä»¬é€šè¿‡ä¸€ä¸ªä»æœåŠ¡å™¨è¯»å–çš„å­—æ®µæ¥åŒ¹é…è¯¥é¡µé¢æ˜¯è·³è½¬åˆ°ç§»åŠ¨ç«¯è¿˜æ˜¯å‰ç«¯, ç®€å•æ¥è¯´å°±æ˜¯å½“ç§»åŠ¨ç«¯ä»£ç é€»è¾‘å‘ç”Ÿé”™è¯¯æ—¶æ€ä¹ˆå°†ç§»åŠ¨ç«¯çš„é¡µé¢é™çº§ä¸ºå‰ç«¯çš„é¡µé¢. è¿™é‡Œæˆ‘ä»¬åœ¨åç«¯å®šä¹‰ä¸‹è·å–è·³è½¬çš„æ¥å£.</p>

<div class="highlighter-rouge"><pre class="highlight"><code>controllers
	â””â”€â”€ J1.js
</code></pre>
</div>

<p>J1.js</p>

<div class="highlighter-rouge"><pre class="highlight"><code>exports.getRouters = async(ctx, next) =&gt; {

    ctx.body = {
        routers: {
            J1: 'web'
        }
    }
}

</code></pre>
</div>
<p>å¹¶æŒ‚è½½åˆ°è·¯ç”±ä¸Š:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>.
â”œâ”€â”€ api
â”‚Â Â  â”œâ”€â”€ J1_router.js
â”‚Â Â  â””â”€â”€ index.js
â”œâ”€â”€ index.js
â””â”€â”€ users.js
</code></pre>
</div>

<p>J1_router</p>

<div class="highlighter-rouge"><pre class="highlight"><code>
var router = require('koa-router')();
var J1 = require('../../app/controllers/J1');

router.get('/getRouters', J1.getRouters); //update
router.get('/getJ1List', J1.getJ1List);

module.exports = router;

</code></pre>
</div>

<p>é€šè¿‡æ¥å£è®¿é—®, æˆ‘ä»¬å°±èƒ½å¾—åˆ°è¿”å›æ•°æ®:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"code"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
  </span><span class="nt">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"success"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"routers"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"J1"</span><span class="p">:</span><span class="w"> </span><span class="s2">"web"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre>
</div>

<p>å›åˆ°ç§»åŠ¨ç«¯, æˆ‘ä»¬å°±å¯ä»¥æ ¹æ®è¿™ä¸ªæ¥å£æ¥åˆ¤æ–­è·¯ç”±çš„è·³è½¬äº†.</p>

<p>Router.swift</p>

<div class="highlighter-rouge"><pre class="highlight"><code>class Router {
    static let shareRouter = Router()
    var params: [String : Any]?
    var routers: [String : Any]? //update
    fileprivate let map = ["J1" : "Controller"]
    
    func guardRouters(finishedCallback : @escaping () -&gt; ()) { //update
        
        Http.requestData(.get, URLString: "http://localhost:3001/api/J1/getRouters") { (response) in
            guard let result = response as? [String : Any] else { return }
            guard let data:[String : Any] = result["data"] as? [String : Any] else { return }
            guard let routers:[String : Any] = data["routers"] as? [String : Any] else { return }
            self.routers = routers
            finishedCallback()
        }
    }
}

extension Router {
    
    func addParam(key: String, value: Any) {
        params?[key] = value
    }
    
    func clearParams() {
        params?.removeAll()
    }
    
    func push(_ path: String) {
        
        guardRouters { //update
            guard let state = self.routers?[path] as? String else { return }
            
            if state == "app" {
                guard let nativeController = NSClassFromString("RouterPatterm.\(self.map[path]!)") as? UIViewController.Type else { return }
                currentController?.navigationController?.pushViewController(nativeController.init(), animated: true)
            }
            
            if state == "web" {
                let host = "http://localhost:3000/"
                let webViewController = WebViewController("\(host)")
                currentController?.navigationController?.pushViewController(webViewController, animated: true)
            }
        }
    }
}
</code></pre>
</div>
<p>ç°åœ¨æˆ‘ä»¬åœ¨æ¯æ¬¡è·¯ç”±è·³è½¬çš„æ—¶å€™éƒ½è¯·æ±‚åˆ°å¯¹åº”çš„é¡µé¢çŠ¶æ€å°±å¯ä»¥åå°æ“ä½œè·³è½¬Nativeè¿˜æ˜¯H5äº†.</p>

<p>å›é¡¾ä¹‹å‰çš„ä»£ç , æˆ‘ä»¬ç°åœ¨å·²ç»åšåˆ°äº†Model, View, ViewModel, Presenterå’ŒControllerä¹‹é—´çš„é›¶è€¦åˆ, æƒ³æƒ³æ˜¯ä¸æ˜¯æœ‰ç‚¹å°æ¿€åŠ¨, ä¸‹ä¸€èŠ‚å†…å®¹, æˆ‘ä»¬ä¼šå°†Swift, Vue, Koaä¸‰ç«¯è¿›è¡Œç»Ÿç­¹, å®ç°çœŸæ­£çš„çƒ­ä¿®å¤æ¡†æ¶.</p>

<p>About:</p>

<p><img src="http://upload-images.jianshu.io/upload_images/1229762-3f8925783027b3fa.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="ç‚¹å‡»ä¸‹æ–¹é“¾æ¥è·³è½¬!!" /></p>

<p><a href="https://github.com/coderZsq/coderZsq.target.swift">ğŸŒŸ æºç  è¯·ç‚¹è¿™é‡ŒğŸŒŸÂ Â»&gt; å–œæ¬¢çš„æœ‹å‹è¯·ç‚¹å–œæ¬¢Â Â»&gt; ä¸‹è½½æºç çš„åŒå­¦è¯·é€ä¸‹å°æ˜Ÿæ˜ŸÂ Â»&gt; æœ‰é—²é’±çš„å£•ä»¬å¯ä»¥è¿›è¡Œæ‰“èµÂ Â»&gt; å°å¼Ÿä¼šå°½å¿«æ¨å‡ºæ›´å¥½çš„æ–‡ç« å’Œå¤§å®¶åˆ†äº«Â Â»&gt; ä½ çš„æ¿€åŠ±å°±æ˜¯æˆ‘çš„åŠ¨åŠ›!! </a></p>

  </section>
</article>

<section class="read-more">
   
   
   <div class="read-more-item">
       <span class="read-more-item-dim">æœ€è¿‘çš„æ–‡ç« </span>
       <h2 class="post-list__post-title post-title"><a href="/2017/04/Hybird-%E6%90%AD%E5%BB%BA%E5%AE%A2%E6%88%B7%E7%AB%AF%E5%AE%9E%E6%97%B6%E9%99%8D%E7%BA%A7%E6%9E%B6%E6%9E%84/" title="link to Hybird æ­å»ºå®¢æˆ·ç«¯å®æ—¶é™çº§æ¶æ„">Hybird æ­å»ºå®¢æˆ·ç«¯å®æ—¶é™çº§æ¶æ„</a></h2>
       <p class="excerpt">  RouterçœŸæ˜¯ä¸€ä¸ªéå¸¸å¥½çš„ä¸€ç§è®¾è®¡æ¨¡å¼, èƒ½å¤Ÿåšåˆ°è¶…ä½çš„è€¦åˆ, ä½œä¸ºç³»åˆ—çš„æœ€åä¸€èŠ‚, æˆ‘ä»¬æ¥ç»Ÿç­¹ä¸‰ç«¯, å®ç°çƒ­ä¿®å¤æ¶æ„, å†æ¥è¯´ä¸‹è¿™ä¸ªæ¶æ„çš„å®šä¹‰, å°±æ˜¯å½“Nativeé¡µé¢ä¸šåŠ¡é€»è¾‘å‡ºç°Bugæ—¶, åˆä¸èƒ½é©¬ä¸Šæ‰“åŒ…ä¸Šçº¿é€šè¿‡å®¡æ ¸çš„æƒ…å†µä¸‹, é€šè¿‡åå°é…ç½®å°†é¡µé¢é™çº§ä¸ºH5çš„é¡µé¢, ç­‰å¾…ä¿®å¤å®Œæˆä¸Šçº¿åå†å›åˆ°Nativeçš„è®¾è®¡æ€æƒ³.å‚è€ƒé“¾æ¥:  Hybird æ­å»ºé›¶è€¦åˆæ¶æ„ä»MVCå¼€å§‹  Hybird æ­å»ºåç«¯Koa.jså¹¶è¿‡åº¦åˆ°MVVM  Hybird æ­å»ºå‰ç«¯Vue.jså¹¶å‡çº§è‡³MVP  Hyb...&hellip;</p>
       <div class="post-list__meta"><time datetime="2017-04-12 16:37:00 +0800" class="post-list__meta--date date">2017-04-12</time> &#8226; <span class="post-list__meta--tags tags">ç§»åŠ¨å¼€å‘</span><a class="btn-border-small" href=/2017/04/Hybird-%E6%90%AD%E5%BB%BA%E5%AE%A2%E6%88%B7%E7%AB%AF%E5%AE%9E%E6%97%B6%E9%99%8D%E7%BA%A7%E6%9E%B6%E6%9E%84/>ç»§ç»­é˜…è¯»</a></div>
   </div>
   
   
   
   
   <div class="read-more-item">
       <span class="read-more-item-dim">æ›´æ—©çš„æ–‡ç« </span>
       <h2 class="post-list__post-title post-title"><a href="/2017/04/Hybird-%E6%90%AD%E5%BB%BA%E5%89%8D%E7%AB%AFVue.js%E5%B9%B6%E5%8D%87%E7%BA%A7%E8%87%B3MVP/" title="link to Hybird æ­å»ºå‰ç«¯Vue.jså¹¶å‡çº§è‡³MVP">Hybird æ­å»ºå‰ç«¯Vue.jså¹¶å‡çº§è‡³MVP</a></h2>
       <p class="excerpt">  ä¸Šå›æˆ‘ä»¬è¯´åˆ°MVVM, è¯´çœŸçš„æˆ‘çœŸæ²¡è§‰å¾—MVVMä¸ºä»€ä¹ˆä¼šé¼“å¹çš„é‚£ä¹ˆç¥, ç”¨å¤§ç¯‡å¹…çš„å™è¿°æˆ‘ç€å®æä¸èµ·åŠ². å›é¡¾ä¸€ä¸‹å†…å®¹, æˆ‘ä»¬é€šè¿‡Node.jsæ­å»ºäº†å›¾ç‰‡æœåŠ¡å™¨, å¹¶é€šè¿‡KingfisheråŠ è½½å‡ºæ¥, è¯´çœŸçš„å‰ä¸¤ç¯‡ä¸»è¦è¿˜æ˜¯å™è¿°ç§»åŠ¨ç«¯å…¥é—¨åç«¯å§.. å™—.. ç¬‘.. è¿™ä¸€èŠ‚æˆ‘ä»¬æ¥è¯´è¯´MVPæ¨¡å¼, ä¹Ÿæ˜¯æˆ‘æ¯”è¾ƒå–œæ¬¢ä»¥åŠæ¨èå¤§å®¶ä½¿ç”¨çš„ä¸€ç§è®¾è®¡æ€æƒ³. ä»£ç è§:githubå‚è€ƒé“¾æ¥:  Hybird æ­å»ºé›¶è€¦åˆæ¶æ„ä»MVCå¼€å§‹  Hybird æ­å»ºåç«¯Koa.jså¹¶è¿‡åº¦åˆ°MVVMä»¥ä¸‹å†…å®¹åœ¨ä¸Šè¿°æ–‡ç« åŸºç¡€...&hellip;</p>
       <div class="post-list__meta"><time datetime="2017-04-11 15:06:00 +0800" class="post-list__meta--date date">2017-04-11</time> &#8226; <span class="post-list__meta--tags tags">ç§»åŠ¨å¼€å‘</span><a class="btn-border-small" href=/2017/04/Hybird-%E6%90%AD%E5%BB%BA%E5%89%8D%E7%AB%AFVue.js%E5%B9%B6%E5%8D%87%E7%BA%A7%E8%87%B3MVP/>ç»§ç»­é˜…è¯»</a></div>
   </div>
   
</section>

<section class="post-comments">
  
  
  
  
</section>


            <section class="footer">
    <footer>
    	<span class="footer__copyright">æœ¬ç«™ç‚¹é‡‡ç”¨<a href="http://creativecommons.org/licenses/by-nc-sa/4.0/">çŸ¥è¯†å…±äº« ç½²å-éå•†ä¸šæ€§ä½¿ç”¨-ç›¸åŒæ–¹å¼å…±äº« 4.0 å›½é™… è®¸å¯åè®®</a></span>
        <span class="footer__copyright">ç”± <a href="https://jekyllrb.com">Jekyll</a> äº 2019-09-28 ç”Ÿæˆï¼Œæ„Ÿè°¢ <a href="https://www.digitalocean.com/?refcode=30ed2d146762">Digital Ocean</a> ä¸ºæœ¬ç«™æä¾›ç¨³å®šçš„ VPS æœåŠ¡</span>
        <span class="footer__copyright">æœ¬ç«™ç”± <a href="https://github.com/coderZsq">@Castie!</a> åˆ›å»ºï¼Œé‡‡ç”¨ <a href="https://github.com/onevcat/vno-jekyll">Vno - Jekyll</a> ä½œä¸ºä¸»é¢˜ï¼Œæ‚¨å¯ä»¥åœ¨ GitHub æ‰¾åˆ°<a href="https://github.com/onevcat/OneV-s-Den">æœ¬ç«™æºç </a> - &copy; 2019</span>
    </footer>
</section>

        </div>
    </div>
    
    <script type="text/javascript" src="//code.jquery.com/jquery-1.11.3.min.js"></script>

<script type="text/javascript" src="/js/main.js"></script>



    
  </body>

</html>
