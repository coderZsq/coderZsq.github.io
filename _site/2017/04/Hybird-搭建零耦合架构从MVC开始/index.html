<!DOCTYPE html>
<html>

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  <title>Castie! Notes</title>
  <meta name="description"
    content="  å†™è¿™ä¸ªtargetçš„æƒ³æ³•æ˜¯æºäºæ¥ä¸‹æ¥å¯èƒ½è¦æ¥çš„æ–°é¡¹ç›®, å¼€å‘å°ç»„çš„æˆå‘˜ä»¬éƒ½è¦è¡¨è¾¾å‡ºä¸€äº›å¯¹æ¶æ„è®¾è®¡çš„æƒ³æ³•, è‡ªç„¶å¹³æ—¶æ‡’æ•£çš„æˆ‘ä¹Ÿä¸èƒ½ä¾‹å¤–, æ‰€ä»¥è¿™ä¸ªç³»åˆ—ä¼šåŸºäºæˆ‘æµ…æ˜¾çš„çŸ¥è¯†æ¥è¡¨è¾¾å‡ºæˆ‘å¯¹äºæ¶æ„è®¾è®¡çš„ä¸€äº›æ€è€ƒ, å’Œå¤§å®¶åˆ†äº«, ä»£ç è¯¦è§: github">
  <meta name="author" content="Wei Wang">

  <meta name="twitter:card" content="summary">
  <meta name="twitter:title"
    content="Hybird æ­å»ºé›¶è€¦åˆæ¶æ„ä»MVCå¼€å§‹">
  <meta name="twitter:description"
    content="  å†™è¿™ä¸ªtargetçš„æƒ³æ³•æ˜¯æºäºæ¥ä¸‹æ¥å¯èƒ½è¦æ¥çš„æ–°é¡¹ç›®, å¼€å‘å°ç»„çš„æˆå‘˜ä»¬éƒ½è¦è¡¨è¾¾å‡ºä¸€äº›å¯¹æ¶æ„è®¾è®¡çš„æƒ³æ³•, è‡ªç„¶å¹³æ—¶æ‡’æ•£çš„æˆ‘ä¹Ÿä¸èƒ½ä¾‹å¤–, æ‰€ä»¥è¿™ä¸ªç³»åˆ—ä¼šåŸºäºæˆ‘æµ…æ˜¾çš„çŸ¥è¯†æ¥è¡¨è¾¾å‡ºæˆ‘å¯¹äºæ¶æ„è®¾è®¡çš„ä¸€äº›æ€è€ƒ, å’Œå¤§å®¶åˆ†äº«, ä»£ç è¯¦è§: github">

  <meta property="og:type" content="article">
  <meta property="og:title"
    content="Hybird æ­å»ºé›¶è€¦åˆæ¶æ„ä»MVCå¼€å§‹">
  <meta property="og:description"
    content="  å†™è¿™ä¸ªtargetçš„æƒ³æ³•æ˜¯æºäºæ¥ä¸‹æ¥å¯èƒ½è¦æ¥çš„æ–°é¡¹ç›®, å¼€å‘å°ç»„çš„æˆå‘˜ä»¬éƒ½è¦è¡¨è¾¾å‡ºä¸€äº›å¯¹æ¶æ„è®¾è®¡çš„æƒ³æ³•, è‡ªç„¶å¹³æ—¶æ‡’æ•£çš„æˆ‘ä¹Ÿä¸èƒ½ä¾‹å¤–, æ‰€ä»¥è¿™ä¸ªç³»åˆ—ä¼šåŸºäºæˆ‘æµ…æ˜¾çš„çŸ¥è¯†æ¥è¡¨è¾¾å‡ºæˆ‘å¯¹äºæ¶æ„è®¾è®¡çš„ä¸€äº›æ€è€ƒ, å’Œå¤§å®¶åˆ†äº«, ä»£ç è¯¦è§: github">

  <link rel="stylesheet" href="/css/main.css">
  <link href="//netdna.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet">

  <link rel="canonical" href="http://localhost:4000/2017/04/Hybird-%E6%90%AD%E5%BB%BA%E9%9B%B6%E8%80%A6%E5%90%88%E6%9E%B6%E6%9E%84%E4%BB%8EMVC%E5%BC%80%E5%A7%8B/">
  <link rel="alternate" type="application/rss+xml" title="Castie!"
    href="http://localhost:4000/feed.xml">

  <meta name="google-site-verification" content="1-1ZlHoRvM0T2FqPbW2S-qLgYXN6rsn52kErlMPd_gw" />
  <script src="https://cdn.staticfile.org/jquery/1.10.2/jquery.min.js"></script>
</head>

  <body>

    <span class="mobile btn-mobile-menu">
        <i class="fa fa-list btn-mobile-menu__icon"></i>
        <i class="fa fa-angle-up btn-mobile-close__icon hidden"></i>
    </span>
    
    <header class="panel-cover panel-cover--collapsed" style="background-image: url('/assets/images/background-cover.jpg')">
  <div class="panel-main">

    <div class="panel-main__inner panel-inverted">
    <div class="panel-main__content">

        <a href="/#blog" title="å‰å¾€ Castie! çš„ä¸»é¡µ" class="blog-button"><img src="/assets/images/avatar.jpg" width="80" alt="Castie! logo" class="panel-cover__logo logo" /></a>
        <h1 class="panel-cover__title panel-title"><a href="/#blog" title="link to homepage for Castie!" class="blog-button">Castie!</a></h1>
        
        <span class="panel-cover__subtitle panel-subtitle">æ­£æ€åˆ†å¸ƒ, ä¼˜åŠ£ä¼´ç”Ÿ</span>
        
        <hr class="panel-cover__divider" />
        <p class="panel-cover__description">åŒ—å†¥æœ‰é±¼ï¼Œå…¶åä¸ºé²²ï¼ˆkÅ«nï¼‰ã€‚é²²ä¹‹å¤§ï¼Œä¸çŸ¥å…¶å‡ åƒé‡Œä¹Ÿï¼›åŒ–è€Œä¸ºé¸Ÿï¼Œå…¶åä¸ºé¹ã€‚é¹ä¹‹èƒŒï¼Œä¸çŸ¥å…¶å‡ åƒé‡Œä¹Ÿï¼›æ€’è€Œé£ï¼Œå…¶ç¿¼è‹¥å‚å¤©ä¹‹äº‘ã€‚æ˜¯é¸Ÿä¹Ÿï¼Œæµ·è¿åˆ™å°†å¾™äºå—å†¥ã€‚å—å†¥è€…ï¼Œå¤©æ± ä¹Ÿã€‚</p>
        <hr class="panel-cover__divider panel-cover__divider--secondary" />
        
        
        <p class="panel-cover__description">åŒ—æµ·è‹¥æ›°ï¼šâ€œäº•é¼ƒä¸å¯ä»¥è¯­äºæµ·è€…ï¼Œæ‹˜äºè™šä¹Ÿï¼›å¤è™«ä¸å¯ä»¥è¯­äºå†°è€…ï¼Œç¬ƒäºæ—¶ä¹Ÿï¼›æ›²å£«ä¸å¯ä»¥è¯­äºé“è€…ï¼ŒæŸäºæ•™ä¹Ÿã€‚ä»Šå°”å‡ºäºå´–æ¶˜ï¼Œè§‚äºå¤§æµ·ï¼Œä¹ƒçŸ¥å°”ä¸‘ï¼Œå°”å°†å¯ä¸è¯­å¤§ç†çŸ£ã€‚</p>
        
        
        <div class="navigation-wrapper">
          <div>
            <nav class="cover-navigation cover-navigation--primary">
              <ul class="navigation">
                <li class="navigation__item"><a href="/#blog" title="è®¿é—®åšå®¢" class="blog-button">åšå®¢</a></li>
                
                  <li class="navigation__item"><a href="https://coderzsq.github.io/coderZsq.practice.web/" target="_blank" title="æˆ‘çš„ç®€å†">ç®€å†</a></li>
                
              </ul>
            </nav>
          </div>
          
          <div><nav class="cover-navigation navigation--social">
  <ul class="navigation">

    
    <!-- juejin-->
    <li class="navigation__item">
      <a href="https://juejin.im/user/57e735dfa22b9d00614eecb8/posts" title="@coderZsq çš„ç¨€åœŸæ˜é‡‘" target="_blank">
        <i class='social fa fa-book'></i>
        <span class="label">juejin</span>
      </a>
    </li>
    

  

  
  <!-- Github -->
  <li class="navigation__item">
    <a href="https://github.com/coderZsq" title="@coderZsq çš„ Github" target="_blank">
      <i class='social fa fa-github'></i>
      <span class="label">Github</span>
    </a>
  </li>
  

  

  

  <!-- RSS -->
  <li class="navigation__item">
    <a href="/feed.xml" rel="author" title="RSS" target="_blank">
      <i class='social fa fa-rss'></i>
      <span class="label">RSS</span>
    </a>
  </li>

  
  <!-- Email -->
  <li class="navigation__item">
    <a href="mailto:a13701777868@gmail.com" title="Contact me">
      <i class='social fa fa-envelope'></i>
      <span class="label">Email</span>
    </a>
  </li>
  

  </ul>
</nav>
</div>
        </div>
      </div>
    </div>
    
    
    <div class="panel-cover--overlay cover-disabled"></div>
    
  </div>
</header>


    <div class="content-wrapper">
        <div class="content-wrapper__inner">
            <article class="post-container post-container--single" itemscope itemtype="http://schema.org/BlogPosting">
  <header class="post-header">
    <div class="post-meta">
      <time datetime="2017-04-10 17:17:00 +0800" itemprop="datePublished" class="post-meta__date date">2017-04-10</time> &#8226; <span class="post-meta__tags tags">ç§»åŠ¨å¼€å‘</span>
    </div>
    <h1 class="post-title">Hybird æ­å»ºé›¶è€¦åˆæ¶æ„ä»MVCå¼€å§‹</h1>
  </header>

  <section class="post">
    <blockquote>
  <p>å†™è¿™ä¸ªtargetçš„æƒ³æ³•æ˜¯æºäºæ¥ä¸‹æ¥å¯èƒ½è¦æ¥çš„æ–°é¡¹ç›®, å¼€å‘å°ç»„çš„æˆå‘˜ä»¬éƒ½è¦è¡¨è¾¾å‡ºä¸€äº›å¯¹æ¶æ„è®¾è®¡çš„æƒ³æ³•, è‡ªç„¶å¹³æ—¶æ‡’æ•£çš„æˆ‘ä¹Ÿä¸èƒ½ä¾‹å¤–, æ‰€ä»¥è¿™ä¸ªç³»åˆ—ä¼šåŸºäºæˆ‘æµ…æ˜¾çš„çŸ¥è¯†æ¥è¡¨è¾¾å‡ºæˆ‘å¯¹äºæ¶æ„è®¾è®¡çš„ä¸€äº›æ€è€ƒ, å’Œå¤§å®¶åˆ†äº«, ä»£ç è¯¦è§: <a href="https://github.com/coderZsq/coderZsq.target.swift">github</a></p>
</blockquote>

<p><img src="http://upload-images.jianshu.io/upload_images/1229762-3866097366648136.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="" /></p>

<p>è¯´åˆ°çƒ­ä¿®å¤, æœ€è¿‘JSPatchè·ªä¸‹æ¥å«çˆ¸çˆ¸çš„ç»å†è¿˜å†å†åœ¨ç›®, é‚£æˆ‘ä»¬çœŸçš„æœ‰çº¿ä¸ŠBugå°±åªèƒ½å‘ç´§æ€¥ç‰ˆæœ¬äº†å—? è™½ç„¶è¯´å®¡æ ¸æ¯”ä»¥å‰å¿«äº†ä½†æ—¶é—´ä¹Ÿä¸çŸ­å•Š, æˆ‘ä»¬çœ‹å¦‚ä½•é€šè¿‡æ¶æ„è®¾è®¡æ¥å®ç°çƒ­ä¿®å¤å§!</p>

<p>é¦–å…ˆæˆ‘ä»¬å…ˆåˆ›å»ºä¸€ä¸ªç›®å½•ç»“æ„:
.
â”œâ”€â”€ app
â”œâ”€â”€ server
â””â”€â”€ web</p>

<p>ç›®å½•ç»“æ„åŒ…æ‹¬ç§»åŠ¨ç«¯, å‰ç«¯å’Œåç«¯, å¯¹åº”ç”¨åˆ°çš„æŠ€æœ¯æ ˆ: Swift3, Vue2, Koa2.</p>

<p>ä½œä¸ºä¸€ä¸ªiOSå¼€å‘è€…, æˆ‘ä»¬è¿˜æ˜¯ä»appå…¥æ‰‹, æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªåä¸ºRouterPattermçš„å·¥ç¨‹, è¯­è¨€é€‰æ‹©ä¸ºSwift, å¯¹äºappçš„æ¶æ„è®¾è®¡, è€³ç†Ÿèƒ½è¯¦çš„ MVC, MVVM, MVP ä¹‹ç±»çš„, æˆ‘ä»¬ä¹Ÿä¸å…ä¿—çš„å¼•ç”¨å‰äººçš„æ€æƒ³:</p>

<p>MVC</p>

<p>MVC ä¹Ÿå°±æ˜¯ Model, Controller, Viewä¹‹å‰è¿›è¡Œäº¤äº’çš„è®¾è®¡æ¨¡å¼, æ˜¯ä¸€ç§æ¯”è¾ƒç»å…¸çš„æ¶æ„è®¾è®¡å§, è‹¹æœçš„Cocoaæ¡†æ¶ä¹Ÿæ˜¯åŸºäºMVCè®¾è®¡æ¨¡å¼çš„, ä¹Ÿæ˜¯å¹³æ—¶å¼€å‘æœ€å¸¸ç”¨åˆ°çš„è®¾è®¡äº†. æˆ‘ä»¬ä¸ä¹‹å¯¹åº”å…ˆåˆ›å»ºä¸€ä¸ªç›®å½•:
.
â”œâ”€â”€ Controller.swift
â”œâ”€â”€ Model.swift
â””â”€â”€ View.swift</p>

<p>åœ¨AppDelegateä¸­å°†Controllerè®¾ä¸ºæ ¹æ§åˆ¶å™¨</p>

<div class="highlighter-rouge"><pre class="highlight"><code>
    func application(_ application: UIApplication, didFinishLaunchingWithOptions launchOptions: [UIApplicationLaunchOptionsKey: Any]?) -&gt; Bool {
        window?.rootViewController = UINavigationController(rootViewController: Controller())
        return true
    }
</code></pre>
</div>

<p>Model.swift</p>

<div class="highlighter-rouge"><pre class="highlight"><code>class Model: NSObject {

    var text : String = ""
    var detailText : String = ""
}
</code></pre>
</div>

<p>View.swift</p>

<div class="highlighter-rouge"><pre class="highlight"><code>
let kScreenW = UIScreen.main.bounds.width
let kScreenH = UIScreen.main.bounds.height

class View: UIView {
    
    var models: [Model]? {
        didSet {
            tableView.reloadData()
        }
    }
    
    fileprivate lazy var tableView: UITableView = { [weak self] in
        var tableView = UITableView(frame: self!.bounds, style: .plain)
        tableView.dataSource = self
        return tableView
        }()
    
    override init(frame: CGRect) {
        super.init(frame: frame)
        addSubview(tableView)
    }
    
    required init?(coder aDecoder: NSCoder) {
        fatalError("init(coder:) has not been implemented")
    }
}

extension View: UITableViewDataSource {
    
    func tableView(_ tableView: UITableView, numberOfRowsInSection section: Int) -&gt; Int {
        return models?.count ?? 0
    }
    
    func tableView(_ tableView: UITableView, cellForRowAt indexPath: IndexPath) -&gt; UITableViewCell {
        
        let identifier = "identifier"
        let model: Model? = models?[indexPath.row]
        let cell = tableView.dequeueReusableCell(withIdentifier: identifier) ?? UITableViewCell(style: .subtitle, reuseIdentifier: identifier)
        cell.textLabel?.text = model?.text
        cell.detailTextLabel?.text = model?.detailText
        return cell
    }
}


</code></pre>
</div>

<p>Controller.swift</p>

<div class="highlighter-rouge"><pre class="highlight"><code>
class Controller: UIViewController {

    fileprivate lazy var models: [Model] = {
        var models = [Model]()
        
        for i in 0...20 {
            var model = Model()
            model.text = "text -- \(i)"
            model.detailText = "detailText -- \(i)"
            models.append(model)
        }
        
        return models
    }()
    
    fileprivate lazy var baseView: View = { [weak self] in
        return View(frame: self!.view.bounds)
    }()
    
    override func loadView() {
        super.loadView()
        title = "J1"
    }
    
    override func viewDidLoad() {
        super.viewDidLoad()
        setupView()
        adapterView()
    }
}

extension Controller {
    
    fileprivate func setupView() {
        view.addSubview(baseView)
    }
    
    fileprivate func adapterView() {
        baseView.models = models
    }
}

</code></pre>
</div>
<p>è¿™å¯èƒ½æ˜¯æœ€æœ´å®æ— åçš„MVCäº†å§, Model è´Ÿè´£æ•°æ®, Viewè´Ÿè´£è§†å›¾, Controllerè´Ÿè´£è§†å›¾å’Œæ•°æ®é—´çš„é€šä¿¡.</p>

<p>ä½†è¿™äº›éƒ½åªæ˜¯æ¨¡æ‹Ÿå‡ºæ¥çš„å‡æ•°æ®, appå¼€å‘å·¥ç¨‹å¸ˆåªä¼šåšä¸ªå£³å­è‚¯å®šä¸æ˜¯æˆ‘ä»¬çš„è¿½æ±‚, æ‰€ä»¥, æˆ‘ä»¬éœ€è¦è‡ªå·±æ­å»ºæœåŠ¡å™¨æ¥è¿›è¡Œäº¤äº’, è¿™é‡Œæˆ‘å°±ä½¿ç”¨Koaè¿›è¡Œç®€å•çš„æ¼”ç¤º.</p>

<p><a href="http://koajs.com/">Koa</a> å¯¹äºæœ‰äº›iOSå¼€å‘å¯èƒ½ä¼šè§‰å¾—æœ‰äº›é™Œç”Ÿ, Koaæ˜¯åŸºäºNode.jsçš„ä¸€ä¸ªå¼€å‘æ¡†æ¶, ç†Ÿæ‚‰Nodeçš„åŒå­¦æƒ³å¿…ä¸€å®šçŸ¥é“Expressè¿™ä¸ªæ¡†æ¶äº†, Koaæ˜¯ExpressåŸç­äººé©¬æ‰“é€ çš„å…ˆé©±çš„æœåŠ¡ç«¯æ¡†æ¶, ä½¿ç”¨æœ€æ–°ES6/ES7çš„è¯­æ³•, é€šè¿‡ä¸­é—´ä»¶çš„å½¢å¼æå¤§çš„è§£å†³äº†å›è°ƒåœ°ç‹±çš„é—®é¢˜.</p>

<p>ä»‹ç»å°±é‚£ä¹ˆå¤š, æˆ‘ä»¬çš„å…³æ³¨ç‚¹è¿˜æ˜¯åœ¨å¦‚ä½•æ­å»ºæœåŠ¡å™¨, é¦–å…ˆæˆ‘ä»¬éœ€è¦Nodeç¯å¢ƒ, æ²¡æœ‰çš„åŒå­¦<a href="https://nodejs.org/en/">ç‚¹å‡»è¿™é‡Œ</a>, ä¸‹è½½æœ€æ–°çš„ç¨³å®šç‰ˆå³å¯, å·²æœ‰çš„ä¹Ÿè¯·æ›´æ–°åˆ°æœ€æ–°ç‰ˆæœ¬, ä¸ç„¶å¯èƒ½ä¼šé€ æˆæ–°è¯­æ³•åœ¨æ—§ç¯å¢ƒä¸å…¼å®¹çš„é—®é¢˜.</p>

<p>æœ‰äº†Nodeç¯å¢ƒ, æˆ‘ä»¬å°±å¯ä»¥è¿›è¡ŒæœåŠ¡ç«¯çš„å¼€å‘äº†, é¦–å…ˆæˆ‘ä»¬å…ˆæ‰¾ä¸€ä¸ªKoaçš„ç”Ÿæˆå™¨, <a href="https://github.com/koajs/koa/wiki">å®˜æ–¹Wiki</a>ä¸Šæœ‰å¾ˆå¤šæ¨è, ç»ƒæ‰‹çš„è¯éšä¾¿é€‰ä¸€ä¸ªå°±å¥½, æˆ‘é€‰æ‹©çš„æ˜¯koa-generator.</p>

<ol>
  <li>å®‰è£… $ npm install -g koa-generator</li>
  <li>ç”Ÿæˆ $ koa2 RouterPatterm</li>
  <li>åŠ è½½ $ cd RouterPatterm $ npm install</li>
  <li>å¯åŠ¨ $ npm start</li>
</ol>

<p>æ‰“å¼€localhost:3000 å°±èƒ½çœ‹è§æœåŠ¡å™¨å·²ç»æ­å»ºå®Œæ¯•äº†.</p>

<p>å¯ä»¥çœ‹åˆ°åŸºæœ¬çš„é¡¹ç›®ç»“æ„å¦‚ä¸‹:
.
â””â”€â”€ RouterPatterm
    â”œâ”€â”€ app.js
    â”œâ”€â”€ bin
    â”‚Â Â  â”œâ”€â”€ run
    â”‚Â Â  â””â”€â”€ www
    â”œâ”€â”€ node_modules  <br />
    â”œâ”€â”€ package.json
    â”œâ”€â”€ public
    â”‚Â Â  â”œâ”€â”€ images
    â”‚Â Â  â”œâ”€â”€ javascripts
    â”‚Â Â  â””â”€â”€ stylesheets
    â”‚Â Â      â””â”€â”€ style.css
    â”œâ”€â”€ routes
    â”‚Â Â  â”œâ”€â”€ index.js
    â”‚Â Â  â””â”€â”€ users.js
    â””â”€â”€ views
        â”œâ”€â”€ error.jade
        â”œâ”€â”€ index.jade
        â””â”€â”€ layout.jade</p>

<p>å½©è›‹:
åˆ°è¿™æœ‰äº›åŒå­¦å¯èƒ½ä¼šé—®, é¡¹ç›®ç»“æ„ç›®å½•æ˜¯æ€ä¹ˆæ‰“å°å‡ºæ¥çš„:</p>

<ol>
  <li>$ brew install tree</li>
  <li>$ tree -L n (n ä»£è¡¨ä½ çš„éå†å±‚çº§)</li>
</ol>

<p>ä¸ºäº†èƒ½å¤Ÿæ ¹æ®ä¸åŒçš„è¿è¡Œç¯å¢ƒåŠ è½½ä¸åŒçš„é…ç½®å†…å®¹ï¼Œæˆ‘ä»¬éœ€è¦æ·»åŠ ä¸€äº›é…ç½®æ–‡ä»¶ã€‚
é¦–å…ˆåœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹æ·»åŠ configç›®å½•ï¼Œåœ¨configç›®å½•ä¸‹æ·»åŠ index.jsã€test.jsã€development.jsä¸‰ä¸ªæ–‡ä»¶ï¼Œå†…å®¹å¦‚ä¸‹ã€‚</p>

<p>development.js</p>

<div class="highlighter-rouge"><pre class="highlight"><code>/**
 * å¼€å‘ç¯å¢ƒçš„é…ç½®å†…å®¹
 */

module.exports = {
    env: 'development', //ç¯å¢ƒåç§°
    port: 3001,         //æœåŠ¡ç«¯å£å·
    mongodb_url: '',    //æ•°æ®åº“åœ°å€
    redis_url:'',       //redisåœ°å€
    redis_port: ''      //redisç«¯å£å·
}
</code></pre>
</div>
<p>test.js</p>

<div class="highlighter-rouge"><pre class="highlight"><code>/**
 * æµ‹è¯•ç¯å¢ƒçš„é…ç½®å†…å®¹
 */

module.exports = {
    env: 'test',        //ç¯å¢ƒåç§°
    port: 3801,         //æœåŠ¡ç«¯å£å·
    mongodb_url: '',    //æ•°æ®åº“åœ°å€
    redis_url:'',       //redisåœ°å€
    redis_port: ''      //redisç«¯å£å·
}
</code></pre>
</div>
<p>index.js</p>

<div class="highlighter-rouge"><pre class="highlight"><code>var development_env = require('./development');
var test_env = require('./test');

//æ ¹æ®ä¸åŒçš„NODE_ENVï¼Œè¾“å‡ºä¸åŒçš„é…ç½®å¯¹è±¡ï¼Œé»˜è®¤è¾“å‡ºdevelopmentçš„é…ç½®å¯¹è±¡
module.exports = {
    development: development_env,
    test: test_env
}[process.env.NODE_ENV || 'development']
</code></pre>
</div>

<p>ä»£ç åº”è¯¥éƒ½æ²¡ä»€ä¹ˆå¯è§£é‡Šçš„ï¼Œç„¶åæˆ‘ä»¬å†æ¥ç¼–è¾‘bin/wwwæ–‡ä»¶ã€‚</p>

<p>bin/wwwæ·»åŠ å¦‚ä¸‹ä»£ç </p>

<div class="highlighter-rouge"><pre class="highlight"><code>//å¼•å…¥é…ç½®æ–‡ä»¶
var config = require('../config');

// å°†ç«¯å£å·è®¾ç½®ä¸ºé…ç½®æ–‡ä»¶çš„ç«¯å£å·ï¼Œé»˜è®¤å€¼ä¸º3000
var port = normalizePort(config.port || '3000');
// æ‰“å°è¾“å‡ºç«¯å£å·
console.log('port = ' + config.port);
</code></pre>
</div>

<p>æµ‹è¯•æ•ˆæœï¼Œåœ¨ç»ˆç«¯è¾“å…¥npm startï¼Œå¯ä»¥çœ‹åˆ°</p>

<p>process.env.NODE_ENV=development
port = 3001
åˆ°æµè§ˆå™¨ä¸­è®¿é—®http://localhost:3001ï¼Œå¯ä»¥çœ‹åˆ°åŸæ¥çš„è¾“å…¥å†…å®¹ï¼Œè¯´æ˜é…ç½®æ–‡ä»¶å·²ç»ç”Ÿæ•ˆã€‚</p>

<p>é…ç½®å¥½ç¯å¢ƒ, æˆ‘ä»¬å°±è¦æä¾›APIæ¥ç»™å®¢æˆ·ç«¯è°ƒç”¨äº†, åœ¨ä»–ä»¬çš„ä¸–ç•Œç§°ä¸ºRESTFUL. 
é¦–å…ˆæˆ‘ä»¬åˆ›å»ºä¸€ä¸ªcontrollerç›®å½•:</p>

<p>app
â””â”€â”€ controllers
    â””â”€â”€ J1.js</p>

<p>æ¥å¯¹åº”å®¢æˆ·ç«¯çš„J1æ§åˆ¶å™¨</p>

<p>J1.js</p>

<div class="highlighter-rouge"><pre class="highlight"><code>exports.getJ1List = async(ctx, next) =&gt; {

    ctx.body = {
        models: [{
            text: 'æˆ‘çš„è´¦æˆ·',
            detailText: "æ¬¢è¿è¿›å…¥=&gt;æˆ‘çš„è´¦æˆ·",
        }, {
            text: 'æˆ‘çš„ä¼˜æƒ åˆ¸',
            detailText: "æ¬¢è¿è¿›å…¥=&gt;æˆ‘çš„ä¼˜æƒ åˆ¸",
        }, {
            text: 'æ”¶è´§åœ°å€',
            detailText: "æ¬¢è¿è¿›å…¥=&gt;æ”¶è´§åœ°å€",
        }, {
            text: 'åœ¨çº¿å®¢æœ',
            detailText: "æ¬¢è¿è¿›å…¥=&gt;åœ¨çº¿å®¢æœ",
        }, {
            text: 'ç”¨è¯æé†’',
            detailText: "æ¬¢è¿è¿›å…¥=&gt;ç”¨è¯æé†’",
        }, {
            text: 'è¯æŸ¥æŸ¥',
            detailText: "æ¬¢è¿è¿›å…¥=&gt;è¯æŸ¥æŸ¥",
        }, {
            text: 'ç–¾ç—…ç™¾ç§‘',
            detailText: "æ¬¢è¿è¿›å…¥=&gt;ç–¾ç—…ç™¾ç§‘",
        }, {
            text: 'è¯å“ç™¾ç§‘',
            detailText: "æ¬¢è¿è¿›å…¥=&gt;è¯å“ç™¾ç§‘",
        }, {
            text: 'å¥ä¸€å’¨è¯¢',
            detailText: "æ¬¢è¿è¿›å…¥=&gt;å¥ä¸€å’¨è¯¢",
        }, {
            text: 'å¸®åŠ©ä¸­å¿ƒ',
            detailText: "æ¬¢è¿è¿›å…¥=&gt;å¸®åŠ©ä¸­å¿ƒ",
        }, {
            text: 'ç‚¹èµ/åæ§½',
            detailText: "æ¬¢è¿è¿›å…¥=&gt;ç‚¹èµ/åæ§½",
        }, {
            text: 'å…³äºå¥ä¸€',
            detailText: "æ¬¢è¿è¿›å…¥=&gt;å…³äºå¥ä¸€",
        }]
    }
}


</code></pre>
</div>

<p>æ¥ä¸‹æ¥æˆ‘ä»¬ä¸ºAPIæ·»åŠ è·¯ç”±</p>

<p>åŸŸå + ç«¯å£å· /api/åŠŸèƒ½ç±»å‹/å…·ä½“ç«¯å£</p>

<p>.
â”œâ”€â”€ api
â”‚Â Â  â”œâ”€â”€ J1_router.js
â”‚Â Â  â””â”€â”€ index.js</p>

<p>index.js</p>

<div class="highlighter-rouge"><pre class="highlight"><code>
var router = require('koa-router')();
var J1_router = require('./J1_router');

router.use('/J1', J1_router.routes(), J1_router.allowedMethods())

module.exports = router;

</code></pre>
</div>

<p>J1_router.js</p>

<div class="highlighter-rouge"><pre class="highlight"><code>
var router = require('koa-router')();
var J1 = require('../../app/controllers/J1');

router.get('/getJ1List', J1.getJ1List);

module.exports = router;

</code></pre>
</div>

<p>app.jsæ–‡ä»¶ä¸­æ·»åŠ å¦‚ä¸‹ä»£ç ï¼š</p>

<div class="highlighter-rouge"><pre class="highlight"><code>const api = require('./routes/api');

router.use('/api', api.routes(), api.allowedMethods());
</code></pre>
</div>

<p>è¿™æ—¶æˆ‘ä»¬åœ¨æµè§ˆå™¨ä¸­è¾“å…¥http://localhost:3001/api/J1/getJ1Liståå°±èƒ½çœ‹è§æ•°æ®è¿”å›äº†.</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="w">
</span><span class="p">{</span><span class="w">
  </span><span class="nt">"models"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nt">"text"</span><span class="p">:</span><span class="w"> </span><span class="s2">"æˆ‘çš„è´¦æˆ·"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"detailText"</span><span class="p">:</span><span class="w"> </span><span class="s2">"æ¬¢è¿è¿›å…¥=&gt;æˆ‘çš„è´¦æˆ·"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nt">"text"</span><span class="p">:</span><span class="w"> </span><span class="s2">"æˆ‘çš„ä¼˜æƒ åˆ¸"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"detailText"</span><span class="p">:</span><span class="w"> </span><span class="s2">"æ¬¢è¿è¿›å…¥=&gt;æˆ‘çš„ä¼˜æƒ åˆ¸"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nt">"text"</span><span class="p">:</span><span class="w"> </span><span class="s2">"æ”¶è´§åœ°å€"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"detailText"</span><span class="p">:</span><span class="w"> </span><span class="s2">"æ¬¢è¿è¿›å…¥=&gt;æ”¶è´§åœ°å€"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nt">"text"</span><span class="p">:</span><span class="w"> </span><span class="s2">"åœ¨çº¿å®¢æœ"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"detailText"</span><span class="p">:</span><span class="w"> </span><span class="s2">"æ¬¢è¿è¿›å…¥=&gt;åœ¨çº¿å®¢æœ"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nt">"text"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ç”¨è¯æé†’"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"detailText"</span><span class="p">:</span><span class="w"> </span><span class="s2">"æ¬¢è¿è¿›å…¥=&gt;ç”¨è¯æé†’"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nt">"text"</span><span class="p">:</span><span class="w"> </span><span class="s2">"è¯æŸ¥æŸ¥"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"detailText"</span><span class="p">:</span><span class="w"> </span><span class="s2">"æ¬¢è¿è¿›å…¥=&gt;è¯æŸ¥æŸ¥"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nt">"text"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ç–¾ç—…ç™¾ç§‘"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"detailText"</span><span class="p">:</span><span class="w"> </span><span class="s2">"æ¬¢è¿è¿›å…¥=&gt;ç–¾ç—…ç™¾ç§‘"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nt">"text"</span><span class="p">:</span><span class="w"> </span><span class="s2">"è¯å“ç™¾ç§‘"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"detailText"</span><span class="p">:</span><span class="w"> </span><span class="s2">"æ¬¢è¿è¿›å…¥=&gt;è¯å“ç™¾ç§‘"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nt">"text"</span><span class="p">:</span><span class="w"> </span><span class="s2">"å¥ä¸€å’¨è¯¢"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"detailText"</span><span class="p">:</span><span class="w"> </span><span class="s2">"æ¬¢è¿è¿›å…¥=&gt;å¥ä¸€å’¨è¯¢"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nt">"text"</span><span class="p">:</span><span class="w"> </span><span class="s2">"å¸®åŠ©ä¸­å¿ƒ"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"detailText"</span><span class="p">:</span><span class="w"> </span><span class="s2">"æ¬¢è¿è¿›å…¥=&gt;å¸®åŠ©ä¸­å¿ƒ"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nt">"text"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ç‚¹èµ/åæ§½"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"detailText"</span><span class="p">:</span><span class="w"> </span><span class="s2">"æ¬¢è¿è¿›å…¥=&gt;ç‚¹èµ/åæ§½"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nt">"text"</span><span class="p">:</span><span class="w"> </span><span class="s2">"å…³äºå¥ä¸€"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"detailText"</span><span class="p">:</span><span class="w"> </span><span class="s2">"æ¬¢è¿è¿›å…¥=&gt;å…³äºå¥ä¸€"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<p>æ¥ä¸‹æ¥æˆ‘ä»¬è¦åšçš„æ˜¯æ ¼å¼åŒ–è¾“å‡º, æ¯•ç«Ÿæˆ‘ä»¬ç°åœ¨è¿”å›çš„æ ¼å¼ä¸æ˜¯ç‰¹åˆ«å‹å¥½.</p>

<p>error
â”œâ”€â”€ ApiError.js
â””â”€â”€ ApiErrorNames.js</p>

<p>middlewares
â””â”€â”€ response_formatter.js</p>

<p>response_formatter.js</p>

<div class="highlighter-rouge"><pre class="highlight"><code>var ApiError = require('../app/error/ApiError');

var response_formatter = (ctx) =&gt; {

    if (ctx.body) {
        ctx.body = {
            code: 0,
            message: 'success',
            data: ctx.body
        }
    } else {
        ctx.body = {
            code: 0,
            message: 'success'
        }
    }
}

var url_filter = (pattern) =&gt; {
    return async(ctx, next) =&gt; {
        var reg = new RegExp(pattern);
        try {
            await next();
        } catch (error) {
            if (error instanceof ApiError &amp;&amp; reg.test(ctx.originalUrl)) {
                ctx.status = 200;
                ctx.body = {
                    code: error.code,
                    message: error.message
                }
            }
            throw error;
        }

        if (reg.test(ctx.originalUrl)) {
            response_formatter(ctx);
        }
    }
}
module.exports = url_filter;

</code></pre>
</div>
<p>æœ€åå°†ä¸­é—´ä»¶æŒ‚è½½åˆ°koaä¸Š</p>

<div class="highlighter-rouge"><pre class="highlight"><code>const response_formatter = require('./middlewares/response_formatter');

app.use(response_formatter('^/api')); //åœ¨è·¯ç”±ä¹‹å‰è°ƒç”¨
</code></pre>
</div>

<p>å¥½äº†, æˆ‘ä»¬å†çœ‹ä¸‹è¿”å›çš„æ ¼å¼:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="w">
</span><span class="p">{</span><span class="w">
  </span><span class="nt">"code"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
  </span><span class="nt">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"success"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"models"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nt">"text"</span><span class="p">:</span><span class="w"> </span><span class="s2">"æˆ‘çš„è´¦æˆ·"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"detailText"</span><span class="p">:</span><span class="w"> </span><span class="s2">"æ¬¢è¿è¿›å…¥=&gt;æˆ‘çš„è´¦æˆ·"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nt">"text"</span><span class="p">:</span><span class="w"> </span><span class="s2">"æˆ‘çš„ä¼˜æƒ åˆ¸"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"detailText"</span><span class="p">:</span><span class="w"> </span><span class="s2">"æ¬¢è¿è¿›å…¥=&gt;æˆ‘çš„ä¼˜æƒ åˆ¸"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nt">"text"</span><span class="p">:</span><span class="w"> </span><span class="s2">"æ”¶è´§åœ°å€"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"detailText"</span><span class="p">:</span><span class="w"> </span><span class="s2">"æ¬¢è¿è¿›å…¥=&gt;æ”¶è´§åœ°å€"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nt">"text"</span><span class="p">:</span><span class="w"> </span><span class="s2">"åœ¨çº¿å®¢æœ"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"detailText"</span><span class="p">:</span><span class="w"> </span><span class="s2">"æ¬¢è¿è¿›å…¥=&gt;åœ¨çº¿å®¢æœ"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nt">"text"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ç”¨è¯æé†’"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"detailText"</span><span class="p">:</span><span class="w"> </span><span class="s2">"æ¬¢è¿è¿›å…¥=&gt;ç”¨è¯æé†’"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nt">"text"</span><span class="p">:</span><span class="w"> </span><span class="s2">"è¯æŸ¥æŸ¥"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"detailText"</span><span class="p">:</span><span class="w"> </span><span class="s2">"æ¬¢è¿è¿›å…¥=&gt;è¯æŸ¥æŸ¥"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nt">"text"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ç–¾ç—…ç™¾ç§‘"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"detailText"</span><span class="p">:</span><span class="w"> </span><span class="s2">"æ¬¢è¿è¿›å…¥=&gt;ç–¾ç—…ç™¾ç§‘"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nt">"text"</span><span class="p">:</span><span class="w"> </span><span class="s2">"è¯å“ç™¾ç§‘"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"detailText"</span><span class="p">:</span><span class="w"> </span><span class="s2">"æ¬¢è¿è¿›å…¥=&gt;è¯å“ç™¾ç§‘"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nt">"text"</span><span class="p">:</span><span class="w"> </span><span class="s2">"å¥ä¸€å’¨è¯¢"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"detailText"</span><span class="p">:</span><span class="w"> </span><span class="s2">"æ¬¢è¿è¿›å…¥=&gt;å¥ä¸€å’¨è¯¢"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nt">"text"</span><span class="p">:</span><span class="w"> </span><span class="s2">"å¸®åŠ©ä¸­å¿ƒ"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"detailText"</span><span class="p">:</span><span class="w"> </span><span class="s2">"æ¬¢è¿è¿›å…¥=&gt;å¸®åŠ©ä¸­å¿ƒ"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nt">"text"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ç‚¹èµ/åæ§½"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"detailText"</span><span class="p">:</span><span class="w"> </span><span class="s2">"æ¬¢è¿è¿›å…¥=&gt;ç‚¹èµ/åæ§½"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nt">"text"</span><span class="p">:</span><span class="w"> </span><span class="s2">"å…³äºå¥ä¸€"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"detailText"</span><span class="p">:</span><span class="w"> </span><span class="s2">"æ¬¢è¿è¿›å…¥=&gt;å…³äºå¥ä¸€"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">]</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre>
</div>

<p>æœåŠ¡ç«¯ç»ˆäºå‘Šä¸€æ®µè½, æˆ‘ä»¬å†å›åˆ°å®¢æˆ·ç«¯, æˆ‘ä»¬ä½¿ç”¨Alamofireæ¥è¿›è¡Œç½‘ç»œè¯·æ±‚.</p>

<p>å¯¹äºiOSçš„åŒ…ç®¡ç†å·¥å…·, æˆ‘ä»¬è¿˜æ˜¯ä½¿ç”¨cocoapods, è™½ç„¶æˆ‘å¹¶ä¸æ˜¯é‚£ä¹ˆå–œæ¬¢.</p>

<ol>
  <li>
    <p>$ gem install cocoapods</p>
  </li>
  <li>
    <p>$ pod init</p>
  </li>
  <li>
    <p>edit profile</p>
  </li>
  <li>
    <p>$ pod install</p>
  </li>
  <li>
    <p>$ pod update</p>
  </li>
</ol>

<p>ç¬¬ä¸‰æ­¥çš„ç¼–è¾‘å¦‚ä¸‹:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>
# Uncomment the next line to define a global platform for your project
# platform :ios, '9.0'

target 'RouterPatterm' do
  # Comment the next line if you're not using Swift and don't want to use dynamic frameworks
  use_frameworks!

  # Pods for RouterPatterm
     pod 'Alamofire'
     pod 'Kingfisher'
end


</code></pre>
</div>
<p>Kingfisheræ˜¯å–µç¥å†™çš„å›¾ç‰‡æ¡†æ¶, å…ˆå¯¼å…¥ä»¥åå¤‡ç”¨.</p>

<p>æˆ‘ä»¬åœ¨Alamofireçš„åŸºç¡€ä¸Šå†å°è£…ä¸€å±‚, å–åä¸ºHttp.swift</p>

<p>Http.swift</p>

<div class="highlighter-rouge"><pre class="highlight"><code>
import Alamofire

enum MethodType {
    case get
    case post
}

class Http {
    class func requestData(_ type : MethodType, URLString : String, parameters : [String : Any]? = nil, finishedCallback :  @escaping (_ result : Any) -&gt; ()) {
        let method = type == .get ? HTTPMethod.get : HTTPMethod.post
        Alamofire.request(URLString, method: method, parameters: parameters).responseJSON { (response) in
            
            guard let result = response.result.value else {
                print(response.result.error)
                return
            }
            
            finishedCallback(result)
        }
    }
}

</code></pre>
</div>

<p>æˆ‘ä»¬åœ¨Controllerä½¿ç”¨ç½‘ç»œè¯·æ±‚, URLä¸ºä¹‹å‰çš„API http://localhost:3001/api/J1/getJ1List</p>

<div class="highlighter-rouge"><pre class="highlight"><code>class Controller: UIViewController {

    fileprivate lazy var models: [Model] = [Model]()
    fileprivate lazy var baseView: View = { [weak self] in
        return View(frame: self!.view.bounds)
    }()
    
    override func loadView() {
        super.loadView()
        title = "J1"
    }
    
    override func viewDidLoad() {
        super.viewDidLoad()
        setupView()
        requestData()
    }
}

extension Controller {
    
    fileprivate func setupView() {
        view.addSubview(baseView)
    }
    
    fileprivate func requestData() {
        Http.requestData(.get, URLString: "http://localhost:3001/api/J1/getJ1List") { (response) in
            guard let result = response as? [String : Any] else { return }
            guard let data:[String : Any] = result["data"] as? [String : Any] else { return }
            guard let models:[[String : Any]] = data["models"] as? [[String : Any]] else { return }
            
            self.models.removeAll()
            for dict in models {
                self.models.append(Model(dict: dict))
            }
            self.adapterView()
        }
    }
    
    fileprivate func adapterView() {
        baseView.models = models
    }
}


</code></pre>
</div>

<p>è¿è¡Œå‘ç°ä»€ä¹ˆéƒ½æ²¡æœ‰, å› ä¸ºæœ¬åœ°çš„æ˜¯Httpåè®®, æˆ‘ä»¬éœ€è¦å¼ºåˆ¶è¶Šæƒ.</p>

<div class="highlighter-rouge"><pre class="highlight"><code>info.plist
App Transport Security Setting
Allow Arbitrary Loads = YES
</code></pre>
</div>

<p>å†æ¬¡è¿è¡Œå°±èƒ½å¤Ÿè¯»å–åˆ°æœåŠ¡å™¨è¿”å›çš„æ•°æ®äº†, ä½†æ˜¯ç»ˆç«¯çš„æ‰“å°ä¹±ç å¼ºè¿«ç—‡ä¸èƒ½å¿å•Š!</p>

<div class="highlighter-rouge"><pre class="highlight"><code>Product -&gt; Scheme -&gt; Edit Scheme
Environment Variable ä¸­è¾“å…¥:
OS_ACTIVITY_MODE , disable

</code></pre>
</div>
<p>è¿™æ ·ä¹±ç é—®é¢˜å°±è§£å†³äº†!!</p>

<p>è¿™å°±æ˜¯æˆ‘ç†è§£çš„MVCæ¨¡å¼, ä¸çŸ¥é“å’Œå¤§å®¶ç†è§£çš„æœ‰æ²¡æœ‰ä»€ä¹ˆåŒºåˆ«..</p>

<p>About:</p>

<p><img src="http://upload-images.jianshu.io/upload_images/1229762-3f8925783027b3fa.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="ç‚¹å‡»ä¸‹æ–¹é“¾æ¥è·³è½¬!!" /></p>

<p><a href="https://github.com/coderZsq/coderZsq.target.swift">ğŸŒŸ æºç  è¯·ç‚¹è¿™é‡ŒğŸŒŸÂ Â»&gt; å–œæ¬¢çš„æœ‹å‹è¯·ç‚¹å–œæ¬¢Â Â»&gt; ä¸‹è½½æºç çš„åŒå­¦è¯·é€ä¸‹å°æ˜Ÿæ˜ŸÂ Â»&gt; æœ‰é—²é’±çš„å£•ä»¬å¯ä»¥è¿›è¡Œæ‰“èµÂ Â»&gt; å°å¼Ÿä¼šå°½å¿«æ¨å‡ºæ›´å¥½çš„æ–‡ç« å’Œå¤§å®¶åˆ†äº«Â Â»&gt; ä½ çš„æ¿€åŠ±å°±æ˜¯æˆ‘çš„åŠ¨åŠ›!! </a></p>

  </section>
</article>

<section class="read-more">
   
   
   <div class="read-more-item">
       <span class="read-more-item-dim">æœ€è¿‘çš„æ–‡ç« </span>
       <h2 class="post-list__post-title post-title"><a href="/2017/04/Hybird-%E6%90%AD%E5%BB%BA%E5%90%8E%E7%AB%AFKoa.js%E5%B9%B6%E8%BF%87%E5%BA%A6%E5%88%B0MVVM/" title="link to Hybird æ­å»ºåç«¯Koa.jså¹¶è¿‡åº¦åˆ°MVVM">Hybird æ­å»ºåç«¯Koa.jså¹¶è¿‡åº¦åˆ°MVVM</a></h2>
       <p class="excerpt">  å›é¡¾ä¸ŠæœŸçš„å†…å®¹, æˆ‘ä»¬é€šè¿‡Koaæ­å»ºæœåŠ¡å™¨å®ç°äº†ç§»åŠ¨ç«¯ä¸åç«¯çš„äº¤äº’, ä½¿å¾—appä¸å†åªæ˜¯ä¸ªå£³å­,  é€šè¿‡CocoaPodsé›†æˆäº†AlamofireæˆåŠŸè°ƒç”¨åç«¯çš„API, å®ç°äº†æœ€ç²¾ç®€ä¹Ÿæ˜¯æœ€ç»å…¸çš„MVCæ¶æ„, ä»Šå¤©æˆ‘ä»¬æ¥è¯´è¯´ä¹‹å‰å¤§çƒ­çš„MVVMæ¶æ„.ä»£ç è¯¦è§:githubå‚è€ƒé“¾æ¥:  Hybird æ­å»ºé›¶è€¦åˆæ¶æ„ä»MVCå¼€å§‹ä»¥ä¸‹å†…å®¹åœ¨ä¸Šè¿°æ–‡ç« åŸºç¡€ä¸Šè¿›è¡Œ, è¯·äº‹å…ˆæŸ¥é˜….å…¶å®ç°åœ¨iOSå¼€å‘è¿˜æ˜¯åœ¨Objective-Cçš„å¤§ç¯å¢ƒä¸‹, è®©æˆ‘åœ¨é¡¹ç›®ä¸­ä½¿ç”¨MVVMè¿™ç§æ¶æ„, å…¶å®æˆ‘æ˜¯æ‹’ç»çš„, å› ä¸ºä¸ªäººè§‰...&hellip;</p>
       <div class="post-list__meta"><time datetime="2017-04-11 12:42:00 +0800" class="post-list__meta--date date">2017-04-11</time> &#8226; <span class="post-list__meta--tags tags">ç§»åŠ¨å¼€å‘</span><a class="btn-border-small" href=/2017/04/Hybird-%E6%90%AD%E5%BB%BA%E5%90%8E%E7%AB%AFKoa.js%E5%B9%B6%E8%BF%87%E5%BA%A6%E5%88%B0MVVM/>ç»§ç»­é˜…è¯»</a></div>
   </div>
   
   
   
   
   <div class="read-more-item">
       <span class="read-more-item-dim">æ›´æ—©çš„æ–‡ç« </span>
       <h2 class="post-list__post-title post-title"><a href="/2017/01/Hybird-%E8%AF%B4%E8%AF%B4%E4%B8%8EWeb%E4%BA%A4%E4%BA%92%E7%9A%84%E9%82%A3%E4%BA%9B%E4%BA%8B%E5%84%BF/" title="link to Hybird è¯´è¯´ä¸Webäº¤äº’çš„é‚£äº›äº‹å„¿">Hybird è¯´è¯´ä¸Webäº¤äº’çš„é‚£äº›äº‹å„¿</a></h2>
       <p class="excerpt">  å–µç¥100Tipsçš„è§£è¯»è¿è½½å·²ç»åˆ°äº†ç¬¬åç¯‡äº†, æ˜¯è¦å¥½å¥½æ•²ä¸€ä¸ªDemoæ¥å·©å›ºä¸€ä¸‹è‡ªå·±Swiftçš„å­¦ä¹ æƒ…å†µ, è¯´æ¥ä¹Ÿå·§, å‰ä¸¤å¤©é¢†å¯¼æ¥é—®æˆ‘èƒ½ä¸èƒ½å¸®ä»–åšä¸€ä¸ªéœ€æ±‚, è¦æ±‚webé¡µé¢è°ƒç”¨appåŸç”Ÿç›¸å†Œ, é€‰æ‹©ç…§ç‰‡åå°†å›¾ç‰‡åŠ è½½åˆ°webé¡µé¢ä¸Š. (åŒå­¦ä»¬å…ˆæƒ³æƒ³æ€æ ·æ‰èƒ½å¤Ÿå®ç°è¿™ä¸ªéœ€æ±‚), è¿™æ­£æ˜¯ä¸€ä¸ªé”»ç‚¼Swift3çš„æœºä¼š, ç»å¯¹ä¸èƒ½é”™è¿‡, è™½ç„¶ä¸€å£ç­”åº”, ä½†å®é™…æ“ä½œä¸­è¿˜æ˜¯æœ‰ä¸€äº›æŠ€æœ¯éš¾ç‚¹å­˜åœ¨çš„, åœ¨æ­¤ä¸ä½ åˆ†äº«.è¦åšè¿™ä¸ªåŠŸèƒ½, è™½ç„¶å¯¹æˆ‘æ¥è¯´è¿˜æ˜¯Objective-Cæ¯”è¾ƒç†Ÿæ‚‰, å„é¡¹æŠ€æœ¯é»‘é­”æ³•éƒ½æ‰‹åˆ°æ“’æ¥,...&hellip;</p>
       <div class="post-list__meta"><time datetime="2017-01-11 23:33:00 +0800" class="post-list__meta--date date">2017-01-11</time> &#8226; <span class="post-list__meta--tags tags">ç§»åŠ¨å¼€å‘</span><a class="btn-border-small" href=/2017/01/Hybird-%E8%AF%B4%E8%AF%B4%E4%B8%8EWeb%E4%BA%A4%E4%BA%92%E7%9A%84%E9%82%A3%E4%BA%9B%E4%BA%8B%E5%84%BF/>ç»§ç»­é˜…è¯»</a></div>
   </div>
   
</section>

<section class="post-comments">
  
  
  
  
</section>


            <section class="footer">
    <footer>
    	<span class="footer__copyright">æœ¬ç«™ç‚¹é‡‡ç”¨<a href="http://creativecommons.org/licenses/by-nc-sa/4.0/">çŸ¥è¯†å…±äº« ç½²å-éå•†ä¸šæ€§ä½¿ç”¨-ç›¸åŒæ–¹å¼å…±äº« 4.0 å›½é™… è®¸å¯åè®®</a></span>
        <span class="footer__copyright">ç”± <a href="https://jekyllrb.com">Jekyll</a> äº 2020-09-16 ç”Ÿæˆï¼Œæ„Ÿè°¢ <a href="https://www.digitalocean.com/?refcode=30ed2d146762">Digital Ocean</a> ä¸ºæœ¬ç«™æä¾›ç¨³å®šçš„ VPS æœåŠ¡</span>
        <span class="footer__copyright">æœ¬ç«™ç”± <a href="https://github.com/coderZsq">@Castie!</a> åˆ›å»ºï¼Œé‡‡ç”¨ <a href="https://github.com/onevcat/vno-jekyll">Vno - Jekyll</a> ä½œä¸ºä¸»é¢˜ï¼Œæ‚¨å¯ä»¥åœ¨ GitHub æ‰¾åˆ°<a href="https://github.com/onevcat/OneV-s-Den">æœ¬ç«™æºç </a> - &copy; 2020</span>
    </footer>
</section>

        </div>
    </div>
    
    <script type="text/javascript" src="//code.jquery.com/jquery-1.11.3.min.js"></script>

<script type="text/javascript" src="/js/main.js"></script>



    
  </body>

</html>
