<!DOCTYPE html>
<html>

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  <title>Castie! Notes</title>
  <meta name="description" content="  ä¸Šå‘¨å¿™ç€å†™ä»£ç ç”Ÿæˆå™¨äº†, å›åˆ°æˆ‘ä»¬çš„å­¦ä¹ ä¸­æ¥, ä»Šå¤©æˆ‘ä»¬æ¥ç»§ç»­å­¦ä¹ SpriteKit, ä¸Šç¯‡æˆ‘ä»¬å­¦ä¹ äº†ä¸€äº›2Dæ¸¸æˆåœºæ™¯, ç²¾çµ, æ‘„åƒå¤´, è¡ŒåŠ¨çš„åŸºæœ¬æ¦‚å¿µ, ä»Šå¤©æˆ‘ä»¬å°±æ¥è¿›å…¥ç‰©ç†çš„ä¸–ç•Œ, æ„Ÿå—ç¢°æ’æ‰€å¸¦æ¥çš„ä¹è¶£.ä»£ç è§:github">
  <meta name="author" content="Wei Wang">

  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="SpriteKit é€šè¿‡æ£€æµ‹æ©ç è¿›è¡Œç‰©ç†è¯†åˆ«">
  <meta name="twitter:description" content="  ä¸Šå‘¨å¿™ç€å†™ä»£ç ç”Ÿæˆå™¨äº†, å›åˆ°æˆ‘ä»¬çš„å­¦ä¹ ä¸­æ¥, ä»Šå¤©æˆ‘ä»¬æ¥ç»§ç»­å­¦ä¹ SpriteKit, ä¸Šç¯‡æˆ‘ä»¬å­¦ä¹ äº†ä¸€äº›2Dæ¸¸æˆåœºæ™¯, ç²¾çµ, æ‘„åƒå¤´, è¡ŒåŠ¨çš„åŸºæœ¬æ¦‚å¿µ, ä»Šå¤©æˆ‘ä»¬å°±æ¥è¿›å…¥ç‰©ç†çš„ä¸–ç•Œ, æ„Ÿå—ç¢°æ’æ‰€å¸¦æ¥çš„ä¹è¶£.ä»£ç è§:github">
  
  <meta property="og:type" content="article">
  <meta property="og:title" content="SpriteKit é€šè¿‡æ£€æµ‹æ©ç è¿›è¡Œç‰©ç†è¯†åˆ«">
  <meta property="og:description" content="  ä¸Šå‘¨å¿™ç€å†™ä»£ç ç”Ÿæˆå™¨äº†, å›åˆ°æˆ‘ä»¬çš„å­¦ä¹ ä¸­æ¥, ä»Šå¤©æˆ‘ä»¬æ¥ç»§ç»­å­¦ä¹ SpriteKit, ä¸Šç¯‡æˆ‘ä»¬å­¦ä¹ äº†ä¸€äº›2Dæ¸¸æˆåœºæ™¯, ç²¾çµ, æ‘„åƒå¤´, è¡ŒåŠ¨çš„åŸºæœ¬æ¦‚å¿µ, ä»Šå¤©æˆ‘ä»¬å°±æ¥è¿›å…¥ç‰©ç†çš„ä¸–ç•Œ, æ„Ÿå—ç¢°æ’æ‰€å¸¦æ¥çš„ä¹è¶£.ä»£ç è§:github">
  
  <link rel="icon" type="image/ico" href="/assets/images/favicon.ico" />
  <link href="/assets/images/favicon.ico" rel="shortcut icon" type="image/ico">
  
  <link rel="stylesheet" href="/css/main.css">
  <link href="//netdna.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet">

  <link rel="canonical" href="http://localhost:4000/2017/05/SpriteKit-%E9%80%9A%E8%BF%87%E6%A3%80%E6%B5%8B%E6%8E%A9%E7%A0%81%E8%BF%9B%E8%A1%8C%E7%89%A9%E7%90%86%E8%AF%86%E5%88%AB/">
  <link rel="alternate" type="application/rss+xml" title="Castie!" href="http://localhost:4000/feed.xml">
  
  <meta name="google-site-verification" content="1-1ZlHoRvM0T2FqPbW2S-qLgYXN6rsn52kErlMPd_gw" />
  
</head>


  <body>

    <span class="mobile btn-mobile-menu">
        <i class="fa fa-list btn-mobile-menu__icon"></i>
        <i class="fa fa-angle-up btn-mobile-close__icon hidden"></i>
    </span>
    
    <header class="panel-cover panel-cover--collapsed" style="background-image: url('/assets/images/background-cover.jpg')">
  <div class="panel-main">

    <div class="panel-main__inner panel-inverted">
    <div class="panel-main__content">

        <a href="/#blog" title="å‰å¾€ Castie! çš„ä¸»é¡µ" class="blog-button"><img src="/assets/images/avatar.jpg" width="80" alt="Castie! logo" class="panel-cover__logo logo" /></a>
        <h1 class="panel-cover__title panel-title"><a href="/#blog" title="link to homepage for Castie!" class="blog-button">Castie!</a></h1>
        
        <span class="panel-cover__subtitle panel-subtitle">æ­£æ€åˆ†å¸ƒ, ä¼˜åŠ£ä¼´ç”Ÿ</span>
        
        <hr class="panel-cover__divider" />
        <p class="panel-cover__description">åŒ—å†¥æœ‰é±¼ï¼Œå…¶åä¸ºé²²ï¼ˆkÅ«nï¼‰ã€‚é²²ä¹‹å¤§ï¼Œä¸çŸ¥å…¶å‡ åƒé‡Œä¹Ÿï¼›åŒ–è€Œä¸ºé¸Ÿï¼Œå…¶åä¸ºé¹ã€‚é¹ä¹‹èƒŒï¼Œä¸çŸ¥å…¶å‡ åƒé‡Œä¹Ÿï¼›æ€’è€Œé£ï¼Œå…¶ç¿¼è‹¥å‚å¤©ä¹‹äº‘ã€‚æ˜¯é¸Ÿä¹Ÿï¼Œæµ·è¿åˆ™å°†å¾™äºå—å†¥ã€‚å—å†¥è€…ï¼Œå¤©æ± ä¹Ÿã€‚</p>
        <hr class="panel-cover__divider panel-cover__divider--secondary" />
        
        
        <p class="panel-cover__description">åŒ—æµ·è‹¥æ›°ï¼šâ€œäº•é¼ƒä¸å¯ä»¥è¯­äºæµ·è€…ï¼Œæ‹˜äºè™šä¹Ÿï¼›å¤è™«ä¸å¯ä»¥è¯­äºå†°è€…ï¼Œç¬ƒäºæ—¶ä¹Ÿï¼›æ›²å£«ä¸å¯ä»¥è¯­äºé“è€…ï¼ŒæŸäºæ•™ä¹Ÿã€‚ä»Šå°”å‡ºäºå´–æ¶˜ï¼Œè§‚äºå¤§æµ·ï¼Œä¹ƒçŸ¥å°”ä¸‘ï¼Œå°”å°†å¯ä¸è¯­å¤§ç†çŸ£ã€‚</p>
        
        
        <div class="navigation-wrapper">
          <div>
            <nav class="cover-navigation cover-navigation--primary">
              <ul class="navigation">
                <li class="navigation__item"><a href="/#blog" title="è®¿é—®åšå®¢" class="blog-button">åšå®¢</a></li>
                
                  <li class="navigation__item"><a href="https://coderzsq.github.io/coderZsq.webpack.js/" target="_blank" title="æˆ‘çš„ç®€å†">ç®€å†</a></li>
                
              </ul>
            </nav>
          </div>
          
          <div><nav class="cover-navigation navigation--social">
  <ul class="navigation">

    
    <!-- jianshu-->
    <li class="navigation__item">
      <a href="http://www.jianshu.com/u/9d7fad1a4693" title="@coderZsq çš„ç®€ä¹¦" target="_blank">
        <i class='social fa fa-book'></i>
        <span class="label">jianshu</span>
      </a>
    </li>
    

    
    <!-- juejin-->
    <li class="navigation__item">
      <a href="https://juejin.im/user/57e735dfa22b9d00614eecb8" title="@coderZsq çš„ç¨€åœŸæ˜é‡‘" target="_blank">
        <i class='social fa fa-align-center'></i>
        <span class="label">juejin</span>
      </a>
    </li>
    

  

  
  <!-- Github -->
  <li class="navigation__item">
    <a href="https://github.com/coderZsq" title="@coderZsq çš„ Github" target="_blank">
      <i class='social fa fa-github'></i>
      <span class="label">Github</span>
    </a>
  </li>
  

  

  

  <!-- RSS -->
  <li class="navigation__item">
    <a href="/feed.xml" rel="author" title="RSS" target="_blank">
      <i class='social fa fa-rss'></i>
      <span class="label">RSS</span>
    </a>
  </li>

  
  <!-- Email -->
  <li class="navigation__item">
    <a href="mailto:a13701777868@gmail.com" title="Contact me">
      <i class='social fa fa-envelope'></i>
      <span class="label">Email</span>
    </a>
  </li>
  

  </ul>
</nav>
</div>
        </div>
      </div>
    </div>
    
    
    <div class="panel-cover--overlay cover-blue"></div>
    
  </div>
</header>


    <div class="content-wrapper">
        <div class="content-wrapper__inner">
            <article class="post-container post-container--single" itemscope itemtype="http://schema.org/BlogPosting">
  <header class="post-header">
    <div class="post-meta">
      <time datetime="2017-05-18 16:38:00 +0800" itemprop="datePublished" class="post-meta__date date">2017-05-18</time> &#8226; <span class="post-meta__tags tags">ç§»åŠ¨å¼€å‘</span>
    </div>
    <h1 class="post-title">SpriteKit é€šè¿‡æ£€æµ‹æ©ç è¿›è¡Œç‰©ç†è¯†åˆ«</h1>
  </header>

  <section class="post">
    <blockquote>
  <p>ä¸Šå‘¨å¿™ç€å†™ä»£ç ç”Ÿæˆå™¨äº†, å›åˆ°æˆ‘ä»¬çš„å­¦ä¹ ä¸­æ¥, ä»Šå¤©æˆ‘ä»¬æ¥ç»§ç»­å­¦ä¹ SpriteKit, ä¸Šç¯‡æˆ‘ä»¬å­¦ä¹ äº†ä¸€äº›2Dæ¸¸æˆåœºæ™¯, ç²¾çµ, æ‘„åƒå¤´, è¡ŒåŠ¨çš„åŸºæœ¬æ¦‚å¿µ, ä»Šå¤©æˆ‘ä»¬å°±æ¥è¿›å…¥ç‰©ç†çš„ä¸–ç•Œ, æ„Ÿå—ç¢°æ’æ‰€å¸¦æ¥çš„ä¹è¶£.ä»£ç è§:<a href="https://github.com/coderZsq/coderZsq.target.swift">github</a></p>
</blockquote>

<p><img src="http://upload-images.jianshu.io/upload_images/1229762-b5433f0a638b1a15.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="" /></p>

<p>iOS7æœ‰å‡ºè¿‡UIDynamic, ç”¨äºUIVIewçš„ç‰©ç†åŠ¨ç”»æ•ˆæœ, åŒæœŸAppleä¹Ÿå‡ºäº†SpriteKitæ¡†æ¶, åˆ°ç°åœ¨ä¹Ÿå·²ç»3ä¸ªå¹´å¤´äº†, æˆ‘ä»¬å­¦ä¹ SpriteKitçš„ç›®çš„ä¹Ÿåœ¨äºæ›´å¥½çš„å¯¹UIKitè¿›è¡Œäº†è§£. ä¹Ÿç®—æ˜¯ä¸€æ¡æŠ€æœ¯è¿›é˜¶çš„è·¯å§, æˆ‘ä»¬å…ˆæ¥çœ‹ä¸€ä¸‹å­¦ä¹ ç‰©ç†ä¸–ç•Œæ‰€éœ€è¦ç†Ÿæ‚‰çš„API.</p>

<h5 id="skphysicsworld">SKPhysicsWorld</h5>
<div class="highlighter-rouge"><pre class="highlight"><code>open class SKPhysicsWorld : NSObject, NSCoding
    open var gravity: CGVector
    open var speed: CGFloat
    unowned(unsafe) open var contactDelegate: SKPhysicsContactDelegate?

    open func add(_ joint: SKPhysicsJoint)
    open func remove(_ joint: SKPhysicsJoint)
    open func removeAllJoints()
    open func body(in rect: CGRect) -&gt; SKPhysicsBody?
    open func enumerateBodies(in rect: CGRect, using block: @escaping (SKPhysicsBody, UnsafeMutablePointer&lt;ObjCBool&gt;) -&gt; Swift.Void)
</code></pre>
</div>
<ul>
  <li><code class="highlighter-rouge">gravity</code> ç‰©ç†ä¸–ç•Œçš„é‡åŠ›</li>
  <li><code class="highlighter-rouge">speed </code>ç‰©ç†ä¸–ç•Œçš„é€Ÿåº¦</li>
  <li><code class="highlighter-rouge">contactDelegate </code> ç‰©ç†ä¸–ç•Œçš„ä»£ç†</li>
  <li><code class="highlighter-rouge">add(_ joint: SKPhysicsJoint)</code> ç»™ç‰©ç†ä¸–ç•Œæ·»åŠ ä¸€ä¸ªè¿æ¥</li>
  <li><code class="highlighter-rouge">remove(_ joint: SKPhysicsJoint)</code> åˆ é™¤ç‰©ç†ä¸–ç•Œä¸­çš„ä¸€ä¸ªè¿æ¥</li>
  <li><code class="highlighter-rouge">removeAllJoints()</code> åˆ é™¤ç‰©ç†ä¸–ç•Œçš„æ‰€æœ‰è¿æ¥</li>
  <li><code class="highlighter-rouge">body(in rect: CGRect) -&gt; SKPhysicsBody?</code> è¿”å›ç‰©ç†ä¸–ç•Œä¸­è§„å®šçŸ©å½¢å†…çš„ç‰©ç†ä½“</li>
  <li><code class="highlighter-rouge">enumerateBodies(in rect: CGRect, using block:</code> éå†ç‰©ç†ä¸–ç•Œä¸­æ‰€æœ‰çš„ç‰©ç†ä½“</li>
</ul>

<h5 id="skphysicsbody">SKPhysicsBody</h5>
<div class="highlighter-rouge"><pre class="highlight"><code>open class SKPhysicsBody : NSObject, NSCopying, NSCoding
    public /*not inherited*/ init(circleOfRadius r: CGFloat, center: CGPoint)
    public /*not inherited*/ init(rectangleOf s: CGSize, center: CGPoint)
    public /*not inherited*/ init(polygonFrom path: CGPath)
    public /*not inherited*/ init(edgeLoopFrom rect: CGRect)
@available(iOS 8.0, *)
    public /*not inherited*/ init(texture: SKTexture, size: CGSize)
    public /*not inherited*/ init(bodies: [SKPhysicsBody])

    open var isDynamic: Bool
    open var restitution: CGFloat
    open var density: CGFloat
    open var mass: CGFloat
    open var categoryBitMask: UInt32
    open var collisionBitMask: UInt32
    open var contactTestBitMask: UInt32
    open var joints: [SKPhysicsJoint] { get }
    weak open var node: SKNode? { get }
    open var velocity: CGVector
    open var angularVelocity: CGFloat

    open func applyForce(_ force: CGVector, at point: CGPoint)
    open func applyTorque(_ torque: CGFloat)
    open func applyImpulse(_ impulse: CGVector, at point: CGPoint)
    open func allContactedBodies() -&gt; [SKPhysicsBody]
</code></pre>
</div>
<ul>
  <li><code class="highlighter-rouge">init(circleOfRadius r: CGFloat, center: CGPoint)</code> é€šè¿‡åŠå¾„å’ŒåŸç‚¹åˆ›å»ºåœ†å½¢ç‰©ç†ä½“</li>
  <li><code class="highlighter-rouge">init(rectangleOf s: CGSize, center: CGPoint)</code> é€šè¿‡ä¸­ç‚¹å’Œå°ºå¯¸åˆ›å»ºçŸ©å½¢ç‰©ç†ä½“</li>
  <li><code class="highlighter-rouge">init(polygonFrom path: CGPath)</code> é€šè¿‡è·¯å¾„åˆ›å»ºå¤šè¾¹å½¢ä¸è§„åˆ™ç‰©ç†ä½“</li>
  <li><code class="highlighter-rouge">init(edgeLoopFrom rect: CGRect)</code> é€šè¿‡çŸ©å½¢åˆ›å»ºè¾¹ç¼˜ç‰©ç†ä½“, è¿™ä¸ªä¸å¥½æè¿°, å°±æ˜¯å‘å†…çš„ç‰©ç†ä½“</li>
  <li><code class="highlighter-rouge">init(texture: SKTexture, size: CGSize)</code>é€šè¿‡çº¹ç†å’Œå°ºå¯¸åˆ›å»ºä»¥Alphaé€šé“çš„ç‰©ç†ä½“</li>
  <li><code class="highlighter-rouge">init(bodies: [SKPhysicsBody])</code> æ ¹æ®ç‰©ç†ä½“åˆ›å»ºå¯åˆå¹¶çš„ç‰©ç†ä½“</li>
  <li><code class="highlighter-rouge">isDynamic </code> ç‰©ç†ä½“æ˜¯å¦è¿›å…¥ç‰©ç†ä¸–ç•Œ</li>
  <li><code class="highlighter-rouge">restitution </code> ç‰©ç†ä½“çš„å¼¹æ€§, å§‘ä¸”å«å¼¹æ€§å§ =. =</li>
  <li><code class="highlighter-rouge">density </code> ç‰©ç†ä½“çš„å¯†åº¦</li>
  <li><code class="highlighter-rouge">mass </code> ç‰©ç†ä½“çš„è´¨é‡</li>
  <li><code class="highlighter-rouge">categoryBitMask </code> ç‰©ç†ä½“çš„ç±»å‹æ ‡è¯†</li>
  <li><code class="highlighter-rouge">collisionBitMask </code> ç‰©ç†ä½“çš„ç¢°æ’æ ‡è¯†</li>
  <li><code class="highlighter-rouge">contactTestBitMask </code> ç‰©ç†ä½“çš„è§¦ç¢°æ ‡è¯†</li>
  <li><code class="highlighter-rouge">joints</code> ç‰©ç†ä½“çš„è¿æ¥ç‚¹</li>
  <li><code class="highlighter-rouge">node </code> ç‰©ç†ä½“æœ¬èº«çš„èŠ‚ç‚¹</li>
  <li><code class="highlighter-rouge">velocity </code> ç‰©ç†ä½“çš„é€Ÿåº¦</li>
  <li><code class="highlighter-rouge">angularVelocity </code> ç‰©ç†ä½“çš„è§’é€Ÿåº¦</li>
  <li><code class="highlighter-rouge">applyForce(_ force: CGVector, at point: CGPoint)</code> é€šè¿‡å‘é‡å’Œç‚¹ç»™ç‰©ç†ä½“æ·»åŠ ä¸€ä¸ªåŠ›</li>
  <li><code class="highlighter-rouge">applyTorque(_ torque: CGFloat) </code>ç»™ç‰©ç†ä½“æ·»åŠ ä¸€ä¸ªæ‰­åŠ›</li>
  <li><code class="highlighter-rouge">applyImpulse(_ impulse: CGVector, at point: CGPoint)</code> é€šè¿‡å‘é‡å’Œç‚¹ç»™ç‰©ç†ä½“æ·»åŠ ä¸€ä¸ªè„‰å†²åŠ›</li>
  <li><code class="highlighter-rouge">allContactedBodies() -&gt; [SKPhysicsBody]</code> è¿”å›æ‰€æœ‰ä¸ä¹‹æ¥è§¦çš„ç‰©ç†ä½“</li>
</ul>

<h5 id="skphysicscontactdelegate">SKPhysicsContactDelegate</h5>
<div class="highlighter-rouge"><pre class="highlight"><code>public protocol SKPhysicsContactDelegate : NSObjectProtocol
    optional public func didBegin(_ contact: SKPhysicsContact)
    optional public func didEnd(_ contact: SKPhysicsContact)
</code></pre>
</div>
<ul>
  <li><code class="highlighter-rouge">didBegin(_ contact: SKPhysicsContact)</code> ç‰©ç†ä¸–ç•Œä¸­çš„ç‰©ç†ä½“å¼€å§‹æ¥è§¦çš„æ—¶å€™è°ƒç”¨</li>
  <li><code class="highlighter-rouge">didEnd(_ contact: SKPhysicsContact)</code> ç‰©ç†ä¸–ç•Œä¸­çš„ç‰©ç†ä½“ç»“æŸæ¥è§¦çš„æ—¶å€™è°ƒç”¨</li>
</ul>

<h5 id="skphysicscontact">SKPhysicsContact</h5>
<div class="highlighter-rouge"><pre class="highlight"><code>open class SKPhysicsContact : NSObject
    open var bodyA: SKPhysicsBody { get }
    open var bodyB: SKPhysicsBody { get }
    open var contactPoint: CGPoint { get }
</code></pre>
</div>
<ul>
  <li><code class="highlighter-rouge">bodyA </code>åªè¯»å±æ€§, ç‰©ç†æ¥è§¦çš„ç‰©ç†ä½“A</li>
  <li><code class="highlighter-rouge"> bodyB </code>åªè¯»å±æ€§, ç‰©ç†æ¥è§¦çš„ç‰©ç†ä½“B</li>
  <li><code class="highlighter-rouge">contactPoint</code> åªè¯»å±æ€§, ç‰©ç†ä½“Aå’Œç‰©ç†ä½“Bçš„è¿æ¥ç‚¹</li>
</ul>

<h5 id="skphysicsjoint">SKPhysicsJoint</h5>
<div class="highlighter-rouge"><pre class="highlight"><code>open class SKPhysicsJoint : NSObject, NSCoding
    open var bodyA: SKPhysicsBody
    open var bodyB: SKPhysicsBody

open class SKPhysicsJointPin : SKPhysicsJoint
    open class func joint(withBodyA bodyA: SKPhysicsBody, bodyB: SKPhysicsBody, anchor: CGPoint) -&gt; SKPhysicsJointPin

open class SKPhysicsJointSpring : SKPhysicsJoint
    open class func joint(withBodyA bodyA: SKPhysicsBody, bodyB: SKPhysicsBody, anchorA: CGPoint, anchorB: CGPoint) -&gt; SKPhysicsJointSpring

open class SKPhysicsJointFixed : SKPhysicsJoint
    open class func joint(withBodyA bodyA: SKPhysicsBody, bodyB: SKPhysicsBody, anchor: CGPoint) -&gt; SKPhysicsJointFixed

open class SKPhysicsJointSliding : SKPhysicsJoint
    open class func joint(withBodyA bodyA: SKPhysicsBody, bodyB: SKPhysicsBody, anchor: CGPoint, axis: CGVector) -&gt; SKPhysicsJointSliding

open class SKPhysicsJointLimit : SKPhysicsJoint
    open class func joint(withBodyA bodyA: SKPhysicsBody, bodyB: SKPhysicsBody, anchorA: CGPoint, anchorB: CGPoint) -&gt; SKPhysicsJointLimit
</code></pre>
</div>
<ul>
  <li><code class="highlighter-rouge">bodyA</code> ç‰©ç†é“¾æ¥çš„ç‰©ç†ä½“A</li>
  <li><code class="highlighter-rouge">bodyB</code> ç‰©ç†é“¾æ¥çš„ç‰©ç†ä½“B</li>
  <li><code class="highlighter-rouge">SKPhysicsJointPin </code> é’ˆè¿æ¥</li>
  <li><code class="highlighter-rouge">SKPhysicsJointSpring </code> å¼¹ç°§è¿æ¥</li>
  <li><code class="highlighter-rouge">SKPhysicsJointFixed </code> å›ºå®šè¿æ¥</li>
  <li><code class="highlighter-rouge">SKPhysicsJointSliding</code> æ»‘åŠ¨é“¾æ¥</li>
  <li><code class="highlighter-rouge">SKPhysicsJointLimit</code> é™åˆ¶é“¾æ¥</li>
</ul>

<h5 id="skconstraint">SKConstraint</h5>
<div class="highlighter-rouge"><pre class="highlight"><code>@available(iOS 8.0, *)
open class SKConstraint : NSObject, NSCoding, NSCopying
    open var enabled: Bool
    open class func orient(to node: SKNode, offset radians: SKRange) -&gt; Self
    open class func zRotation(_ zRange: SKRange) -&gt; Self
    open class func distance(_ range: SKRange, to node: SKNode) -&gt; Self
    open class func positionX(_ xRange: SKRange, y yRange: SKRange) -&gt; Self

open class SKRange : NSObject, NSCoding, NSCopying 
    public init(lowerLimit lower: CGFloat, upperLimit upper: CGFloat)
</code></pre>
</div>
<ul>
  <li><code class="highlighter-rouge">enabled</code> æ˜¯å¦è¿›è¡Œå¯¹èŠ‚ç‚¹çš„çº¦æŸ</li>
  <li><code class="highlighter-rouge">orient(to node: SKNode, offset radians: SKRange)</code>å¯¹èŠ‚ç‚¹çš„æ–¹å‘è¿›è¡Œçº¦æŸ</li>
  <li><code class="highlighter-rouge">zRotation(_ zRange: SKRange)</code> å¯¹èŠ‚ç‚¹çš„æ—‹è½¬è¿›è¡Œçº¦æŸ</li>
  <li><code class="highlighter-rouge">distance(_ range: SKRange, to node: SKNode)</code> å¯¹èŠ‚ç‚¹çš„è·ç¦»è¿›è¡Œçº¦æŸ</li>
  <li><code class="highlighter-rouge">positionX(_ xRange: SKRange, y yRange: SKRange) </code> å¯¹èŠ‚ç‚¹çš„ä½ç½®è¿›è¡Œçº¦æŸ</li>
  <li><code class="highlighter-rouge">SKRange</code> èŠ‚ç‚¹çº¦æŸçš„èŒƒå›´</li>
</ul>

<h4 id="å®æˆ˜">å®æˆ˜:</h4>
<p>API, äº†è§£ä¸€äº›åŸºæœ¬çš„å°±å¤Ÿäº†, å¦‚æœè¦æ·±ç©¶å¯ä»¥æ‰“å¼€å¤´æ–‡ä»¶é€ä¸ªå°è¯•, æˆ‘ä»¬ç°åœ¨å°±æ¥å®ç°ä¸€ä¸ªå°æ¸¸æˆ, è¿™ä¸ªæ¸¸æˆä¸­åŒ…å«äº†6ä¸ªåœºæ™¯, å°±åƒé€šå…³æ¸¸æˆä¸€æ ·, ç ´åç‰©ä½“ä½¿çŒ«ç¡åœ¨åºŠä¸Šå³ä¸ºé—¯å…³æˆåŠŸåä¹‹åˆ™ä¸ºå¤±è´¥, æˆåŠŸåè¿›å…¥ä¸‹ä¸€å…³, æˆ‘ä»¬ç€æ‰‹è¿›è¡Œæ¸¸æˆçš„å¼€å‘å§!</p>

<p><img src="http://upload-images.jianshu.io/upload_images/1229762-c989ff9849ff42a6.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="" /></p>

<ul>
  <li>step1 åˆ›å»ºæ¸¸æˆåè‡ªåŠ¨ç”ŸæˆGameViewController, ä»å¯è§†åŒ–æ–‡ä»¶ä¸­è¯»å–åœºæ™¯</li>
</ul>

<div class="highlighter-rouge"><pre class="highlight"><code>  override func viewDidLoad() {
    super.viewDidLoad()

    if let view = self.view as! SKView? {
      // Load the SKScene from 'GameScene.sks' //ä»å¯è§†åŒ–æ–‡ä»¶ä¸­è¯»å–åœºæ™¯
      if let scene = GameScene.level(levelNum: 1) {
        // Set the scale mode to scale to fit the window
        scene.scaleMode = .aspectFill

        // Present the scene
        view.presentScene(scene)
      }

      view.ignoresSiblingOrder = false //ä¸å¿½ç•¥åŒçº§èŠ‚ç‚¹

      view.showsFPS = true
      view.showsNodeCount = true
      view.showsPhysics = true //æ˜¾ç¤ºç‰©ç†ä½“
    }
</code></pre>
</div>

<ul>
  <li>step2 åŠ¨æ€åŒ–é…ç½®åœºæ™¯æ–‡ä»¶</li>
</ul>

<div class="highlighter-rouge"><pre class="highlight"><code>  //1
  var currentLevel: Int = 0 //å½“å‰åœºæ™¯ç­‰çº§

  //2
  class func level(levelNum: Int) -&gt; GameScene? {
    let scene = GameScene(fileNamed: "Level\(levelNum)")! //æ ¹æ®ç­‰çº§è¯»å–å¯è§†åŒ–æ–‡ä»¶åœºæ™¯
    scene.currentLevel = levelNum //èµ‹å€¼ç»™å½“å‰ç­‰çº§
    scene.scaleMode = .aspectFill
    return scene
  }
</code></pre>
</div>

<ul>
  <li>step3 è®¾ç½®å„ç‰©ç†ä½“æ ‡è¯†, æ ¹æ®å·¦ç§»æ¥è¿›è¡Œåˆ¤æ–­</li>
</ul>

<div class="highlighter-rouge"><pre class="highlight"><code>struct PhysicsCategory {
  static let None:  UInt32 = 0 //ä¸è¡¨ç¤ºç‰©ç†ä½“
  static let Cat:   UInt32 = 0b1 // 1 //çŒ«ç‰©ç†ä½“æ ‡è¯†
  static let Block: UInt32 = 0b10 // 2 //ç –å—ç‰©ç†ä½“æ ‡è¯†
  static let Bed:   UInt32 = 0b100 // 4 //åºŠç‰©ç†ä½“æ ‡è¯†
  static let Edge:  UInt32 = 0b1000 // 8 //è¾¹ç¼˜ç‰©ç†ä½“æ ‡è¯†
  static let Label: UInt32 = 0b10000 // 16 //æ ‡ç­¾ç‰©ç†ä½“æ ‡è¯†
  static let Spring:UInt32 = 0b100000 // 32 //å¼¹ç°§ç‰©ç†ä½“æ ‡è¯†
  static let Hook:  UInt32 = 0b1000000 // 64 //é’©å­ç‰©ç†ä½“æ ‡è¯†
}
</code></pre>
</div>
<ul>
  <li>step4 è®¾ç½®ç²¾çµèŠ‚ç‚¹çš„äº‹ä»¶å’Œäº¤äº’åè®®</li>
</ul>

<div class="highlighter-rouge"><pre class="highlight"><code>protocol EventListenerNode {
  func didMoveToScene() //å½“èŠ‚ç‚¹è¿›å…¥åœºæ™¯æ—¶è°ƒç”¨
}
protocol InteractiveNode {
  func interact() //ç”¨æˆ·äº¤äº’æ—¶è°ƒç”¨
}
</code></pre>
</div>
<ul>
  <li>step5 çŒ«èŠ‚ç‚¹çš„è®¾ç½®</li>
</ul>

<div class="highlighter-rouge"><pre class="highlight"><code>class CatNode: SKSpriteNode, EventListenerNode, InteractiveNode { //éµå®ˆäº‹ä»¶å’Œäº¤äº’åè®®

  static let kCatTappedNotification = "kCatTappedNotification"

  func didMoveToScene() {
    print("cat added to scene")

    let catBodyTexture = SKTexture(imageNamed: "cat_body_outline") //è¯»å–ç‰©ç†ä½“çº¹ç†
    parent!.physicsBody = SKPhysicsBody(texture: catBodyTexture, size: catBodyTexture.size()) //é€šè¿‡çº¹ç†åˆ›å»ºç‰©ç†ä½“

    parent!.physicsBody!.categoryBitMask = PhysicsCategory.Cat //å°†è¯¥èŠ‚ç‚¹è®¾ç½®ä¸ºçŒ«ç‰©ç†ä½“æ ‡è¯†
    parent!.physicsBody!.collisionBitMask = PhysicsCategory.Block | PhysicsCategory.Edge | PhysicsCategory.Spring //çŒ«ç‰©ç†ä½“æ ‡è¯†å°†å’Œè¾¹ç¼˜ç‰©ç†ä½“, ç –å—ç‰©ç†ä½“, å¼¹ç°§ç‰©ç†ä½“ç¢°æ’
    parent!.physicsBody!.contactTestBitMask = PhysicsCategory.Bed | PhysicsCategory.Edge //çŒ«ç‰©ç†ä½“å°†ä¼šå’ŒåºŠç‰©ç†ä½“, è¾¹ç¼˜ç‰©ç†ä½“æ¥è§¦

    isUserInteractionEnabled = true //çŒ«èŠ‚ç‚¹å¯ä»¥å’Œç”¨æˆ·è¿›è¡Œäº¤äº’
  }

  func wakeUp() { //é†’æ¥
    // 1
    for child in children {
      child.removeFromParent() //éå†ç§»é™¤æ‰€æœ‰çš„å­èŠ‚ç‚¹
    }
    texture = nil //ç½®ç©ºçº¹ç†
    color = SKColor.clear //è®¾ç½®é€æ˜è‰²
    // 2
    let catAwake = SKSpriteNode(fileNamed: "CatWakeUp")!.childNode(withName: "cat_awake")! //è·å–å¯è§†åŒ–åœºæ™¯ä¸­çš„nameä¸ºcat_awakeçš„èŠ‚ç‚¹
    // 3
    catAwake.move(toParent: self) //ç§»åŠ¨èŠ‚ç‚¹åˆ°ä¸Šå±‚
    catAwake.position = CGPoint(x: -30, y: 100) //è®¾ç½®ä½ç½®
  }

  func curlAt(scenePoint: CGPoint) { //èœ·ç¼©
    parent!.physicsBody = nil //ç½®ç©ºç‰©ç†ä½“
    for child in children {
      child.removeFromParent() /
    }
    texture = nil 
    color = SKColor.clear 

    let catCurl = SKSpriteNode(fileNamed: "CatCurl")!.childNode(withName: "cat_curl")!
    catCurl.move(toParent: self)
    catCurl.position = CGPoint(x: -30, y: 100) 

    var localPoint = parent!.convert(scenePoint, from: scene!) //ä»åœºæ™¯ä¸­è½¬æ¢åæ ‡
    localPoint.y += frame.size.height/3 

    run(SKAction.group([ //è¿›è¡Œç»„åŠ¨ç”»
      SKAction.move(to: localPoint, duration: 0.66),
      SKAction.rotate(toAngle: -parent!.zRotation, duration: 0.5)
      ]))
  }

  func interact() {
    NotificationCenter.default.post(Notification(name: //å‘é€é€šçŸ¥
      NSNotification.Name(CatNode.kCatTappedNotification), object: nil))

    if DiscoBallNode.isDiscoTime &amp;&amp; !isDoingTheDance { 
      isDoingTheDance = true
      let move = SKAction.sequence([
        SKAction.moveBy(x: 80, y: 0, duration: 0.5),
        SKAction.wait(forDuration: 0.5),
        SKAction.moveBy(x: -30, y: 0, duration: 0.5)
        ])
      let dance = SKAction.repeat(move, count: 3)
      parent!.run(dance, completion: {
        self.isDoingTheDance = false
      })
    }
  }

  override func touchesEnded(_ touches: Set&lt;UITouch&gt;, with event: UIEvent?) {
    super.touchesEnded(touches, with: event)
    interact()
  }

  private var isDoingTheDance = false


}
</code></pre>
</div>
<ul>
  <li>step6 çŸ³å¤´èŠ‚ç‚¹çš„è®¾ç½®</li>
</ul>

<div class="highlighter-rouge"><pre class="highlight"><code>class StoneNode: SKSpriteNode, EventListenerNode, InteractiveNode {
  func didMoveToScene() {
    guard let scene = scene else { //å¯¹åœºæ™¯è¿›è¡Œæ ¡éªŒ
      return
    }

    if parent == scene {
      scene.addChild(StoneNode.makeCompoundNode(in: scene)) //æ·»åŠ çŸ³å¤´èŠ‚ç‚¹è¿›å…¥åœºæ™¯
    }
  }

  func interact() {
    isUserInteractionEnabled = false //ä¸å¯äº¤äº’
    run( SKAction.sequence([
      SKAction.playSoundFileNamed("pop.mp3",
                                  waitForCompletion: false),
      SKAction.removeFromParent()
      ]))
  }

  static func makeCompoundNode(in scene: SKScene) -&gt; SKNode { //åˆ›å»ºå¤åˆèŠ‚ç‚¹
    let compound = StoneNode() 
    for stone in scene.children.filter({ node in node is StoneNode}) { //è¿‡æ»¤èŠ‚ç‚¹
        stone.removeFromParent()
        compound.addChild(stone)
    }

    let bodies = compound.children.map({ node in //æ˜ å°„èŠ‚ç‚¹
      SKPhysicsBody(rectangleOf: node.frame.size, center: node.position) //è®¾ç½®ç‰©ç†ä½“
    })

    compound.physicsBody = SKPhysicsBody(bodies: bodies) //åˆå¹¶ç‰©ç†ä½“
    compound.physicsBody!.collisionBitMask = PhysicsCategory.Edge  | PhysicsCategory.Cat | PhysicsCategory.Block //è®¾ç½®ç¢°æ’æ ‡è¯†
    compound.physicsBody!.categoryBitMask = PhysicsCategory.Block //è®¾ç½®ä¸ºç –å—ç‰©ç†ä½“æ ‡è¯†
    compound.isUserInteractionEnabled = true 
    compound.zPosition = 1
    return compound
  }

  override func touchesEnded(_ touches: Set&lt;UITouch&gt;, with event: UIEvent?) {
    super.touchesEnded(touches, with: event)
    interact()
  }


}
</code></pre>
</div>
<ul>
  <li>step7 åºŠèŠ‚ç‚¹çš„è®¾ç½®</li>
</ul>

<div class="highlighter-rouge"><pre class="highlight"><code>class BedNode: SKSpriteNode, EventListenerNode {
  func didMoveToScene() {
    print("bed added to scene")

    let bedBodySize = CGSize(width: 40.0, height: 30.0)
    physicsBody = SKPhysicsBody(rectangleOf: bedBodySize)
    physicsBody!.isDynamic = false //ä¸è¿›å…¥ç‰©ç†ä¸–ç•Œ

    physicsBody!.categoryBitMask = PhysicsCategory.Bed
    physicsBody!.collisionBitMask = PhysicsCategory.None
  }
}
</code></pre>
</div>

<ul>
  <li>step8 ç –å—èŠ‚ç‚¹çš„è®¾ç½®</li>
</ul>

<div class="highlighter-rouge"><pre class="highlight"><code>class BlockNode: SKSpriteNode, EventListenerNode, InteractiveNode {

  func didMoveToScene() {
    isUserInteractionEnabled = true 
  }

  func interact() {
    isUserInteractionEnabled = false

    run(SKAction.sequence([
      SKAction.playSoundFileNamed("pop.mp3",
                                  waitForCompletion: false),
      SKAction.scale(to: 0.8, duration: 0.1),
      SKAction.removeFromParent()
      ]))
  }

  override func touchesEnded(_ touches: Set&lt;UITouch&gt;, with event: UIEvent?) {
    super.touchesEnded(touches, with: event)
    print("destroy block")
    interact()
  }
  
}

</code></pre>
</div>

<ul>
  <li>step9 æ ‡ç­¾èŠ‚ç‚¹çš„è®¾ç½®</li>
</ul>

<div class="highlighter-rouge"><pre class="highlight"><code>class MessageNode: SKLabelNode {

  convenience init(message: String) {
    self.init(fontNamed: "AvenirNext-Regular") //è®¾ç½®å­—ä½“
    text = message
    fontSize = 256.0
    fontColor = SKColor.gray
    zPosition = 100
    let front = SKLabelNode(fontNamed: "AvenirNext-Regular")
    front.text = message
    front.fontSize = 256.0
    front.fontColor = SKColor.white
    front.position = CGPoint(x: -2, y: -2)
    addChild(front)

    physicsBody = SKPhysicsBody(circleOfRadius: 10) //è®¾ç½®ç‰©ç†ä½“
    physicsBody!.collisionBitMask = PhysicsCategory.Edge
    physicsBody!.categoryBitMask = PhysicsCategory.Label
    physicsBody!.contactTestBitMask = PhysicsCategory.Edge
    physicsBody!.restitution = 0.7 //è®¾ç½®ç‰©ç†ä½“å¼¹æ€§
  }

  //chapter 9, challenge 1
  private var bounceCount = 0

  func didBounce() {
    bounceCount += 1
    if bounceCount &gt;= 4 { //å¼¹èµ·æ¬¡æ•°åˆ¤æ–­
      removeFromParent()
    }
  }
}
</code></pre>
</div>

<ul>
  <li>step10 å¼¹ç°§èŠ‚ç‚¹è®¾ç½®</li>
</ul>

<div class="highlighter-rouge"><pre class="highlight"><code>class SpringNode: SKSpriteNode, EventListenerNode, InteractiveNode {
  func didMoveToScene() {
    isUserInteractionEnabled = true
  }

  func interact() {
    isUserInteractionEnabled = false
    physicsBody!.applyImpulse(CGVector(dx: 0, dy: 250), // ç»™ç‰©ç†ä½“æ·»åŠ ä¸€ä¸ªå‘ä¸Šçš„è„‰å†²åŠ›
                              at: CGPoint(x: size.width/2, y: size.height))
    run(SKAction.sequence([
      SKAction.wait(forDuration: 1),
      SKAction.removeFromParent()
      ]))
  }

  override func touchesEnded(_ touches: Set&lt;UITouch&gt;, with event: UIEvent?) {
    super.touchesEnded(touches, with: event)
    interact()
  }
}
</code></pre>
</div>

<ul>
  <li>step11 é’©å­åœ°åŸºèŠ‚ç‚¹çš„è®¾ç½®</li>
</ul>

<div class="highlighter-rouge"><pre class="highlight"><code>class HookBaseNode: SKSpriteNode, EventListenerNode {

  private var hookNode = SKSpriteNode(imageNamed: "hook") // é’©å­èŠ‚ç‚¹
  private var ropeNode = SKSpriteNode(imageNamed: "rope") //ç»³å­èŠ‚ç‚¹
  private var hookJoint: SKPhysicsJointFixed! //é’©å­çš„è¿æ¥

  var isHooked: Bool { //æ˜¯å¦è¢«å‹¾ä½
    return hookJoint != nil
  }

  func didMoveToScene() {
    guard let scene = scene else {
      return
    }

    let ceilingFix = SKPhysicsJointFixed.joint(withBodyA: //å°†åœºæ™¯å’Œé’©å­åœ°åŸºç‰©ç†ä½“è¿›è¡Œå›ºå®šè¿æ¥
      scene.physicsBody!, bodyB: physicsBody!, anchor: CGPoint.zero)
    scene.physicsWorld.add(ceilingFix) //å°†è¿æ¥æ·»åŠ åˆ°ç‰©ç†ä¸–ç•Œä¸­

    ropeNode.anchorPoint = CGPoint(x: 0, y: 0.5)
    ropeNode.zRotation = CGFloat(270).degreesToRadians()
    ropeNode.position = position
    scene.addChild(ropeNode)

    hookNode.position = CGPoint(
      x: position.x,
      y: position.y - ropeNode.size.width)
    hookNode.physicsBody =
      SKPhysicsBody(circleOfRadius: hookNode.size.width/2) //ç‰©ç†ä½“æ ‡è¯†çš„è®¾ç½®
    hookNode.physicsBody!.categoryBitMask = PhysicsCategory.Hook
    hookNode.physicsBody!.contactTestBitMask = PhysicsCategory.Cat
    hookNode.physicsBody!.collisionBitMask = PhysicsCategory.None
    scene.addChild(hookNode)

    let hookPosition = CGPoint(x: hookNode.position.x,
                               y: hookNode.position.y+hookNode.size.height/2)
    let ropeJoint = SKPhysicsJointSpring.joint( //é’©å­èŠ‚ç‚¹å’Œé’©å­åœ°åŸºèŠ‚ç‚¹è¿›è¡Œå¼¹ç°§è¿æ¥
      withBodyA: physicsBody!, bodyB: hookNode.physicsBody!,
      anchorA: position,
      anchorB: hookPosition)
    scene.physicsWorld.add(ropeJoint) 

    let range = SKRange(lowerLimit: 0.0, upperLimit: 0.0) //çº¦æŸèŒƒå›´
    let orientConstraint = SKConstraint.orient(to: hookNode, offset: range) //æ·»åŠ æ–¹å‘çº¦æŸ
    ropeNode.constraints = [orientConstraint] //å¾€ç»³å­èŠ‚ç‚¹ä¸­æ·»åŠ çº¦æŸ

    hookNode.physicsBody!.applyImpulse(CGVector(dx: 50, dy: 0)) //ç»™é’©å­èŠ‚ç‚¹æ·»åŠ ä¸€ä¸ªæ¨ªå‘çš„è„‰å†²åŠ›

    NotificationCenter.default.addObserver( //æ·»åŠ é€šçŸ¥
      self, selector: #selector(catTapped), name: Notification
        .Name(CatNode.kCatTappedNotification), object: nil)
  }

  func hookCat(catPhysicsBody: SKPhysicsBody) { //å‹¾ä½çŒ«
    catPhysicsBody.velocity = CGVector(dx: 0, dy: 0) //é€Ÿåº¦æ¸…é›¶
    catPhysicsBody.angularVelocity = 0 //è§’é€Ÿåº¦æ¸…é›¶

    let pinPoint = CGPoint( 
      x: hookNode.position.x,
      y: hookNode.position.y + hookNode.size.height/2)
    hookJoint = SKPhysicsJointFixed.joint( //é’©å­ç‰©ç†ä½“å’ŒçŒ«ç‰©ç†ä½“è¿›è¡Œå›ºå®šè¿æ¥
      withBodyA: hookNode.physicsBody!, bodyB: catPhysicsBody,
      anchor: pinPoint)
    scene!.physicsWorld.add(hookJoint)
    hookNode.physicsBody!.contactTestBitMask = PhysicsCategory.None
    
  }

  func releaseCat() { //é‡Šæ”¾çŒ«
    hookNode.physicsBody!.categoryBitMask = PhysicsCategory.None
    hookNode.physicsBody!.contactTestBitMask = PhysicsCategory.None
    hookJoint.bodyA.node!.zRotation = 0
    hookJoint.bodyB.node!.zRotation = 0
    scene!.physicsWorld.remove(hookJoint) //ç‰©ç†ä¸–ç•Œä¸­ç§»é™¤è¿æ¥
    hookJoint = nil
  }

  func catTapped() { //ç‚¹å‡»çŒ«
    if isHooked {
      releaseCat() 
    }
  }
}
</code></pre>
</div>
<ul>
  <li>step12 ç›¸æ¡†èŠ‚ç‚¹çš„è®¾ç½®</li>
</ul>

<div class="highlighter-rouge"><pre class="highlight"><code>class PictureNode: SKSpriteNode, EventListenerNode, InteractiveNode {

  func didMoveToScene() {
    isUserInteractionEnabled = true

    let pictureNode = SKSpriteNode(imageNamed: "picture") //ç›¸æ¡†èŠ‚ç‚¹
    let maskNode = SKSpriteNode(imageNamed: "picture-frame-mask") //è’™ç‰ˆèŠ‚ç‚¹

    let cropNode = SKCropNode() //ç±»ä¼¼äºCALayer
    cropNode.addChild(pictureNode)
    cropNode.maskNode = maskNode //æ·»åŠ è’™ç‰ˆ
    addChild(cropNode)
  }

  func interact() {
    isUserInteractionEnabled = false
    physicsBody!.isDynamic = true //è¿›å…¥ç‰©ç†ä¸–ç•Œ
  }

  override func touchesEnded(_ touches: Set&lt;UITouch&gt;, with event: UIEvent?) {
    super.touchesEnded(touches, with: event)
    interact()
  }
}
</code></pre>
</div>

<ul>
  <li>step13 è¿ªæ–¯ç§‘çƒèŠ‚ç‚¹çš„è®¾ç½®</li>
</ul>

<div class="highlighter-rouge"><pre class="highlight"><code>class DiscoBallNode: SKSpriteNode, EventListenerNode, InteractiveNode {

  private var player: AVPlayer!
  private var video: SKVideoNode!

  func didMoveToScene() {
    isUserInteractionEnabled = true

    let fileUrl = Bundle.main.url(forResource: "discolights-loop", withExtension: "mov")! //è¯»å–è§†é¢‘æ–‡ä»¶
    player = AVPlayer(url: fileUrl)
    video = SKVideoNode(avPlayer:player)

    video.size = scene!.size
    video.position = CGPoint(
      x: scene!.frame.midX,
      y: scene!.frame.midY)
    video.zPosition = -1
    scene!.addChild(video)
    video.isHidden = true
    video.pause()

    NotificationCenter.default.addObserver(self,
                                           selector: #selector(didReachEndOfVideo),
                                           name: NSNotification.Name.AVPlayerItemDidPlayToEndTime,
                                           object: nil)

    video.alpha = 0.75
  }

  func interact() {
    if !isDiscoTime {
      isDiscoTime = true
    }
  }

  func didReachEndOfVideo() {
    print("rewind!")
    player.currentItem!.seek(to: kCMTimeZero)
    player.play()
  }

  private var isDiscoTime: Bool = false {
    didSet {
      video.isHidden = !isDiscoTime

      if isDiscoTime {
        video.play()
        run(spinAction)
      } else {
        video.pause()
        removeAllActions()
      }

      SKTAudio.sharedInstance().playBackgroundMusic(
        isDiscoTime ? "disco-sound.m4a" : "backgroundMusic.mp3")

      if isDiscoTime {
        video.run(SKAction.wait(forDuration: 5.0), completion: {
          self.isDiscoTime = false
        })
      }

      DiscoBallNode.isDiscoTime = isDiscoTime
    }
  }

  override func touchesEnded(_ touches: Set&lt;UITouch&gt;, with event: UIEvent?) {
    super.touchesEnded(touches, with: event)
    interact()
  }

  private let spinAction = SKAction.repeatForever(
    SKAction.animate(with: [
      SKTexture(imageNamed: "discoball1"),
      SKTexture(imageNamed: "discoball2"),
      SKTexture(imageNamed: "discoball3")
      ], timePerFrame: 0.2))

  static private(set) var isDiscoTime = false


}
</code></pre>
</div>
<ul>
  <li>step14 æç¤ºèŠ‚ç‚¹çš„è®¾ç½®</li>
</ul>

<div class="highlighter-rouge"><pre class="highlight"><code>class HintNode: SKSpriteNode, EventListenerNode {

  func didMoveToScene() {
    color = SKColor.clear

    let shape = SKShapeNode(path: arrowPath)
    shape.strokeColor = SKColor.gray
    shape.lineWidth = 4
    shape.fillColor = SKColor.white
    addChild(shape)

    shape.fillTexture = SKTexture(imageNamed: "wood_tinted")
    shape.alpha = 0.8
    shape.fillColor = SKColor.green
    
    let move = SKAction.moveBy(x: -40, y: 0, duration: 1.0)
    let bounce = SKAction.sequence([
      move, move.reversed()
      ])
    let bounceAction = SKAction.repeat(bounce, count: 3)
    shape.run(bounceAction, completion: {
      self.removeFromParent()
    })
  }

  var arrowPath: CGPath = {
    let bezierPath = UIBezierPath() //ç»˜åˆ¶è´å¡å°”æ›²çº¿
    bezierPath.move(to: CGPoint(x: 0.5, y: 65.69))
    bezierPath.addLine(to: CGPoint(x: 74.99, y: 1.5))
    bezierPath.addLine(to: CGPoint(x: 74.99, y: 38.66))
    bezierPath.addLine(to: CGPoint(x: 257.5, y: 38.66))
    bezierPath.addLine(to: CGPoint(x: 257.5, y: 92.72))
    bezierPath.addLine(to: CGPoint(x: 74.99, y: 92.72))
    bezierPath.addLine(to: CGPoint(x: 74.99, y: 126.5))
    bezierPath.addLine(to: CGPoint(x: 0.5, y: 65.69))
    bezierPath.close()
    return bezierPath.cgPath
  }()

}
</code></pre>
</div>

<ul>
  <li>step15 è¿›å…¥åœºæ™¯çš„åˆå§‹åŒ–è®¾ç½®</li>
</ul>

<div class="highlighter-rouge"><pre class="highlight"><code>  override func didMove(to view: SKView) {
    // Calculate playable margin
    let maxAspectRatio: CGFloat = 16.0/9.0
    let maxAspectRatioHeight = size.width / maxAspectRatio
    let playableMargin: CGFloat = (size.height - maxAspectRatioHeight)/2
    let playableRect = CGRect(x: 0, y: playableMargin,
                              width: size.width, height: size.height-playableMargin*2)
    physicsBody = SKPhysicsBody(edgeLoopFrom: playableRect) //å±å¹•è¾¹ç¼˜ç‰©ç†ä½“
    physicsWorld.contactDelegate = self //è®¾ç½®ç‰©ç†ä¸–ç•Œä»£ç†
    physicsBody!.categoryBitMask = PhysicsCategory.Edge //è®¾ç½®ç‰©ç†ä½“æ ‡è¯†

    enumerateChildNodes(withName: "//*", using: { node, _ in //éå†å­èŠ‚ç‚¹, è°ƒç”¨æ–¹æ³•
      if let eventListenerNode = node as? EventListenerNode {
        eventListenerNode.didMoveToScene()
      }
    })

    bedNode = childNode(withName: "bed") as! BedNode
    catNode = childNode(withName: "//cat_body") as! CatNode //èŠ‚ç‚¹nameæ˜¯æœ‰å±‚çº§çš„

    SKTAudio.sharedInstance().playBackgroundMusic("backgroundMusic.mp3")

//    let rotationConstraint = SKConstraint.zRotation(
//      SKRange(lowerLimit: -Ï€/4, upperLimit: Ï€/4))
//    catNode.parent!.constraints = [rotationConstraint]

    hookBaseNode = childNode(withName: "hookBase") as? HookBaseNode

  }
</code></pre>
</div>
<ul>
  <li>step16 åŠ è½½å®Œæˆç‰©ç†ä¸–ç•Œæ—¶è°ƒç”¨, ç”Ÿå‘½å‘¨æœŸæ–¹æ³•</li>
</ul>

<div class="highlighter-rouge"><pre class="highlight"><code>  override func didSimulatePhysics() {
    if playable &amp;&amp; hookBaseNode?.isHooked != true {
      if fabs(catNode.parent!.zRotation) &gt;
        CGFloat(25).degreesToRadians() {
        lose() }
    }
  }
</code></pre>
</div>
<ul>
  <li>step17 å½“ç‰©ç†ä½“è¿›è¡Œæ¥è§¦çš„æ—¶å€™è°ƒç”¨ ç‰©ç†ä¸–ç•Œä»£ç†æ–¹æ³•</li>
</ul>

<div class="highlighter-rouge"><pre class="highlight"><code>
  func didBegin(_ contact: SKPhysicsContact) {
    let collision = contact.bodyA.categoryBitMask | contact.bodyB.categoryBitMask // ç¢°æ’æ ‡è¯†

    if collision == PhysicsCategory.Label | PhysicsCategory.Edge { // æ ‡ç­¾ç‰©ç†ä½“ä¸è¾¹ç•Œç¢°æ’

      let labelNode = contact.bodyA.categoryBitMask == PhysicsCategory.Label ?
        contact.bodyA.node :
        contact.bodyB.node

      if let message = labelNode as? MessageNode {
        message.didBounce()
      }
    }

    if !playable {
      return
    }
    
    if collision == PhysicsCategory.Cat | PhysicsCategory.Bed { //çŒ«ç‰©ç†ä½“ä¸åºŠç‰©ç†ä½“æ¥è§¦
      print("SUCCESS")
      win()
    } else if collision == PhysicsCategory.Cat | PhysicsCategory.Edge { //çŒ«ç‰©ç†ä½“ä¸è¾¹ç¼˜ç‰©ç†ä½“ç¢°æ’
      print("FAIL")
      lose()
    }

    if collision == PhysicsCategory.Cat | PhysicsCategory.Hook //çŒ«ç‰©ç†ä½“ä¸é’©å­ç‰©ç†ä½“æ¥è§¦
      &amp;&amp; hookBaseNode?.isHooked == false {
      hookBaseNode!.hookCat(catPhysicsBody:
        catNode.parent!.physicsBody!)
    }

    
  }
</code></pre>
</div>

<ul>
  <li>step18 å…¶ä»–ç›¸å…³çš„æ¸¸æˆé€»è¾‘</li>
</ul>

<div class="highlighter-rouge"><pre class="highlight"><code> func inGameMessage(text: String) { //æ˜¾ç¤ºæ¸¸æˆæ ‡ç­¾
    let message = MessageNode(message: text)
    message.position = CGPoint(x: frame.midX, y: frame.midY)
    addChild(message)
  }

  func newGame() { //è¿›å…¥æ–°åœºæ™¯
    view!.presentScene(GameScene.level(levelNum: currentLevel))
  }

  func lose() { //é—¯å…³å¤±è´¥
    if currentLevel &gt; 1 {
      currentLevel -= 1
    }
    
    playable = false
    //1
    SKTAudio.sharedInstance().pauseBackgroundMusic()
    SKTAudio.sharedInstance().playSoundEffect("lose.mp3")
    //2
    inGameMessage(text: "Try again...")
    //3
    perform(#selector(newGame), with: nil, afterDelay: 5)

    catNode.wakeUp()
  }

  func win() { //é—¯å…³æˆåŠŸ
    if currentLevel &lt; 6 {
      currentLevel += 1
    }

    playable = false
    SKTAudio.sharedInstance().pauseBackgroundMusic()
    SKTAudio.sharedInstance().playSoundEffect("win.mp3")
    inGameMessage(text: "Nice job!")
    perform(#selector(GameScene.newGame), with: nil, afterDelay: 3)

    catNode.curlAt(scenePoint: bedNode.position)
  }

</code></pre>
</div>
<p>Notice: ä¸€äº›å¯è§†åŒ–åœºæ™¯.sksæ–‡ä»¶ä»…æ˜¯æ·»åŠ ä¸€äº›ç²¾çµèŠ‚ç‚¹çš„è®¾ç½®å’ŒActionç­‰, å¯ä»¥ç”¨ä»£ç å®ç°</p>

<h5 id="æ¼”ç¤ºæ•ˆæœ">æ¼”ç¤ºæ•ˆæœ:</h5>
<p><img src="http://upload-images.jianshu.io/upload_images/1229762-dc6bcc53249d7394.gif?imageMogr2/auto-orient/strip" alt="" /></p>

<h5 id="about">About:</h5>

<p><img src="http://upload-images.jianshu.io/upload_images/1229762-3f8925783027b3fa.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="ç‚¹å‡»ä¸‹æ–¹é“¾æ¥è·³è½¬!!" /></p>

<p><a href="https://github.com/coderZsq/coderZsq.target.swift">ğŸŒŸ æºç  è¯·ç‚¹è¿™é‡ŒğŸŒŸÂ Â»&gt; å–œæ¬¢çš„æœ‹å‹è¯·ç‚¹å–œæ¬¢Â Â»&gt; ä¸‹è½½æºç çš„åŒå­¦è¯·é€ä¸‹å°æ˜Ÿæ˜ŸÂ Â»&gt; æœ‰é—²é’±çš„å£•ä»¬å¯ä»¥è¿›è¡Œæ‰“èµÂ Â»&gt; å°å¼Ÿä¼šå°½å¿«æ¨å‡ºæ›´å¥½çš„æ–‡ç« å’Œå¤§å®¶åˆ†äº«Â Â»&gt; ä½ çš„æ¿€åŠ±å°±æ˜¯æˆ‘çš„åŠ¨åŠ›!! </a></p>

  </section>
</article>

<section class="read-more">
   
   
   <div class="read-more-item">
       <span class="read-more-item-dim">æœ€è¿‘çš„æ–‡ç« </span>
       <h2 class="post-list__post-title post-title"><a href="/2017/05/SpriteKit-%E7%93%A6%E7%89%87%E5%9C%B0%E5%9B%BE%E4%BB%80%E4%B9%88%E7%9A%84%E8%BF%98%E6%8C%BA%E5%A5%BD%E7%8E%A9%E5%84%BF/" title="link to SpriteKit ç“¦ç‰‡åœ°å›¾ä»€ä¹ˆçš„è¿˜æŒºå¥½ç©å„¿">SpriteKit ç“¦ç‰‡åœ°å›¾ä»€ä¹ˆçš„è¿˜æŒºå¥½ç©å„¿</a></h2>
       <p class="excerpt">  è¯´å®è¯è¿™ä¸ª2Dæ¸¸æˆå®æˆ˜çš„å…¥é—¨çœ‹çš„æˆ‘è„‘æµ†å­éƒ½æ²¸è…¾äº†, å¥½å¤šæ–°çš„æ¦‚å¿µæ¶Œå…¥, æ²¡åšè¿‡æ¸¸æˆå¼€å‘çš„æˆ‘è¡¨ç¤ºçœŸçš„éš¾ä»¥æ¥å—, å¸æ”¶æ•ˆç‡ä¸ä¹‹å‰ç›¸æ¯”ä¹Ÿä¸‹é™å¥½å¤š, ä¸è¿‡è¶Šå¾€åå­¦, å°±èƒ½å¤ŸåŠ æ·±å¯¹ä¹‹å‰çŸ¥è¯†çš„æŒæ¡, è¿™å¯èƒ½ä¹Ÿæ˜¯çœ‹ä¹¦çš„å¥½å¤„å§, ä»Šå¤©æˆ‘ä¹ŸæŠŠå¯¹ç“¦ç‰‡åœ°å›¾çš„ä¸€äº›å­¦ä¹ ç»éªŒè®°å½•ä¸‹æ¥ä¾›å¤§å®¶æ¢è®¨.ä»£ç è§:githubè¯´å®è¯, æˆ‘å¾ˆæ¨èRayå®¶çš„èµ„æº, ç”±æµ…å…¥æ·±æ‰‹æŠŠæ‰‹çš„æ•™å­¦, å†…å®¹å‰åå‘¼åº”, çœ‹å‡ æœ¬ä¹¦å°±èƒ½æ¶µç›–å›½å†…4ä¸ªæœˆåŸ¹è®­ç­çš„è¯¾ç¨‹ä½“ç³». éµå¾ªæœ¬ç³»åˆ—ä¸€è´¯çš„é£æ ¼, æˆ‘ä»¬è¿˜æ˜¯ä»åŸºç¡€çš„APIå¼€å§‹çœ‹èµ·, å¯¹APIæŒæ¡ç†Ÿç»ƒçš„è¯,...&hellip;</p>
       <div class="post-list__meta"><time datetime="2017-05-24 11:49:00 +0800" class="post-list__meta--date date">2017-05-24</time> &#8226; <span class="post-list__meta--tags tags">ç§»åŠ¨å¼€å‘</span><a class="btn-border-small" href=/2017/05/SpriteKit-%E7%93%A6%E7%89%87%E5%9C%B0%E5%9B%BE%E4%BB%80%E4%B9%88%E7%9A%84%E8%BF%98%E6%8C%BA%E5%A5%BD%E7%8E%A9%E5%84%BF/>ç»§ç»­é˜…è¯»</a></div>
   </div>
   
   
   
   
   <div class="read-more-item">
       <span class="read-more-item-dim">æ›´æ—©çš„æ–‡ç« </span>
       <h2 class="post-list__post-title post-title"><a href="/2017/05/iOS-%E6%89%A7%E8%A1%8C.py%E8%84%9A%E6%9C%AC%E7%94%9F%E6%88%90UI%E5%B1%82%E7%BB%93%E6%9E%84/" title="link to iOS æ‰§è¡Œ.pyè„šæœ¬ç”ŸæˆUIå±‚ç»“æ„">iOS æ‰§è¡Œ.pyè„šæœ¬ç”ŸæˆUIå±‚ç»“æ„</a></h2>
       <p class="excerpt">  ä¸Šç¯‡æˆ‘ä»¬å®ç°äº†æ¶æ„ä»£ç ç”Ÿæˆå™¨, é¡¿æ—¶è§‰å¾—ä»£ç ç”Ÿæˆå™¨è¿™ä¸ªä¸œè¥¿åªè¦æŒæ¡äº†å†™ä»£ç çœŸçš„å°±æ˜¯é…ç½®çš„é—®é¢˜äº†, ä»Šå¤©æˆ‘ä»¬å°±æ¥å®ç°æˆ‘ä¸€ç›´ä»¥æ¥å°±æƒ³åšçš„åŠŸèƒ½ â€“ UIç•Œé¢é€‚é…ä»£ç ç”Ÿæˆå™¨, å’Œä¹‹å‰ä¸€æ ·æˆ‘ä»¬é€šè¿‡JSONé…ç½®å’ŒPythonæ¥è¿›è¡Œå®ç°, æ²¡çœ‹è¿‡ä¸Šä¸€ç¯‡çš„ç›´æ¥çœ‹è¿™ç¯‡å³å¯, ä¸»è¦æ˜¯æ€æƒ³.å‚è€ƒé“¾æ¥:  iOS æ‰§è¡Œ.pyè„šæœ¬ç”Ÿæˆè§£è€¦æ¶æ„ä¸Šç¯‡æœ‰ä¸€ä¸ªå†…å­˜æ³„éœ²çš„é—®é¢˜, éœ€è¦å°†På±‚çš„æ¨¡æ¿çš„.hå±æ€§æ”¹ä¸ºweakå³å¯, é€‚é…UIç•Œé¢ä»£ç ç”Ÿæˆå™¨çš„æ¨¡æ¿æ˜¯æˆ‘ä¸€ç›´ä»¥æ¥çš„çš„OCç¼–ç ä¹ æƒ¯,  ä»£ç é£æ ¼æ— éœ€å¼ºæ±‚, ç›´æ¥ä¿®æ”¹æ¨¡æ¿å³å¯...&hellip;</p>
       <div class="post-list__meta"><time datetime="2017-05-12 14:42:00 +0800" class="post-list__meta--date date">2017-05-12</time> &#8226; <span class="post-list__meta--tags tags">ç§»åŠ¨å¼€å‘</span><a class="btn-border-small" href=/2017/05/iOS-%E6%89%A7%E8%A1%8C.py%E8%84%9A%E6%9C%AC%E7%94%9F%E6%88%90UI%E5%B1%82%E7%BB%93%E6%9E%84/>ç»§ç»­é˜…è¯»</a></div>
   </div>
   
</section>

<section class="post-comments">
  
  
  
  
</section>


            <section class="footer">
    <footer>
    	<span class="footer__copyright">æœ¬ç«™ç‚¹é‡‡ç”¨<a href="http://creativecommons.org/licenses/by-nc-sa/4.0/">çŸ¥è¯†å…±äº« ç½²å-éå•†ä¸šæ€§ä½¿ç”¨-ç›¸åŒæ–¹å¼å…±äº« 4.0 å›½é™… è®¸å¯åè®®</a></span>
        <span class="footer__copyright">ç”± <a href="https://jekyllrb.com">Jekyll</a> äº 2017-12-17 ç”Ÿæˆï¼Œæ„Ÿè°¢ <a href="https://www.digitalocean.com/?refcode=30ed2d146762">Digital Ocean</a> ä¸ºæœ¬ç«™æä¾›ç¨³å®šçš„ VPS æœåŠ¡</span>
        <span class="footer__copyright">æœ¬ç«™ç”± <a href="https://github.com/coderZsq">@Castie!</a> åˆ›å»ºï¼Œé‡‡ç”¨ <a href="https://github.com/onevcat/vno-jekyll">Vno - Jekyll</a> ä½œä¸ºä¸»é¢˜ï¼Œæ‚¨å¯ä»¥åœ¨ GitHub æ‰¾åˆ°<a href="https://github.com/onevcat/OneV-s-Den">æœ¬ç«™æºç </a> - &copy; 2017</span>
    </footer>
</section>

        </div>
    </div>
    
    <script type="text/javascript" src="//code.jquery.com/jquery-1.11.3.min.js"></script>

<script type="text/javascript" src="/js/main.js"></script>



    
  </body>

</html>
