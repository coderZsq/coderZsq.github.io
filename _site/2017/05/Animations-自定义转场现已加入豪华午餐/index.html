<!DOCTYPE html>
<html>

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  <title>Castie! Notes</title>
  <meta name="description"
    content="  ç»è¿‡äº†ä¸Šå‘¨çš„åŸºæœ¬åŠ¨ç”»å’Œæ ¸å¿ƒåŠ¨ç”»çš„ç†è§£, æˆ‘ä»¬ä»Šå¤©æ¥è®²è®²è‡ªå®šä¹‰è½¬åœºåŠ¨ç”», è‡ªå®šä¹‰è½¬åœºåŠ¨ç”»æ˜¯iOSä¸­æ¯”è¾ƒé«˜é˜¶çš„åŠ¨ç”»å½¢å¼äº†, ç®€å•æ¥è¯´å°±æ˜¯åœ¨åˆ‡æ¢æ§åˆ¶å™¨æ—¶å‘ç”Ÿçš„åŠ¨ç”»å½¢å¼, å¯ä»¥åœ¨Push/Pop ,Modal(present/dismiss)ä»¥åŠtabbaråˆ‡æ¢æ—¶è¿›è¡ŒåŠ¨ç”». ä»£ç è§:github">
  <meta name="author" content="Wei Wang">

  <meta name="twitter:card" content="summary">
  <meta name="twitter:title"
    content="Animations è‡ªå®šä¹‰è½¬åœºç°å·²åŠ å…¥è±ªååˆé¤">
  <meta name="twitter:description"
    content="  ç»è¿‡äº†ä¸Šå‘¨çš„åŸºæœ¬åŠ¨ç”»å’Œæ ¸å¿ƒåŠ¨ç”»çš„ç†è§£, æˆ‘ä»¬ä»Šå¤©æ¥è®²è®²è‡ªå®šä¹‰è½¬åœºåŠ¨ç”», è‡ªå®šä¹‰è½¬åœºåŠ¨ç”»æ˜¯iOSä¸­æ¯”è¾ƒé«˜é˜¶çš„åŠ¨ç”»å½¢å¼äº†, ç®€å•æ¥è¯´å°±æ˜¯åœ¨åˆ‡æ¢æ§åˆ¶å™¨æ—¶å‘ç”Ÿçš„åŠ¨ç”»å½¢å¼, å¯ä»¥åœ¨Push/Pop ,Modal(present/dismiss)ä»¥åŠtabbaråˆ‡æ¢æ—¶è¿›è¡ŒåŠ¨ç”». ä»£ç è§:github">

  <meta property="og:type" content="article">
  <meta property="og:title"
    content="Animations è‡ªå®šä¹‰è½¬åœºç°å·²åŠ å…¥è±ªååˆé¤">
  <meta property="og:description"
    content="  ç»è¿‡äº†ä¸Šå‘¨çš„åŸºæœ¬åŠ¨ç”»å’Œæ ¸å¿ƒåŠ¨ç”»çš„ç†è§£, æˆ‘ä»¬ä»Šå¤©æ¥è®²è®²è‡ªå®šä¹‰è½¬åœºåŠ¨ç”», è‡ªå®šä¹‰è½¬åœºåŠ¨ç”»æ˜¯iOSä¸­æ¯”è¾ƒé«˜é˜¶çš„åŠ¨ç”»å½¢å¼äº†, ç®€å•æ¥è¯´å°±æ˜¯åœ¨åˆ‡æ¢æ§åˆ¶å™¨æ—¶å‘ç”Ÿçš„åŠ¨ç”»å½¢å¼, å¯ä»¥åœ¨Push/Pop ,Modal(present/dismiss)ä»¥åŠtabbaråˆ‡æ¢æ—¶è¿›è¡ŒåŠ¨ç”». ä»£ç è§:github">

  <link rel="stylesheet" href="/css/main.css">
  <link href="//netdna.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet">

  <link rel="canonical" href="http://localhost:4000/2017/05/Animations-%E8%87%AA%E5%AE%9A%E4%B9%89%E8%BD%AC%E5%9C%BA%E7%8E%B0%E5%B7%B2%E5%8A%A0%E5%85%A5%E8%B1%AA%E5%8D%8E%E5%8D%88%E9%A4%90/">
  <link rel="alternate" type="application/rss+xml" title="Castie!"
    href="http://localhost:4000/feed.xml">

  <meta name="google-site-verification" content="1-1ZlHoRvM0T2FqPbW2S-qLgYXN6rsn52kErlMPd_gw" />
</head>

  <body>

    <span class="mobile btn-mobile-menu">
        <i class="fa fa-list btn-mobile-menu__icon"></i>
        <i class="fa fa-angle-up btn-mobile-close__icon hidden"></i>
    </span>
    
    <header class="panel-cover panel-cover--collapsed" style="background-image: url('/assets/images/background-cover.jpg')">
  <div class="panel-main">

    <div class="panel-main__inner panel-inverted">
    <div class="panel-main__content">

        <a href="/#blog" title="å‰å¾€ Castie! çš„ä¸»é¡µ" class="blog-button"><img src="/assets/images/avatar.jpg" width="80" alt="Castie! logo" class="panel-cover__logo logo" /></a>
        <h1 class="panel-cover__title panel-title"><a href="/#blog" title="link to homepage for Castie!" class="blog-button">Castie!</a></h1>
        
        <span class="panel-cover__subtitle panel-subtitle">æ­£æ€åˆ†å¸ƒ, ä¼˜åŠ£ä¼´ç”Ÿ</span>
        
        <hr class="panel-cover__divider" />
        <p class="panel-cover__description">åŒ—å†¥æœ‰é±¼ï¼Œå…¶åä¸ºé²²ï¼ˆkÅ«nï¼‰ã€‚é²²ä¹‹å¤§ï¼Œä¸çŸ¥å…¶å‡ åƒé‡Œä¹Ÿï¼›åŒ–è€Œä¸ºé¸Ÿï¼Œå…¶åä¸ºé¹ã€‚é¹ä¹‹èƒŒï¼Œä¸çŸ¥å…¶å‡ åƒé‡Œä¹Ÿï¼›æ€’è€Œé£ï¼Œå…¶ç¿¼è‹¥å‚å¤©ä¹‹äº‘ã€‚æ˜¯é¸Ÿä¹Ÿï¼Œæµ·è¿åˆ™å°†å¾™äºå—å†¥ã€‚å—å†¥è€…ï¼Œå¤©æ± ä¹Ÿã€‚</p>
        <hr class="panel-cover__divider panel-cover__divider--secondary" />
        
        
        <p class="panel-cover__description">åŒ—æµ·è‹¥æ›°ï¼šâ€œäº•é¼ƒä¸å¯ä»¥è¯­äºæµ·è€…ï¼Œæ‹˜äºè™šä¹Ÿï¼›å¤è™«ä¸å¯ä»¥è¯­äºå†°è€…ï¼Œç¬ƒäºæ—¶ä¹Ÿï¼›æ›²å£«ä¸å¯ä»¥è¯­äºé“è€…ï¼ŒæŸäºæ•™ä¹Ÿã€‚ä»Šå°”å‡ºäºå´–æ¶˜ï¼Œè§‚äºå¤§æµ·ï¼Œä¹ƒçŸ¥å°”ä¸‘ï¼Œå°”å°†å¯ä¸è¯­å¤§ç†çŸ£ã€‚</p>
        
        
        <div class="navigation-wrapper">
          <div>
            <nav class="cover-navigation cover-navigation--primary">
              <ul class="navigation">
                <li class="navigation__item"><a href="/#blog" title="è®¿é—®åšå®¢" class="blog-button">åšå®¢</a></li>
                
                  <li class="navigation__item"><a href="https://coderzsq.github.io/coderZsq.practice.web/" target="_blank" title="æˆ‘çš„ç®€å†">ç®€å†</a></li>
                
              </ul>
            </nav>
          </div>
          
          <div><nav class="cover-navigation navigation--social">
  <ul class="navigation">

    
    <!-- juejin-->
    <li class="navigation__item">
      <a href="https://juejin.im/user/57e735dfa22b9d00614eecb8/posts" title="@coderZsq çš„ç¨€åœŸæ˜é‡‘" target="_blank">
        <i class='social fa fa-book'></i>
        <span class="label">juejin</span>
      </a>
    </li>
    

  

  
  <!-- Github -->
  <li class="navigation__item">
    <a href="https://github.com/coderZsq" title="@coderZsq çš„ Github" target="_blank">
      <i class='social fa fa-github'></i>
      <span class="label">Github</span>
    </a>
  </li>
  

  

  

  <!-- RSS -->
  <li class="navigation__item">
    <a href="/feed.xml" rel="author" title="RSS" target="_blank">
      <i class='social fa fa-rss'></i>
      <span class="label">RSS</span>
    </a>
  </li>

  
  <!-- Email -->
  <li class="navigation__item">
    <a href="mailto:a13701777868@gmail.com" title="Contact me">
      <i class='social fa fa-envelope'></i>
      <span class="label">Email</span>
    </a>
  </li>
  

  </ul>
</nav>
</div>
        </div>
      </div>
    </div>
    
    
    <div class="panel-cover--overlay cover-disabled"></div>
    
  </div>
</header>


    <div class="content-wrapper">
        <div class="content-wrapper__inner">
            <article class="post-container post-container--single" itemscope itemtype="http://schema.org/BlogPosting">
  <header class="post-header">
    <div class="post-meta">
      <time datetime="2017-05-02 11:23:00 +0800" itemprop="datePublished" class="post-meta__date date">2017-05-02</time> &#8226; <span class="post-meta__tags tags">ç§»åŠ¨å¼€å‘</span>
    </div>
    <h1 class="post-title">Animations è‡ªå®šä¹‰è½¬åœºç°å·²åŠ å…¥è±ªååˆé¤</h1>
  </header>

  <section class="post">
    <blockquote>
  <p>ç»è¿‡äº†ä¸Šå‘¨çš„åŸºæœ¬åŠ¨ç”»å’Œæ ¸å¿ƒåŠ¨ç”»çš„ç†è§£, æˆ‘ä»¬ä»Šå¤©æ¥è®²è®²è‡ªå®šä¹‰è½¬åœºåŠ¨ç”», è‡ªå®šä¹‰è½¬åœºåŠ¨ç”»æ˜¯iOSä¸­æ¯”è¾ƒé«˜é˜¶çš„åŠ¨ç”»å½¢å¼äº†, ç®€å•æ¥è¯´å°±æ˜¯åœ¨åˆ‡æ¢æ§åˆ¶å™¨æ—¶å‘ç”Ÿçš„åŠ¨ç”»å½¢å¼, å¯ä»¥åœ¨Push/Pop ,Modal(present/dismiss)ä»¥åŠtabbaråˆ‡æ¢æ—¶è¿›è¡ŒåŠ¨ç”». ä»£ç è§:<a href="https://github.com/coderZsq/coderZsq.target.swift">github</a></p>
</blockquote>

<p><img src="http://upload-images.jianshu.io/upload_images/1229762-8f8d322fd1b24ddb.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="" /></p>

<p>å¯¹äºModal(present/dismiss)ä»¥åŠtabbaråˆ‡æ¢çš„è‡ªå®šä¹‰åŠ¨ç”»å¯ä»¥çœ‹æˆ‘ä¹‹å‰çš„åšå®¢:
 <a href="http://www.jianshu.com/p/6106f5a08ec3">Modal  è¯·ç‚¹å‡» â€“&gt; iOS ç‹‚éœ¸é…·ç‚«æ‹½ä¹‹ButtonåŠ¨æ•ˆ</a>
<a href="http://www.jianshu.com/p/c1a0cd2a348f">Tabbar è¯·ç‚¹å‡» â€“&gt; iOS ä¼šè·³èˆçš„TabbarController</a></p>

<p>æœ¬æœŸæˆ‘ä»¬æ¥ç€é‡è¯´è¯´Push/Popé‡Œå¦‚ä½•è¿›è¡Œè‡ªå®šä¹‰è½¬åœºåŠ¨ç”», å’Œä¹‹å‰çš„æ ¸å¿ƒåŠ¨ç”»ä¸€æ ·, æˆ‘ä»¬è¿˜æ˜¯ä¸€å¦‚æ—¢å¾€çš„å…ˆè®²API, å†è¿›è¡Œå®æˆ˜çš„æ¼”ç»ƒ, å¯¹äºè‡ªå®šä¹‰è½¬åœºæˆ‘ä»¬è¦åˆ†ä¸‰æ­¥èµ°:  1) è®¾ç½®ä»£ç†, 2)éµå®ˆåè®®, 3)å®ç°ä»£ç†æ–¹æ³•.æˆ‘ä»¬å…ˆä»åè®®å¼€å§‹çœ‹èµ·:</p>

<p>å¯¼èˆªæ§åˆ¶å™¨ä»£ç†æ–¹æ³•:</p>
<div class="highlighter-rouge"><pre class="highlight"><code>public protocol UINavigationControllerDelegate : NSObjectProtocol

@available(iOS 7.0, *)
    optional public func navigationController(_ navigationController: UINavigationController, interactionControllerFor animationController: UIViewControllerAnimatedTransitioning) -&gt; UIViewControllerInteractiveTransitioning?

@available(iOS 7.0, *)
    optional public func navigationController(_ navigationController: UINavigationController, animationControllerFor operation: UINavigationControllerOperation, from fromVC: UIViewController, to toVC: UIViewController) -&gt; UIViewControllerAnimatedTransitioning?
</code></pre>
</div>
<ul>
  <li>interactionControllerFor ä¸ç”¨æˆ·äº¤äº’æ—¶è°ƒç”¨çš„ä»£ç†æ–¹æ³•</li>
  <li>animationControllerFor  è‡ªå®šä¹‰è½¬åœºåˆ‡æ¢æ—¶è°ƒç”¨çš„ä»£ç†æ–¹æ³•</li>
</ul>

<p>è‡ªå®šä¹‰è½¬åœºåè®®:</p>
<div class="highlighter-rouge"><pre class="highlight"><code>public protocol UIViewControllerAnimatedTransitioning : NSObjectProtocol
    public func transitionDuration(using transitionContext: UIViewControllerContextTransitioning?) -&gt; TimeInterval
    public func animateTransition(using transitionContext: UIViewControllerContextTransitioning)
</code></pre>
</div>
<ul>
  <li>transitionDuration è½¬åœºæ—¶é•¿</li>
  <li>animateTransition è½¬åœºåŠ¨ç”»å¦‚ä½•å®ç°</li>
</ul>

<p>è‡ªå®šä¹‰è½¬åœºäº¤äº’åè®®:</p>
<div class="highlighter-rouge"><pre class="highlight"><code>@available(iOS 7.0, *)
open class UIPercentDrivenInteractiveTransition : NSObject, UIViewControllerInteractiveTransitioning
    open func update(_ percentComplete: CGFloat)
    open func cancel()
    open func finish()
</code></pre>
</div>
<ul>
  <li>update æ›´æ–°è½¬åœº ç™¾åˆ†æ¯”</li>
  <li>cancel å–æ¶ˆè½¬åœº</li>
  <li>finish å®Œæˆè½¬åœº</li>
</ul>

<p>è‡ªå®šä¹‰è½¬åœºç±»å‹æšä¸¾:</p>
<div class="highlighter-rouge"><pre class="highlight"><code>public enum UINavigationControllerOperation : Int {
    case push
    case pop
}
</code></pre>
</div>
<ul>
  <li>push å‹æ ˆ</li>
  <li>pop å‡ºæ ˆ</li>
</ul>

<p>è‡ªå®šä¹‰è½¬åœºä¸Šä¸‹æ–‡:</p>
<div class="highlighter-rouge"><pre class="highlight"><code>public protocol UIViewControllerContextTransitioning : NSObjectProtocol
@available(iOS 2.0, *)
    public var containerView: UIView { get }
    public var transitionWasCancelled: Bool { get }
@available(iOS 2.0, *)
    public func viewController(forKey key: UITransitionContextViewControllerKey) -&gt; UIViewController?
@available(iOS 2.0, *)
    public func initialFrame(for vc: UIViewController) -&gt; CGRect
@available(iOS 2.0, *)
    public func finalFrame(for vc: UIViewController) -&gt; CGRect
</code></pre>
</div>
<ul>
  <li>containerView åŒ…è£…View, ç”¨æˆ·å¤„ç†è‡ªå®šä¹‰è½¬åœºäº¤äº’çš„View</li>
  <li>transitionWasCancelled å–æ¶ˆè½¬åœºçš„æ“ä½œ</li>
  <li>viewControllerforKey æ‹¿åˆ°èµ·å§‹æˆ–ç›®æ ‡æ§åˆ¶å™¨æ–¹æ³•</li>
  <li>initialFrame åˆå§‹Frame</li>
  <li>finalFrame æœ€ç»ˆFrame</li>
</ul>

<p>è®²å®ŒAPI, æˆ‘ä»¬å°±æ¥ä½¿ç”¨è¿™äº›APIè¿›è¡Œå®æˆ˜, å’Œä¹‹å‰ä¸€æ ·, æˆ‘ä»¬å°±é€šè¿‡Stroyboardæ­å»ºç•Œé¢:
<img src="http://upload-images.jianshu.io/upload_images/1229762-0ec1f9c441fc9f99.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="" /></p>

<p>è·³è¿‡@IBOutlet å…³è”è¿™æ­¥, æˆ‘ä»¬å…ˆæ¥åˆ›å»ºè‡ªå®šä¹‰è½¬åœºå¯¹è±¡:</p>
<div class="highlighter-rouge"><pre class="highlight"><code>class RevealAnimator: UIPercentDrivenInteractiveTransition, UIViewControllerAnimatedTransitioning, CAAnimationDelegate { //éµå¾ªåè®®

  let animationDuration = 2.0 //åŠ¨ç”»æ—¶é•¿
  var operation: UINavigationControllerOperation = .push //è½¬åœºç±»å‹
  weak var storedContext: UIViewControllerContextTransitioning? //ä¿å­˜è½¬åœºä¸Šä¸‹æ–‡
  var interactive = false //æ˜¯å¦å¯äº¤äº’

  func transitionDuration(using transitionContext: UIViewControllerContextTransitioning?) -&gt; TimeInterval {
    return animationDuration //è¿”å›åŠ¨ç”»æ—¶é•¿
  }

  func animateTransition(using transitionContext: UIViewControllerContextTransitioning) {
    storedContext = transitionContext //ä¿å­˜ä¸Šä¸‹æ–‡
    ... 
  }
}
</code></pre>
</div>
<p>è¿›è¡ŒåŠ¨ç”»çš„è‡ªå®šä¹‰:</p>
<div class="highlighter-rouge"><pre class="highlight"><code>  func animateTransition(using transitionContext: UIViewControllerContextTransitioning) {
    storedContext = transitionContext

    if operation == .push { //åˆ¤æ–­è½¬åœºç±»å‹ ä¸ºpush

      let fromVC = transitionContext.viewController(forKey: .from) as! MasterViewController //æ‹¿åˆ°åˆå§‹æ§åˆ¶å™¨
      let toVC = transitionContext.viewController(forKey: .to) as! DetailViewController //æ‹¿åˆ°ç›®æ ‡æ§åˆ¶å™¨

      transitionContext.containerView.addSubview(toVC.view) //å°†ç›®æ ‡æ§åˆ¶å™¨çš„Viewæ·»åŠ åˆ°ä¸Šä¸‹æ–‡çš„åŒ…è£…Viewä¸­
      toVC.view.frame = transitionContext.finalFrame(for: toVC) //è®¾ç½®ç›®æ ‡æ§åˆ¶å™¨Viewä¸ºfinalFrame

      let animation = CABasicAnimation(keyPath: "transform") //è¿›è¡Œæ ¸å¿ƒåŠ¨ç”»
      animation.fromValue = NSValue(caTransform3D: CATransform3DIdentity) 
      animation.toValue = NSValue(caTransform3D:
        CATransform3DConcat( //concatä¸RxSwiftä¸­ç›¸åŒä¸ºå‘åæ‹¼æ¥, æ­¤å¤„ä¸ºå åŠ 3Dä»¿å°„åŠ¨ç”»
          CATransform3DMakeTranslation(0.0, -10.0, 0.0),
          CATransform3DMakeScale(150.0, 150.0, 1.0)
        )
      )

      animation.duration = animationDuration 
      animation.delegate = self 
      animation.fillMode = kCAFillModeForwards 
      animation.isRemovedOnCompletion = false
      animation.timingFunction = CAMediaTimingFunction(name: kCAMediaTimingFunctionEaseIn)
      
      let maskLayer: CAShapeLayer = RWLogoLayer.logoLayer() //maskLayerä¸ºé®ç½©å±‚
      maskLayer.position = fromVC.logo.position 
      maskLayer.add(animation, forKey: nil)
      toVC.view.layer.mask = maskLayer //å°†é®ç½©å±‚Layeræ·»åŠ åˆ°æ˜¾ç¤ºå±‚Layerçš„Maskå±æ€§ä¸Š
      
      fromVC.logo.add(animation, forKey: nil)

      let fadeIn = CABasicAnimation(keyPath: "opacity")
      fadeIn.fromValue = 0.0
      fadeIn.toValue = 1.0
      fadeIn.duration = animationDuration
      toVC.view.layer.add(fadeIn, forKey: nil)
    } else {

      let fromView = transitionContext.view(forKey: .from)!
      let toView = transitionContext.view(forKey: .to)!

      transitionContext.containerView.insertSubview(toView, belowSubview: fromView)

      UIView.animate(withDuration: animationDuration, delay: 0.0, options: .curveEaseIn,
        animations: {
          fromView.transform = CGAffineTransform(scaleX: 0.01, y: 0.01)
        },
        completion: {_ in
          transitionContext.completeTransition(!transitionContext.transitionWasCancelled) //å®Œæˆè½¬åœº
        }
      )
    }
</code></pre>
</div>

<p>æ ¸å¿ƒåŠ¨ç”»ä»£ç†:</p>
<div class="highlighter-rouge"><pre class="highlight"><code>  func animationDidStop(_ anim: CAAnimation, finished flag: Bool) {
    if let context = storedContext {
      context.completeTransition(!context.transitionWasCancelled) //å®Œæˆè½¬åœº
      //reset logo
      let fromVC = context.viewController(forKey: .from) as! MasterViewController
      fromVC.logo.removeAllAnimations() //åˆ é™¤æ‰€æœ‰åŠ¨ç”»
      
      let toVC = context.viewController(forKey: .to) as! DetailViewController
      toVC.view.layer.mask = nil //åŠ¨ç”»åœæ­¢ æ¸…ç©ºé®ç½©å±‚
    }
    storedContext = nil
  }
</code></pre>
</div>

<p>panæ‰‹åŠ¿è½¬åœºäº¤äº’:</p>
<div class="highlighter-rouge"><pre class="highlight"><code>  func handlePan(recognizer: UIPanGestureRecognizer) {
    let translation = recognizer.translation(in: recognizer.view!.superview!) //æ‹¿åˆ°è½¬æ¢åæ ‡
    var progress: CGFloat = abs(translation.x / 200.0) //æ‹¿åˆ°xè½´è¿›åº¦
    progress = min(max(progress, 0.01), 0.99) //ç»™å®šè¿›åº¦è¾¹ç•Œ

    switch recognizer.state { //æ§åˆ¶æ‰‹åŠ¿çŠ¶æ€
    case .changed: //æ”¹å˜æ—¶
      update(progress) //æ›´æ–°è¿›åº¦
    case .cancelled, .ended: //å–æ¶ˆæˆ–ç»“æŸæ—¶
      let transitionLayer = storedContext!.containerView.layer //æ‹¿åˆ°åŒ…è£…Layerå±‚
      transitionLayer.beginTime = CACurrentMediaTime()
      if progress &lt; 0.5 { //æ§åˆ¶è¿›åº¦
        cancel() //å–æ¶ˆè½¬åœº
        transitionLayer.speed = -1.0 //è¿›è¡Œéšå¼åŠ¨ç”»
      } else {
        transitionLayer.speed = 1.0 //è¿›è¡Œéšå¼åŠ¨ç”»
        finish() //å®Œæˆè½¬åœº
      }
      interactive = false //äº¤äº’è®¾ç½®ä¸ºä¸å¯äº¤äº’
    default:
      break
    }
  }
</code></pre>
</div>
<p>å®Œæˆè‡ªå®šä¹‰è½¬åœºç±»å, æˆ‘ä»¬è¿›è¡Œä¸‰æ­¥èµ°:</p>
<div class="highlighter-rouge"><pre class="highlight"><code>1)  è®¾ç½®ä»£ç†:
class MasterViewController: UIViewController {
  
  let logo = RWLogoLayer.logoLayer() 
  let transition = RevealAnimator() //è‡ªå®šä¹‰è½¬åœºç±»

  override func viewDidLoad() {
    super.viewDidLoad()
    title = "Start"
    navigationController?.delegate = self //è®¾ç½®ä»£ç†
  }
}
</code></pre>
</div>
<div class="highlighter-rouge"><pre class="highlight"><code>2) éµå®ˆåè®®å¹¶å®ç°ä»£ç†æ–¹æ³•:
extension MasterViewController: UINavigationControllerDelegate {
  func navigationController(_ navigationController: UINavigationController, animationControllerFor operation: UINavigationControllerOperation, from fromVC: UIViewController, to toVC: UIViewController) -&gt; UIViewControllerAnimatedTransitioning? {
    transition.operation = operation
    return transition
  }

  func navigationController(_ navigationController: UINavigationController, interactionControllerFor animationController: UIViewControllerAnimatedTransitioning) -&gt; UIViewControllerInteractiveTransitioning? {
    if !transition.interactive { //å½“ä¸Šä¸‹æ–‡ä¸å¯äº¤äº’æ—¶è¿”å›ç©º
      return nil
    }
    return transition
  }
}
</code></pre>
</div>
<div class="highlighter-rouge"><pre class="highlight"><code>3) æ·»åŠ æ‰‹åŠ¿:
  override func viewDidAppear(_ animated: Bool) {
    super.viewDidAppear(animated)
    
    let pan = UIPanGestureRecognizer(target: self, action: #selector(didPan))
    view.addGestureRecognizer(pan)

    // add the logo to the view
    logo.position = CGPoint(x: view.layer.bounds.size.width/2,
      y: view.layer.bounds.size.height/2 - 30)
    logo.fillColor = UIColor.white.cgColor
    view.layer.addSublayer(logo)
  }

  func didPan(recognizer: UIPanGestureRecognizer) {
    switch recognizer.state {
    case .began:
      transition.interactive = true //è®¾ç½®è½¬åœºå¯äº¤äº’
      performSegue(withIdentifier: "details", sender: nil)
    default:
      transition.handlePan(recognizer: recognizer) //è°ƒç”¨è‡ªå®šä¹‰è½¬åœºç±»ä¸­çš„æ‰‹åŠ¿æ“ä½œæ›´æ–°è½¬åœº

    }
  }
</code></pre>
</div>
<p>æ¼”ç¤ºæ•ˆæœ:
<img src="http://upload-images.jianshu.io/upload_images/1229762-f2c856c0d61b0117.gif?imageMogr2/auto-orient/strip" alt="" />
About:</p>

<p>About:</p>

<p><img src="http://upload-images.jianshu.io/upload_images/1229762-3f8925783027b3fa.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="ç‚¹å‡»ä¸‹æ–¹é“¾æ¥è·³è½¬!!" /></p>

<p><a href="https://github.com/coderZsq/coderZsq.target.swift">ğŸŒŸ æºç  è¯·ç‚¹è¿™é‡ŒğŸŒŸÂ Â»&gt; å–œæ¬¢çš„æœ‹å‹è¯·ç‚¹å–œæ¬¢Â Â»&gt; ä¸‹è½½æºç çš„åŒå­¦è¯·é€ä¸‹å°æ˜Ÿæ˜ŸÂ Â»&gt; æœ‰é—²é’±çš„å£•ä»¬å¯ä»¥è¿›è¡Œæ‰“èµÂ Â»&gt; å°å¼Ÿä¼šå°½å¿«æ¨å‡ºæ›´å¥½çš„æ–‡ç« å’Œå¤§å®¶åˆ†äº«Â Â»&gt; ä½ çš„æ¿€åŠ±å°±æ˜¯æˆ‘çš„åŠ¨åŠ›!! </a></p>

  </section>
</article>

<section class="read-more">
   
   
   <div class="read-more-item">
       <span class="read-more-item-dim">æœ€è¿‘çš„æ–‡ç« </span>
       <h2 class="post-list__post-title post-title"><a href="/2017/05/Animations-%E5%BF%AB%E9%80%9F%E4%B8%8A%E6%89%8B-iOS10-%E5%B1%9E%E6%80%A7%E5%8A%A8%E7%94%BB/" title="link to Animations å¿«é€Ÿä¸Šæ‰‹ iOS10 å±æ€§åŠ¨ç”»">Animations å¿«é€Ÿä¸Šæ‰‹ iOS10 å±æ€§åŠ¨ç”»</a></h2>
       <p class="excerpt">  åŸºç¡€åŠ¨ç”», æ ¸å¿ƒåŠ¨ç”»åˆ°è‡ªå®šä¹‰è½¬åœºåŠ¨ç”»å…¶å®éƒ½ä¸æ˜¯ä»€ä¹ˆæ–°ä¸œè¥¿äº†, æ‰€ä»¥æˆ‘ä¹Ÿæ˜¯è‰è‰çœ‹ä¸€éå°±èƒ½å¤Ÿè¯»ä¸ªå¤§æ¦‚, ä½†ä»Šå¤©è¦è¯´çš„UIViewPropertyAnimator, æ˜¯iOS10æ–°çš„API, å…¶ä»–çš„å¥½å¤„æˆ‘è¿˜ä¸å¤ªæ¸…æ¥š, ä½†æŠ½è±¡åŠ¨ç”»é€»è¾‘å’Œç›‘æ§åŠ¨ç”»çš„è¿›ç¨‹ä¸ŠçœŸçš„æ˜¯æ–¹ä¾¿å¾ˆå¤š.ä»£ç è§:githubå¯¹äºå±æ€§åŠ¨ç”»æ¥è¯´, çœŸçš„æ˜¯ä¸ªæ–°çŸ¥è¯†, æƒ³å¿…ä¼šç”¨çš„è¿˜ä¸å¤š, æˆ‘ä¹Ÿæ˜¯è¿‘æœŸæ‰æœ‰æ¶‰åŠ, ç†è§£ä¸å‘¨è¿˜æœ›å¤§ä¼™æŒ‡ç‚¹ä¸€äºŒ, ä¹‹å‰æˆ‘ä»¬è¦åšä¸€äº›ç¨å¾®é«˜çº§çš„åŠ¨ç”»éƒ½ä¼šä½¿ç”¨æ ¸å¿ƒåŠ¨ç”»çš„æ–¹æ³•, ä½†æ˜¯æ ¸å¿ƒåŠ¨ç”»æœ‰ä¸€ä¸ªè‡´å‘½çš„å¼±ç‚¹, å°±æ˜¯å‡è±¡å’Œè¢«æ‰“...&hellip;</p>
       <div class="post-list__meta"><time datetime="2017-05-03 11:04:00 +0800" class="post-list__meta--date date">2017-05-03</time> &#8226; <span class="post-list__meta--tags tags">ç§»åŠ¨å¼€å‘</span><a class="btn-border-small" href=/2017/05/Animations-%E5%BF%AB%E9%80%9F%E4%B8%8A%E6%89%8B-iOS10-%E5%B1%9E%E6%80%A7%E5%8A%A8%E7%94%BB/>ç»§ç»­é˜…è¯»</a></div>
   </div>
   
   
   
   
   <div class="read-more-item">
       <span class="read-more-item-dim">æ›´æ—©çš„æ–‡ç« </span>
       <h2 class="post-list__post-title post-title"><a href="/2017/04/Animations-%E6%A0%B8%E5%BF%83%E5%8A%A8%E7%94%BB%E4%BB%80%E4%B9%88%E7%9A%84%E8%A6%81%E7%A0%94%E7%A9%B6%E9%80%8F!/" title="link to Animations æ ¸å¿ƒåŠ¨ç”»ä»€ä¹ˆçš„è¦ç ”ç©¶é€!">Animations æ ¸å¿ƒåŠ¨ç”»ä»€ä¹ˆçš„è¦ç ”ç©¶é€!</a></h2>
       <p class="excerpt">  çœ‹è¿‡æˆ‘å»å¹´æ–‡ç« çš„åŒå­¦ä»¬ä¸€å®šçŸ¥é“å¯¹äºåŠ¨ç”»æ–¹é¢è¿˜æ˜¯æœ‰ç‚¹å¿ƒå¾—ä½“ä¼šçš„, å¯¹äºæ ¸å¿ƒåŠ¨ç”»çš„å­¦ä¹ , ä¹‹å‰æˆ‘çœ‹çš„æ˜¯iOS Core Animationçš„ç¿»è¯‘ç‰ˆ, çœ‹å®Œæ„Ÿè§‰çœŸçš„å­¦åˆ°äº†ä¸å°‘ä¸œè¥¿, ä¸è¿‡è¿™æœ¬ä¹¦å·²ç»æœ‰ç‚¹æ—¶æ—¥äº†, æˆ‘ä»¬éœ€è¦ä¸æ—¶ä¿±è¿›å­¦ä¹ æœ€å‰æ²¿çš„æŠ€æœ¯.ä»£ç è§:githubå’Œä¹‹å‰çš„Viewçš„åŠ¨ç”»ä¸€æ ·, è¿™æ¬¡Layerçš„æ ¸å¿ƒåŠ¨ç”», æˆ‘ä»¬ä¹Ÿæ˜¯å…ˆç»†è®²API, å†è¿›è¡Œé¡¹ç›®å®æˆ˜, è¿™æ ·ä¼šæ¯”è¾ƒå®¹æ˜“ç†è§£, æ–°å…¥è¡Œçš„åŒå­¦ä¸ä¼šæœ›è€Œå´æ­¥.å…¶å®åˆšå­¦ä¹ æ ¸å¿ƒåŠ¨ç”»çš„æ—¶å€™è¿˜æœ‰æœ‰ç‚¹éš¾åº¦çš„, å…ˆæä¸¤ä¸ªæ³¨æ„ç‚¹: 1) ç›¸å¯¹äºviewçš„c...&hellip;</p>
       <div class="post-list__meta"><time datetime="2017-04-27 10:44:00 +0800" class="post-list__meta--date date">2017-04-27</time> &#8226; <span class="post-list__meta--tags tags">ç§»åŠ¨å¼€å‘</span><a class="btn-border-small" href=/2017/04/Animations-%E6%A0%B8%E5%BF%83%E5%8A%A8%E7%94%BB%E4%BB%80%E4%B9%88%E7%9A%84%E8%A6%81%E7%A0%94%E7%A9%B6%E9%80%8F!/>ç»§ç»­é˜…è¯»</a></div>
   </div>
   
</section>

<section class="post-comments">
  
  
  
  
</section>


            <section class="footer">
    <footer>
    	<span class="footer__copyright">æœ¬ç«™ç‚¹é‡‡ç”¨<a href="http://creativecommons.org/licenses/by-nc-sa/4.0/">çŸ¥è¯†å…±äº« ç½²å-éå•†ä¸šæ€§ä½¿ç”¨-ç›¸åŒæ–¹å¼å…±äº« 4.0 å›½é™… è®¸å¯åè®®</a></span>
        <span class="footer__copyright">ç”± <a href="https://jekyllrb.com">Jekyll</a> äº 2020-09-16 ç”Ÿæˆï¼Œæ„Ÿè°¢ <a href="https://www.digitalocean.com/?refcode=30ed2d146762">Digital Ocean</a> ä¸ºæœ¬ç«™æä¾›ç¨³å®šçš„ VPS æœåŠ¡</span>
        <span class="footer__copyright">æœ¬ç«™ç”± <a href="https://github.com/coderZsq">@Castie!</a> åˆ›å»ºï¼Œé‡‡ç”¨ <a href="https://github.com/onevcat/vno-jekyll">Vno - Jekyll</a> ä½œä¸ºä¸»é¢˜ï¼Œæ‚¨å¯ä»¥åœ¨ GitHub æ‰¾åˆ°<a href="https://github.com/onevcat/OneV-s-Den">æœ¬ç«™æºç </a> - &copy; 2020</span>
    </footer>
</section>

        </div>
    </div>
    
    <script type="text/javascript" src="//cdn.staticfile.org/jquery/1.10.2/jquery.min.js"></script>

<script type="text/javascript" src="/js/main.js"></script>


    
  </body>

</html>
