<!DOCTYPE html>
<html>

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  <title>Castie! Notes</title>
  <meta name="description" content="  刚才一篇我们提到了如何入门后端, 我也知道一篇文章是不可能完成后端的方方面面的, 期望达到的是知道如何进行学习, 有一条清晰的学习路径, 少绕弯路. 这篇我们就来进行简历的接口开发了.">
  <meta name="author" content="Wei Wang">

  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="Server 使用Spring来构建服务">
  <meta name="twitter:description" content="  刚才一篇我们提到了如何入门后端, 我也知道一篇文章是不可能完成后端的方方面面的, 期望达到的是知道如何进行学习, 有一条清晰的学习路径, 少绕弯路. 这篇我们就来进行简历的接口开发了.">
  
  <meta property="og:type" content="article">
  <meta property="og:title" content="Server 使用Spring来构建服务">
  <meta property="og:description" content="  刚才一篇我们提到了如何入门后端, 我也知道一篇文章是不可能完成后端的方方面面的, 期望达到的是知道如何进行学习, 有一条清晰的学习路径, 少绕弯路. 这篇我们就来进行简历的接口开发了.">
  
  <link rel="icon" type="image/ico" href="/assets/images/favicon.ico" />
  <link href="/assets/images/favicon.ico" rel="shortcut icon" type="image/ico">
  
  <link rel="stylesheet" href="/css/main.css">
  <link href="//netdna.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet">

  <link rel="canonical" href="http://localhost:4000/2017/11/Server-%E4%BD%BF%E7%94%A8Spring%E6%9D%A5%E6%9E%84%E5%BB%BA%E6%9C%8D%E5%8A%A1/">
  <link rel="alternate" type="application/rss+xml" title="Castie!" href="http://localhost:4000/feed.xml">
  
  <meta name="google-site-verification" content="1-1ZlHoRvM0T2FqPbW2S-qLgYXN6rsn52kErlMPd_gw" />
  
</head>


  <body>

    <span class="mobile btn-mobile-menu">
        <i class="fa fa-list btn-mobile-menu__icon"></i>
        <i class="fa fa-angle-up btn-mobile-close__icon hidden"></i>
    </span>
    
    <header class="panel-cover panel-cover--collapsed" style="background-image: url('/assets/images/background-cover.jpg')">
  <div class="panel-main">

    <div class="panel-main__inner panel-inverted">
    <div class="panel-main__content">

        <a href="/#blog" title="前往 Castie! 的主页" class="blog-button"><img src="/assets/images/avatar.jpg" width="80" alt="Castie! logo" class="panel-cover__logo logo" /></a>
        <h1 class="panel-cover__title panel-title"><a href="/#blog" title="link to homepage for Castie!" class="blog-button">Castie!</a></h1>
        
        <span class="panel-cover__subtitle panel-subtitle">正态分布, 优劣伴生</span>
        
        <hr class="panel-cover__divider" />
        <p class="panel-cover__description">北冥有鱼，其名为鲲（kūn）。鲲之大，不知其几千里也；化而为鸟，其名为鹏。鹏之背，不知其几千里也；怒而飞，其翼若垂天之云。是鸟也，海运则将徙于南冥。南冥者，天池也。</p>
        <hr class="panel-cover__divider panel-cover__divider--secondary" />
        
        
        <p class="panel-cover__description">北海若曰：“井鼃不可以语于海者，拘于虚也；夏虫不可以语于冰者，笃于时也；曲士不可以语于道者，束于教也。今尔出于崖涘，观于大海，乃知尔丑，尔将可与语大理矣。</p>
        
        
        <div class="navigation-wrapper">
          <div>
            <nav class="cover-navigation cover-navigation--primary">
              <ul class="navigation">
                <li class="navigation__item"><a href="/#blog" title="访问博客" class="blog-button">博客</a></li>
                
                  <li class="navigation__item"><a href="https://coderzsq.github.io/coderZsq.webpack.js/" target="_blank" title="我的简历">简历</a></li>
                
              </ul>
            </nav>
          </div>
          
          <div><nav class="cover-navigation navigation--social">
  <ul class="navigation">

    
    <!-- jianshu-->
    <li class="navigation__item">
      <a href="http://www.jianshu.com/u/9d7fad1a4693" title="@coderZsq 的简书" target="_blank">
        <i class='social fa fa-book'></i>
        <span class="label">jianshu</span>
      </a>
    </li>
    

    
    <!-- juejin-->
    <li class="navigation__item">
      <a href="https://juejin.im/user/57e735dfa22b9d00614eecb8" title="@coderZsq 的稀土掘金" target="_blank">
        <i class='social fa fa-align-center'></i>
        <span class="label">juejin</span>
      </a>
    </li>
    

  

  
  <!-- Github -->
  <li class="navigation__item">
    <a href="https://github.com/coderZsq" title="@coderZsq 的 Github" target="_blank">
      <i class='social fa fa-github'></i>
      <span class="label">Github</span>
    </a>
  </li>
  

  

  

  <!-- RSS -->
  <li class="navigation__item">
    <a href="/feed.xml" rel="author" title="RSS" target="_blank">
      <i class='social fa fa-rss'></i>
      <span class="label">RSS</span>
    </a>
  </li>

  
  <!-- Email -->
  <li class="navigation__item">
    <a href="mailto:a13701777868@gmail.com" title="Contact me">
      <i class='social fa fa-envelope'></i>
      <span class="label">Email</span>
    </a>
  </li>
  

  </ul>
</nav>
</div>
        </div>
      </div>
    </div>
    
    
    <div class="panel-cover--overlay cover-slate"></div>
    
  </div>
</header>


    <div class="content-wrapper">
        <div class="content-wrapper__inner">
            <article class="post-container post-container--single" itemscope itemtype="http://schema.org/BlogPosting">
  <header class="post-header">
    <div class="post-meta">
      <time datetime="2017-11-13 20:32:00 +0800" itemprop="datePublished" class="post-meta__date date">2017-11-13</time> &#8226; <span class="post-meta__tags tags">后端开发</span>
    </div>
    <h1 class="post-title">Server 使用Spring来构建服务</h1>
  </header>

  <section class="post">
    <blockquote>
  <p>刚才一篇我们提到了如何入门后端, 我也知道一篇文章是不可能完成后端的方方面面的, 期望达到的是知道如何进行学习, 有一条清晰的学习路径, 少绕弯路. 这篇我们就来进行简历的接口开发了.</p>
</blockquote>

<p><img src="http://upload-images.jianshu.io/upload_images/1229762-b906bd1959a9f779.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="" /></p>

<h6 id="参考链接">参考链接:</h6>

<ul>
  <li><a href="http://www.jianshu.com/p/ec78451ed312">Server 入门后端你要学什么</a></li>
</ul>

<p>以下内容在上述文章基础上进行, 请事先查阅.</p>

<h4 id="jdbc-代码生成">jdbc 代码生成</h4>

<p>首先我们要做的就是使用mybatis插件进行读取数据库数据并生成jdbc代码.</p>

<h5 id="generatorconfigxml">generatorConfig.xml</h5>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="cp">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span class="cp">&lt;!DOCTYPE generatorConfiguration
        PUBLIC "-//mybatis.org//DTD MyBatis Generator Configuration 1.0//EN"
        "http://mybatis.org/dtd/mybatis-generator-config_1_0.dtd"&gt;</span>

<span class="nt">&lt;generatorConfiguration&gt;</span>
    <span class="c">&lt;!--导入属性配置--&gt;</span>
    <span class="nt">&lt;properties</span> <span class="na">resource=</span><span class="s">"datasource.properties"</span><span class="nt">&gt;&lt;/properties&gt;</span>

    <span class="c">&lt;!--指定特定数据库的jdbc驱动jar包的位置--&gt;</span>
    <span class="nt">&lt;classPathEntry</span> <span class="na">location=</span><span class="s">"${db.driverLocation}"</span><span class="nt">/&gt;</span>

    <span class="nt">&lt;context</span> <span class="na">id=</span><span class="s">"default"</span> <span class="na">targetRuntime=</span><span class="s">"MyBatis3"</span><span class="nt">&gt;</span>

        <span class="c">&lt;!-- optional，旨在创建class时，对注释进行控制 --&gt;</span>
        <span class="nt">&lt;commentGenerator&gt;</span>
            <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"suppressDate"</span> <span class="na">value=</span><span class="s">"true"</span><span class="nt">/&gt;</span>
            <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"suppressAllComments"</span> <span class="na">value=</span><span class="s">"true"</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;/commentGenerator&gt;</span>

        <span class="c">&lt;!--jdbc的数据库连接 --&gt;</span>
        <span class="nt">&lt;jdbcConnection</span>
                <span class="na">driverClass=</span><span class="s">"${db.driverClassName}"</span>
                <span class="na">connectionURL=</span><span class="s">"${db.url}"</span>
                <span class="na">userId=</span><span class="s">"${db.username}"</span>
                <span class="na">password=</span><span class="s">"${db.password}"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;/jdbcConnection&gt;</span>


        <span class="c">&lt;!-- 非必需，类型处理器，在数据库类型和java类型之间的转换控制--&gt;</span>
        <span class="nt">&lt;javaTypeResolver&gt;</span>
            <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"forceBigDecimals"</span> <span class="na">value=</span><span class="s">"false"</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;/javaTypeResolver&gt;</span>


        <span class="c">&lt;!-- Model模型生成器,用来生成含有主键key的类，记录类 以及查询Example类
            targetPackage     指定生成的model生成所在的包名
            targetProject     指定在该项目下所在的路径
        --&gt;</span>
        <span class="c">&lt;!--&lt;javaModelGenerator targetPackage="com.mmall.pojo" targetProject=".\src\main\java"&gt;--&gt;</span>
        <span class="nt">&lt;javaModelGenerator</span> <span class="na">targetPackage=</span><span class="s">"com.resume.pojo"</span> <span class="na">targetProject=</span><span class="s">"./src/main/java"</span><span class="nt">&gt;</span>
            <span class="c">&lt;!-- 是否允许子包，即targetPackage.schemaName.tableName --&gt;</span>
            <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"enableSubPackages"</span> <span class="na">value=</span><span class="s">"false"</span><span class="nt">/&gt;</span>
            <span class="c">&lt;!-- 是否对model添加 构造函数 --&gt;</span>
            <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"constructorBased"</span> <span class="na">value=</span><span class="s">"true"</span><span class="nt">/&gt;</span>
            <span class="c">&lt;!-- 是否对类CHAR类型的列的数据进行trim操作 --&gt;</span>
            <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"trimStrings"</span> <span class="na">value=</span><span class="s">"true"</span><span class="nt">/&gt;</span>
            <span class="c">&lt;!-- 建立的Model对象是否 不可改变  即生成的Model对象不会有 setter方法，只有构造方法 --&gt;</span>
            <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"immutable"</span> <span class="na">value=</span><span class="s">"false"</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;/javaModelGenerator&gt;</span>

        <span class="c">&lt;!--mapper映射文件生成所在的目录 为每一个数据库的表生成对应的SqlMap文件 --&gt;</span>
        <span class="c">&lt;!--&lt;sqlMapGenerator targetPackage="mappers" targetProject=".\src\main\resources"&gt;--&gt;</span>
        <span class="nt">&lt;sqlMapGenerator</span> <span class="na">targetPackage=</span><span class="s">"mappers"</span> <span class="na">targetProject=</span><span class="s">"./src/main/resources"</span><span class="nt">&gt;</span>
            <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"enableSubPackages"</span> <span class="na">value=</span><span class="s">"false"</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;/sqlMapGenerator&gt;</span>

        <span class="c">&lt;!-- 客户端代码，生成易于使用的针对Model对象和XML配置文件 的代码
                type="ANNOTATEDMAPPER",生成Java Model 和基于注解的Mapper对象
                type="MIXEDMAPPER",生成基于注解的Java Model 和相应的Mapper对象
                type="XMLMAPPER",生成SQLMap XML文件和独立的Mapper接口
        --&gt;</span>

        <span class="c">&lt;!-- targetPackage：mapper接口dao生成的位置 --&gt;</span>
        <span class="c">&lt;!--&lt;javaClientGenerator type="XMLMAPPER" targetPackage="com.resume.dao" targetProject=".\src\main\java"&gt;--&gt;</span>
        <span class="nt">&lt;javaClientGenerator</span> <span class="na">type=</span><span class="s">"XMLMAPPER"</span> <span class="na">targetPackage=</span><span class="s">"com.resume.dao"</span> <span class="na">targetProject=</span><span class="s">"./src/main/java"</span><span class="nt">&gt;</span>
            <span class="c">&lt;!-- enableSubPackages:是否让schema作为包的后缀 --&gt;</span>
            <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"enableSubPackages"</span> <span class="na">value=</span><span class="s">"false"</span> <span class="nt">/&gt;</span>
        <span class="nt">&lt;/javaClientGenerator&gt;</span>

        <span class="c">&lt;!--&lt;table tableName="resume_profile" domainObjectName="Profile" enableCountByExample="false" enableUpdateByExample="false" enableDeleteByExample="false" enableSelectByExample="false" selectByExampleQueryId="false"&gt;&lt;/table&gt;--&gt;</span>
        <span class="c">&lt;!--&lt;table tableName="resume_profile_interest" domainObjectName="ProfileInterest" enableCountByExample="false" enableUpdateByExample="false" enableDeleteByExample="false" enableSelectByExample="false" selectByExampleQueryId="false"&gt;&lt;/table&gt;--&gt;</span>
        <span class="c">&lt;!--&lt;table tableName="resume_profile_education" domainObjectName="ProfileEducation" enableCountByExample="false" enableUpdateByExample="false" enableDeleteByExample="false" enableSelectByExample="false" selectByExampleQueryId="false"&gt;&lt;/table&gt;--&gt;</span>
        <span class="nt">&lt;table</span> <span class="na">tableName=</span><span class="s">"resume_profile_social"</span> <span class="na">domainObjectName=</span><span class="s">"ProfileSocial"</span> <span class="na">enableCountByExample=</span><span class="s">"false"</span> <span class="na">enableUpdateByExample=</span><span class="s">"false"</span> <span class="na">enableDeleteByExample=</span><span class="s">"false"</span> <span class="na">enableSelectByExample=</span><span class="s">"false"</span> <span class="na">selectByExampleQueryId=</span><span class="s">"false"</span><span class="nt">&gt;&lt;/table&gt;</span>

    <span class="nt">&lt;/context&gt;</span>
<span class="nt">&lt;/generatorConfiguration&gt;</span>
</code></pre>
</div>

<p>配置完成后执行插件进行生成:</p>

<p><img src="http://upload-images.jianshu.io/upload_images/1229762-385a6be2262902f1.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="" /></p>

<p>mybatis 就是类似封装了fmdb, 直接和数据库打交道. 通过插件我们生成了dao / pojo / mapper的文件.</p>

<h5 id="dao">dao</h5>

<div class="highlighter-rouge"><pre class="highlight"><code>package com.resume.dao;

import com.resume.pojo.ProfileSocial;

import java.util.List;

public interface ProfileSocialMapper {
    int deleteByPrimaryKey(Integer id);

    int insert(ProfileSocial record);

    int insertSelective(ProfileSocial record);

    ProfileSocial selectByPrimaryKey(Integer id);

    int updateByPrimaryKeySelective(ProfileSocial record);

    int updateByPrimaryKey(ProfileSocial record);

    List&lt;ProfileSocial&gt; selectAllSocial();

}
</code></pre>
</div>

<p>接口文件, 用于调用mapper的jdbc.</p>

<h5 id="mapper">mapper</h5>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="cp">&lt;?xml version="1.0" encoding="UTF-8" ?&gt;</span>
<span class="cp">&lt;!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" &gt;</span>
<span class="nt">&lt;mapper</span> <span class="na">namespace=</span><span class="s">"com.resume.dao.ProfileSocialMapper"</span> <span class="nt">&gt;</span>
  <span class="nt">&lt;resultMap</span> <span class="na">id=</span><span class="s">"BaseResultMap"</span> <span class="na">type=</span><span class="s">"com.resume.pojo.ProfileSocial"</span> <span class="nt">&gt;</span>
    <span class="nt">&lt;constructor</span> <span class="nt">&gt;</span>
      <span class="nt">&lt;idArg</span> <span class="na">column=</span><span class="s">"id"</span> <span class="na">jdbcType=</span><span class="s">"INTEGER"</span> <span class="na">javaType=</span><span class="s">"java.lang.Integer"</span> <span class="nt">/&gt;</span>
      <span class="nt">&lt;arg</span> <span class="na">column=</span><span class="s">"src"</span> <span class="na">jdbcType=</span><span class="s">"VARCHAR"</span> <span class="na">javaType=</span><span class="s">"java.lang.String"</span> <span class="nt">/&gt;</span>
      <span class="nt">&lt;arg</span> <span class="na">column=</span><span class="s">"href"</span> <span class="na">jdbcType=</span><span class="s">"VARCHAR"</span> <span class="na">javaType=</span><span class="s">"java.lang.String"</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;/constructor&gt;</span>
  <span class="nt">&lt;/resultMap&gt;</span>
  <span class="nt">&lt;sql</span> <span class="na">id=</span><span class="s">"Base_Column_List"</span> <span class="nt">&gt;</span>
    id, src, href
  <span class="nt">&lt;/sql&gt;</span>
  <span class="nt">&lt;select</span> <span class="na">id=</span><span class="s">"selectByPrimaryKey"</span> <span class="na">resultMap=</span><span class="s">"BaseResultMap"</span> <span class="na">parameterType=</span><span class="s">"java.lang.Integer"</span> <span class="nt">&gt;</span>
    select 
    <span class="nt">&lt;include</span> <span class="na">refid=</span><span class="s">"Base_Column_List"</span> <span class="nt">/&gt;</span>
    from resume_profile_social
    where id = #{id,jdbcType=INTEGER}
  <span class="nt">&lt;/select&gt;</span>
  <span class="nt">&lt;delete</span> <span class="na">id=</span><span class="s">"deleteByPrimaryKey"</span> <span class="na">parameterType=</span><span class="s">"java.lang.Integer"</span> <span class="nt">&gt;</span>
    delete from resume_profile_social
    where id = #{id,jdbcType=INTEGER}
  <span class="nt">&lt;/delete&gt;</span>
  <span class="nt">&lt;insert</span> <span class="na">id=</span><span class="s">"insert"</span> <span class="na">parameterType=</span><span class="s">"com.resume.pojo.ProfileSocial"</span> <span class="nt">&gt;</span>
    insert into resume_profile_social (id, src, href
      )
    values (#{id,jdbcType=INTEGER}, #{src,jdbcType=VARCHAR}, #{href,jdbcType=VARCHAR}
      )
  <span class="nt">&lt;/insert&gt;</span>
  <span class="nt">&lt;insert</span> <span class="na">id=</span><span class="s">"insertSelective"</span> <span class="na">parameterType=</span><span class="s">"com.resume.pojo.ProfileSocial"</span> <span class="nt">&gt;</span>
    insert into resume_profile_social
    <span class="nt">&lt;trim</span> <span class="na">prefix=</span><span class="s">"("</span> <span class="na">suffix=</span><span class="s">")"</span> <span class="na">suffixOverrides=</span><span class="s">","</span> <span class="nt">&gt;</span>
      <span class="nt">&lt;if</span> <span class="na">test=</span><span class="s">"id != null"</span> <span class="nt">&gt;</span>
        id,
      <span class="nt">&lt;/if&gt;</span>
      <span class="nt">&lt;if</span> <span class="na">test=</span><span class="s">"src != null"</span> <span class="nt">&gt;</span>
        src,
      <span class="nt">&lt;/if&gt;</span>
      <span class="nt">&lt;if</span> <span class="na">test=</span><span class="s">"href != null"</span> <span class="nt">&gt;</span>
        href,
      <span class="nt">&lt;/if&gt;</span>
    <span class="nt">&lt;/trim&gt;</span>
    <span class="nt">&lt;trim</span> <span class="na">prefix=</span><span class="s">"values ("</span> <span class="na">suffix=</span><span class="s">")"</span> <span class="na">suffixOverrides=</span><span class="s">","</span> <span class="nt">&gt;</span>
      <span class="nt">&lt;if</span> <span class="na">test=</span><span class="s">"id != null"</span> <span class="nt">&gt;</span>
        #{id,jdbcType=INTEGER},
      <span class="nt">&lt;/if&gt;</span>
      <span class="nt">&lt;if</span> <span class="na">test=</span><span class="s">"src != null"</span> <span class="nt">&gt;</span>
        #{src,jdbcType=VARCHAR},
      <span class="nt">&lt;/if&gt;</span>
      <span class="nt">&lt;if</span> <span class="na">test=</span><span class="s">"href != null"</span> <span class="nt">&gt;</span>
        #{href,jdbcType=VARCHAR},
      <span class="nt">&lt;/if&gt;</span>
    <span class="nt">&lt;/trim&gt;</span>
  <span class="nt">&lt;/insert&gt;</span>
  <span class="nt">&lt;update</span> <span class="na">id=</span><span class="s">"updateByPrimaryKeySelective"</span> <span class="na">parameterType=</span><span class="s">"com.resume.pojo.ProfileSocial"</span> <span class="nt">&gt;</span>
    update resume_profile_social
    <span class="nt">&lt;set</span> <span class="nt">&gt;</span>
      <span class="nt">&lt;if</span> <span class="na">test=</span><span class="s">"src != null"</span> <span class="nt">&gt;</span>
        src = #{src,jdbcType=VARCHAR},
      <span class="nt">&lt;/if&gt;</span>
      <span class="nt">&lt;if</span> <span class="na">test=</span><span class="s">"href != null"</span> <span class="nt">&gt;</span>
        href = #{href,jdbcType=VARCHAR},
      <span class="nt">&lt;/if&gt;</span>
    <span class="nt">&lt;/set&gt;</span>
    where id = #{id,jdbcType=INTEGER}
  <span class="nt">&lt;/update&gt;</span>
  <span class="nt">&lt;update</span> <span class="na">id=</span><span class="s">"updateByPrimaryKey"</span> <span class="na">parameterType=</span><span class="s">"com.resume.pojo.ProfileSocial"</span> <span class="nt">&gt;</span>
    update resume_profile_social
    set src = #{src,jdbcType=VARCHAR},
      href = #{href,jdbcType=VARCHAR}
    where id = #{id,jdbcType=INTEGER}
  <span class="nt">&lt;/update&gt;</span>
  <span class="nt">&lt;select</span> <span class="na">id=</span><span class="s">"selectAllSocial"</span> <span class="na">resultMap=</span><span class="s">"BaseResultMap"</span><span class="nt">&gt;</span>
    select
    <span class="nt">&lt;include</span> <span class="na">refid=</span><span class="s">"Base_Column_List"</span> <span class="nt">/&gt;</span>
    from resume_profile_social
  <span class="nt">&lt;/select&gt;</span>
<span class="nt">&lt;/mapper&gt;</span>
</code></pre>
</div>
<p>封装了一些数据库的逻辑的操作.</p>

<p>pojo 就是javabean, 我们来看下一个简单的javabean是个什么东西吧.</p>

<div class="highlighter-rouge"><pre class="highlight"><code>
package com.resume.pojo;

public class ProfileInterest {
    private Integer id;

    private String interest;

    public ProfileInterest(Integer id, String interest) {
        this.id = id;
        this.interest = interest;
    }

    public ProfileInterest() {
        super();
    }

    public Integer getId() {
        return id;
    }

    public void setId(Integer id) {
        this.id = id;
    }

    public String getInterest() {
        return interest;
    }

    public void setInterest(String interest) {
        this.interest = interest == null ? null : interest.trim();
    }
}
</code></pre>
</div>

<p>我们可以看到和我们model其实是差不多的, 只不过oc的代码看起来比较简洁罢了.</p>

<p>可以得知我们通过dao操控mapper并将数据存储至pojo返回前端.</p>

<h4 id="高复用响应">高复用响应</h4>

<h5 id="responsecode">ResponseCode</h5>

<div class="highlighter-rouge"><pre class="highlight"><code>package com.resume.common;

/**
 * Created by zhushuangquan on 08/11/2017.
 */
public enum  ResponseCode {

    SUCCESS(0, "SUCCESS"),
    ERROR(1, "ERROR"),
    NEED_LOGIN(10, "NEED_LOGIN"),
    ILLEGAL_ARGUMENT(2, "ILLEGAL_ARGUMENT");

    private final int code;
    private final String desc;

    ResponseCode(int code, String desc) {
        this.code = code;
        this.desc = desc;
    }

    public  int getCode() {
        return code;
    }
    public  String getDesc() {
        return desc;
    }
}

</code></pre>
</div>

<h5 id="serverresponse">ServerResponse</h5>

<div class="highlighter-rouge"><pre class="highlight"><code>package com.resume.common;

import org.codehaus.jackson.annotate.JsonIgnore;
import org.codehaus.jackson.map.annotate.JsonSerialize;

import java.io.Serializable;

/**
 * Created by zhushuangquan on 08/11/2017.
 */
@JsonSerialize(include = JsonSerialize.Inclusion.NON_NULL)
public class ServerResponse&lt;T&gt; implements Serializable {

    private int status;
    private String msg;
    private T data;

    private ServerResponse(int status) {
        this.status = status;
    }
    private ServerResponse(int status,  T data) {
        this.status = status;
        this.data = data;
    }
    private ServerResponse(int status, String msg, T data) {
        this.status = status;
        this.msg = msg;
        this.data = data;
    }
    private ServerResponse(int status, String msg) {
        this.status = status;
        this.msg = msg;
    }

    @JsonIgnore
    public boolean isSuccess() {
        return this.status == ResponseCode.SUCCESS.getCode();
    }

    public int getStatus() {
        return status;
    }

    public T getData() {
        return data;
    }

    public String getMsg() {
        return msg;
    }

    public static &lt;T&gt; ServerResponse&lt;T&gt; createBySuccess() {
        return new ServerResponse&lt;T&gt;(ResponseCode.SUCCESS.getCode());
    }

    public static &lt;T&gt; ServerResponse&lt;T&gt; createBySuccessMessage(String msg) {
        return new ServerResponse&lt;T&gt;(ResponseCode.SUCCESS.getCode(), msg);
    }

    public static &lt;T&gt; ServerResponse&lt;T&gt; createBySuccess(T data) {
        return new ServerResponse&lt;T&gt;(ResponseCode.SUCCESS.getCode(), data);
    }

    public static &lt;T&gt; ServerResponse&lt;T&gt; createBySuccess(String msg, T data) {
        return new ServerResponse&lt;T&gt;(ResponseCode.SUCCESS.getCode(), msg, data);
    }

    public static &lt;T&gt; ServerResponse&lt;T&gt; createByError() {
        return new ServerResponse&lt;T&gt;(ResponseCode.ERROR.getCode(), ResponseCode.ERROR.getDesc());
    }

    public static &lt;T&gt; ServerResponse&lt;T&gt; createByErrorMessage(String errorMessage) {
        return new ServerResponse&lt;T&gt;(ResponseCode.ERROR.getCode(), errorMessage);
    }

    public static &lt;T&gt; ServerResponse&lt;T&gt; createByErrorCodeMessage(int errorCode, String errorMessage) {
        return new ServerResponse&lt;T&gt;(errorCode, errorMessage);
    }
}


</code></pre>
</div>

<p>这里有两个注解要说下<code class="highlighter-rouge">@JsonSerialize(include = JsonSerialize.Inclusion.NON_NULL)</code> 将对象转换成json序列化的注解, 以及<code class="highlighter-rouge">@JsonIgnore</code>忽略转化的注解.</p>

<h4 id="接口开发">接口开发</h4>

<p>终于到接口开发这个激动人心的时刻了, 我们还是来回顾一下我们需要制作接口的图示:</p>

<p><img src="http://upload-images.jianshu.io/upload_images/1229762-a3d8a0c34c76e69e.png?imageMogr2/auto-orient/strip" alt="" /></p>

<h5 id="controller">controller</h5>

<p>首先我们需要新建一个控制器, 取名为 PortalController, 针对前台的控制器.</p>

<div class="highlighter-rouge"><pre class="highlight"><code>package com.resume.controller;

import com.resume.common.ServerResponse;
import com.resume.service.IPortalService;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Controller;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.ResponseBody;

import javax.servlet.http.HttpServletResponse;

/**
 * Created by zhushuangquan on 08/11/2017.
 */

@Controller
@RequestMapping("/portal/")
public class PortalController {

    @Autowired
    private IPortalService iPortalService;

    @RequestMapping("fetch_profile.do")
    @ResponseBody
    public ServerResponse fetchProfile(HttpServletResponse response) {
        response.setHeader("Access-Control-Allow-Origin", "*");
        return iPortalService.fetchProfile();
    }
}

</code></pre>
</div>

<p>这里我们看到很多springmvc和spring的注解, <code class="highlighter-rouge">@Controller</code>控制器注解, <code class="highlighter-rouge">@RequestMapping</code>路由注解, <code class="highlighter-rouge">@Autowired</code>自动装配注解, <code class="highlighter-rouge">@ResponseBody</code> 响应体注解, 用于将返回的对象通过json传给前台解析数据. 其中service就是我们接下来要讲到的服务层, 而<code class="highlighter-rouge">        response.setHeader("Access-Control-Allow-Origin", "*");
</code>这句仅仅是用来跨域使用的.</p>

<h5 id="service">service</h5>

<div class="highlighter-rouge"><pre class="highlight"><code>package com.resume.service;

import com.resume.common.ServerResponse;
import com.resume.pojo.Profile;

/**
 * Created by zhushuangquan on 09/11/2017.
 */
public interface IPortalService {

    ServerResponse&lt;Profile&gt; fetchProfile();
}
</code></pre>
</div>
<div class="highlighter-rouge"><pre class="highlight"><code>package com.resume.service.impl;

import com.google.common.collect.Lists;
import com.resume.common.ServerResponse;
import com.resume.dao.ProfileEducationMapper;
import com.resume.dao.ProfileInterestMapper;
import com.resume.dao.ProfileMapper;
import com.resume.dao.ProfileSocialMapper;
import com.resume.pojo.Profile;
import com.resume.pojo.ProfileEducation;
import com.resume.pojo.ProfileInterest;
import com.resume.pojo.ProfileSocial;
import com.resume.service.IPortalService;
import com.resume.vo.ProfileEducationVo;
import com.resume.vo.ProfileInterestVo;
import com.resume.vo.ProfileSocialVo;
import com.resume.vo.ProfileVo;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Service;

import java.util.List;

/**
 * Created by zhushuangquan on 09/11/2017.
 */

@Service("iPortalService")
public class PortalServiceImpl implements IPortalService {

    @Autowired
    private ProfileMapper profileMapper;

    @Autowired
    private ProfileSocialMapper profileSocialMapper;

    @Autowired
    private ProfileInterestMapper profileInterestMapper;

    @Autowired
    private ProfileEducationMapper profileEducationMapper;

    public ServerResponse fetchProfile() {

        ProfileVo profileVo = assembleProfileVo(profileMapper.selectAll());
        List&lt;ProfileSocial&gt; profileSocialList = profileSocialMapper.selectAllSocial();
        List&lt;ProfileSocialVo&gt; profileSocialVoList = Lists.newArrayList();
        List&lt;ProfileInterest&gt; profileInterestList = profileInterestMapper.selectAllInterest();
        List&lt;ProfileInterestVo&gt; profileInterestVoList = Lists.newArrayList();
        List&lt;ProfileEducation&gt; profileEducationList = profileEducationMapper.selectAllEducation();
        List&lt;ProfileEducationVo&gt; profileEducationVoList = Lists.newArrayList();
        for (ProfileSocial profileSocial: profileSocialList) {
            ProfileSocialVo profileSocialVo = assembleProfileSocialVo(profileSocial);
            profileSocialVoList.add(profileSocialVo);
        }
        for (ProfileInterest profileInterest: profileInterestList) {
            ProfileInterestVo profileInterestVo = assembleProfileInterestVo(profileInterest);
            profileInterestVoList.add(profileInterestVo);
        }
        for (ProfileEducation profileEducation: profileEducationList) {
            ProfileEducationVo profileEducationVo = assembleProfileEducationVo(profileEducation);
            profileEducationVoList.add(profileEducationVo);
        }
        profileVo.setProfileSocialList(profileSocialVoList);
        profileVo.setProfileInterestList(profileInterestVoList);
        profileVo.setProfileEducationList(profileEducationVoList);
        return ServerResponse.createBySuccess(profileVo);
    }

    private ProfileVo assembleProfileVo(Profile profile) {
        ProfileVo profileVo = new ProfileVo();
        profileVo.setProfileImage(profile.getProfileImage());
        profileVo.setProfileInterestTitle(profile.getProfileInterestTitle());
        profileVo.setProfileCareer(profile.getProfileCareer());
        profileVo.setProfileName(profile.getProfileName());
        profileVo.setProfileEducationTitle(profile.getProfileEducationTitle());
        profileVo.setProfileLocation(profile.getProfileLocation());
        profileVo.setProfileSummaryTitle(profile.getProfileSummaryTitle());
        profileVo.setProfileSummaryDescription(profile.getProfileSummaryDescription());
        return profileVo;
    }

    private ProfileSocialVo assembleProfileSocialVo(ProfileSocial profileSocial) {
        ProfileSocialVo profileSocialVo = new ProfileSocialVo();
        profileSocialVo.setSrc(profileSocial.getSrc());
        profileSocialVo.setHref(profileSocial.getHref());
        return profileSocialVo;
    }

    private ProfileInterestVo assembleProfileInterestVo(ProfileInterest profileInterest) {
        ProfileInterestVo profileInterestVo = new ProfileInterestVo();
        profileInterestVo.setInterest(profileInterest.getInterest());
        return profileInterestVo;
    }

    private ProfileEducationVo assembleProfileEducationVo(ProfileEducation profileEducation) {
        ProfileEducationVo profileEducationVo = new ProfileEducationVo();
        profileEducationVo.setMajor(profileEducation.getMajor());
        profileEducationVo.setSchool(profileEducation.getSchool());
        profileEducationVo.setYear(profileEducation.getYear());
        return profileEducationVo;
    }
}


</code></pre>
</div>
<p>service层是整个业务逻辑的核心, 如何使用dao进行获取数据, 如何通过装配vo封装数据, 并返回给controller. vo和pojo其实是一样的东西, 也就是javabean, 用于封装数据格式的.</p>

<p>通过读表及封装返回后, 我们通过访问接口: <a href="http://localhost:8080/portal/fetch_profile.do">http://localhost:8080/portal/fetch_profile.do</a>, 就能够得到接口返回的数据啦, 这里讲的比较简单, 知识一个select的使用, 之后我会更详细的讲述增删改查整个流程并制作简历的后台页面, 敬请期待!</p>

<p>好了 我们来看看返回的数据吧.</p>

<div class="highlighter-rouge"><pre class="highlight"><code>/* http://localhost:8080/portal/fetch_profile.do */
{
    "status": 0,
    "data": {
        "profileImage": "http://upload-images.jianshu.io/upload_images/1229762-23e162b9bd6b9c39.JPG?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240",
        "profileName": "Shuangquan Zhu",
        "profileCareer": "Designer / Developer",
        "profileLocation": "Shanghai",
        "profileSocialList": [
            {
                "src": "http://upload-images.jianshu.io/upload_images/1229762-877e3e5c2260bcf1.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240",
                "href": "https://github.com/coderzsq"
            },
            {
                "src": "http://upload-images.jianshu.io/upload_images/1229762-f6525252f3e8387b.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240",
                "href": "http://www.jianshu.com/u/9d7fad1a4693"
            },
            {
                "src": "http://upload-images.jianshu.io/upload_images/1229762-a69614a97de93f36.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240",
                "href": "http://upload-images.jianshu.io/upload_images/1229762-453920a3f4eedcd8.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240"
            },
            {
                "src": "http://upload-images.jianshu.io/upload_images/1229762-91b0949aec719aab.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240",
                "href": "http://coderzsq.github.io/"
            }
        ],
        "profileSummaryTitle": "Summary",
        "profileSummaryDescription": "Shuangquan Zhu is a professional developer who focuses on iOS now. He has strong knowledge of Objective-C, Swift and Javascript. With these skills, he created quite a few quickly developer tools. He also leads the J1 iOS team to promote the project process.\\nHe crazy loves playing basketball with friends in spare time, He also loves traveling, writing and listening music. He is always willing to try new things, and keeping to learn from them.",
        "profileInterestTitle": "Interest",
        "profileInterestList": [
            {
                "interest": "Learn about high tech"
            },
            {
                "interest": "Play basketball"
            },
            {
                "interest": "Listen to music"
            },
            {
                "interest": "Apple products"
            }
        ],
        "profileEducationTitle": "Education",
        "profileEducationList": [
            {
                "major": "Business Management",
                "school": "East China University of Science and Technology",
                "year": "2016"
            },
            {
                "major": "Customs and International Freight",
                "school": "Shanghai Maritime Academy",
                "year": "2013"
            }
        ]
    }
}
</code></pre>
</div>
<p>连续更新了两篇, 其实写一个后端并没有想象中那么难, 当然要学深要走的路还很长, 这不才一个月的水准已经相当不错了, 当然诸如sql注入, 横向越权, 纵向越权, 读写分离, 缓存等知识, 还需要接下来去学习.</p>

<p>我感觉, 学习编程, 思想最重要, 你了解一个事情背后的原理比你记得多少api不知道强多少!!!</p>

<h5 id="about">About:</h5>

<p><img src="http://upload-images.jianshu.io/upload_images/1229762-3f8925783027b3fa.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="点击下方链接跳转!!" /></p>

<p><a href="https://github.com/coderZsq/coderZsq.maven.java">🌟 项目源码 请点这里🌟 »&gt; 喜欢的朋友请点喜欢 »&gt; 下载源码的同学请送下小星星 »&gt; 有闲钱的壕们可以进行打赏 »&gt; 小弟会尽快推出更好的文章和大家分享 »&gt; 你的激励就是我的动力!! </a></p>


  </section>
</article>

<section class="read-more">
   
   
   <div class="read-more-item">
       <span class="read-more-item-dim">最近的文章</span>
       <h2 class="post-list__post-title post-title"><a href="/2017/11/Web-%E4%BD%BF%E7%94%A8fetch%E8%AF%B7%E6%B1%82%E5%90%8E%E7%AB%AF%E6%9C%8D%E5%8A%A1/" title="link to Web 使用fetch请求后端服务">Web 使用fetch请求后端服务</a></h2>
       <p class="excerpt">  上篇我们使用了ssm构建了我们简历的服务, 这篇我们从前端的视角进行网络请求, 对于react就要讲讲fetch这个库的使用, 对于vue就要讲讲axios这个库, 对于axios之前已经讲过, 这篇就来讲讲fetch的使用.参考链接:  Web 是时候用前端写个简历了!  Web 前端项目要从基本布局开始  Web 简历一定要设计的美美的  Web 使用Vue代替陈旧的jQuery  Web Vue项目速转.htm静态网页  Web 将项目快速迁移至React  Web PC项目快速...&hellip;</p>
       <div class="post-list__meta"><time datetime="2017-11-15 11:33:00 +0800" class="post-list__meta--date date">2017-11-15</time> &#8226; <span class="post-list__meta--tags tags">前端开发</span><a class="btn-border-small" href=/2017/11/Web-%E4%BD%BF%E7%94%A8fetch%E8%AF%B7%E6%B1%82%E5%90%8E%E7%AB%AF%E6%9C%8D%E5%8A%A1/>继续阅读</a></div>
   </div>
   
   
   
   
   <div class="read-more-item">
       <span class="read-more-item-dim">更早的文章</span>
       <h2 class="post-list__post-title post-title"><a href="/2017/11/Server-%E5%85%A5%E9%97%A8%E5%90%8E%E7%AB%AF%E4%BD%A0%E8%A6%81%E5%AD%A6%E4%BB%80%E4%B9%88/" title="link to Server 入门后端你要学什么">Server 入门后端你要学什么</a></h2>
       <p class="excerpt">  好久没有更新了, 最近一个月在入门服务端的技术栈, 所以快速学了一下java, ssm框架, 这篇文章会将我的学习思路以及一些思考进行分享, 如何将一个月的学习所得通过一篇文章进行梳理, 这对我也是一个极大的挑战.技术选型对于Web服务端开发, 有很多语言可供选择比如, php, java, .net, python等, 之前我也试过使用node进行服务器的开发, 但对于国内来说, java还是企业级的标配, 所以我们来学习一下java还是很有必要的.java技术栈学习java服务端开...&hellip;</p>
       <div class="post-list__meta"><time datetime="2017-11-13 19:57:00 +0800" class="post-list__meta--date date">2017-11-13</time> &#8226; <span class="post-list__meta--tags tags">后端开发</span><a class="btn-border-small" href=/2017/11/Server-%E5%85%A5%E9%97%A8%E5%90%8E%E7%AB%AF%E4%BD%A0%E8%A6%81%E5%AD%A6%E4%BB%80%E4%B9%88/>继续阅读</a></div>
   </div>
   
</section>

<section class="post-comments">
  
  
  
  
</section>


            <section class="footer">
    <footer>
    	<span class="footer__copyright">本站点采用<a href="http://creativecommons.org/licenses/by-nc-sa/4.0/">知识共享 署名-非商业性使用-相同方式共享 4.0 国际 许可协议</a></span>
        <span class="footer__copyright">由 <a href="https://jekyllrb.com">Jekyll</a> 于 2018-04-24 生成，感谢 <a href="https://www.digitalocean.com/?refcode=30ed2d146762">Digital Ocean</a> 为本站提供稳定的 VPS 服务</span>
        <span class="footer__copyright">本站由 <a href="https://github.com/coderZsq">@Castie!</a> 创建，采用 <a href="https://github.com/onevcat/vno-jekyll">Vno - Jekyll</a> 作为主题，您可以在 GitHub 找到<a href="https://github.com/onevcat/OneV-s-Den">本站源码</a> - &copy; 2018</span>
    </footer>
</section>

        </div>
    </div>
    
    <script type="text/javascript" src="//code.jquery.com/jquery-1.11.3.min.js"></script>

<script type="text/javascript" src="/js/main.js"></script>



    
  </body>

</html>
