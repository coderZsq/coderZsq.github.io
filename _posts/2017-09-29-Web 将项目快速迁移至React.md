---
layout: post
title: Web å°†é¡¹ç›®å¿«é€Ÿè¿ç§»è‡³React
date: 2017.09.29 11:38
tag: å‰ç«¯å¼€å‘
---

> æœ€è¿‘åœ¨å­¦ä¹ å‰ç«¯æ–¹é¢çš„çŸ¥è¯†, ç²—æµ…çš„å°†webpackå’Œgulpçš„æ–‡æ¡£ç¿»é˜…äº†ä¸€é, è™½ç„¶ä¹‹å‰æœ‰ä½¿ç”¨è¿‡Vueçš„ç»éªŒ, ä½†æ˜¯å°±ç¤¾åŒºæ¥è¯´, ç°åœ¨çš„ä¸»æµè¿˜æ˜¯React, æ‰€ä»¥æˆ‘ä¹Ÿä¸å…ä¿—çš„è¿›è¡Œå­¦ä¹ , ä¸ºä»¥åReact Nativeçš„hybirdæ¶æ„çš„å»ºè®¾æ‰“å¥½åŸºç¡€.

![](http://upload-images.jianshu.io/upload_images/1229762-6afd704390c3aedc.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)


###### å‚è€ƒé“¾æ¥:

- [Web æ˜¯æ—¶å€™ç”¨å‰ç«¯å†™ä¸ªç®€å†äº†!](http://www.jianshu.com/p/d1497da0f9ab)
- [Web å‰ç«¯é¡¹ç›®è¦ä»åŸºæœ¬å¸ƒå±€å¼€å§‹](http://www.jianshu.com/p/5c4788c0389d)
- [Web ç®€å†ä¸€å®šè¦è®¾è®¡çš„ç¾ç¾çš„](http://www.jianshu.com/p/b3389f66f539)
- [Web ä½¿ç”¨Vueä»£æ›¿é™ˆæ—§çš„jQuery](http://www.jianshu.com/p/85d95723edfb)
- [Web Vueé¡¹ç›®é€Ÿè½¬.htmé™æ€ç½‘é¡µ](http://www.jianshu.com/p/f1fd09628b43)

ä»¥ä¸‹å†…å®¹åœ¨ä¸Šè¿°æ–‡ç« åŸºç¡€ä¸Šè¿›è¡Œ, è¯·äº‹å…ˆæŸ¥é˜….

è¯´åˆ°React, æœ€å¸¸å¬è¯´çš„å°±æ˜¯å‡½æ•°å¼ç¼–ç¨‹, å’ŒVueæ¨å´‡çš„æ¨¡æ¿æœ‰å¾ˆå¤§çš„å·®å¼‚, è¿™ä¹Ÿæ˜¯æˆ‘ä»¬éœ€è¦æ¢ä¸ªè§†è§’æ¥ç ”ç©¶çš„ä¸œè¥¿. è¯´é“å­¦ä¹ , å…‰æ˜¯ç†è®ºä¸Šçš„è®²è§£çœŸçš„ä¸æ˜¯æˆ‘çš„å­¦ä¹ æ–¹å¼, è¯´çœŸçš„ä¹Ÿå­¦ä¸è¿›å», æ‰€ä»¥æˆ‘ä»¬è¿˜æ˜¯é€šè¿‡å®æˆ˜æ¥è¿›è¡Œå­¦ä¹ å§.

æˆ‘ä»¬ä¹‹å‰æœ‰é€šè¿‡Vueæ­å»ºçš„ä¸€ä¸ªä¸ªäººç®€å†çš„é¡µé¢, ä¸ºäº†å­¦ä¹ ä½¿ç”¨React, æˆ‘ä»¬å°±å°†ä¹‹å‰çš„Vueé¡¹ç›®è¿ç§»åˆ°Reactä¸Šæ¥, å¹¶åœ¨è¿ç§»çš„é€”ä¸­çœ‹çœ‹å¦‚ä½•æ¥ä½¿ç”¨React.

#### create-react-app

é¦–å…ˆæˆ‘ä»¬éœ€è¦ä¸€ä¸ªå…ˆæ­å»ºä¸€ä¸ªå¼€å‘ç¯å¢ƒ, ä¸Šç¯‡æˆ‘ä»¬é€šè¿‡webpackæ­å»ºäº†ä¸€ä¸ªæœ€åŸºç¡€çš„å¼€å‘ç¯å¢ƒ, ä½†æ²¡æœ‰ä¼˜åŒ–çš„webpack, é€Ÿåº¦æ˜¯å¾ˆä¸ç†æƒ³çš„, æ‰€ä»¥æˆ‘ä»¬å°±ç›´æ¥ä½¿ç”¨facebookå®˜æ–¹çš„è„šæ‰‹æ¶`create-react-app` æ¥è¿›è¡Œé¡¹ç›®çš„ç¯å¢ƒæ­å»º.

é¦–å…ˆæˆ‘ä»¬æ¥çœ‹ä¸‹æ–‡æ¡£ --> [å®˜æ–¹æ–‡æ¡£](https://github.com/facebookincubator/create-react-app)

```
Quick Overview

npm install -g create-react-app

create-react-app my-app
cd my-app/
npm start
Then open http://localhost:3000/ to see your app.
When youâ€™re ready to deploy to production, create a minified bundle with npm run build.
```
éå¸¸ç®€å•çš„ç»ˆç«¯å‘½ä»¤å, è„šæ‰‹æ¶å·¥å…·å°±å¸®æˆ‘ä»¬æ­å»ºå¥½äº†å¼€å‘ç¯å¢ƒ.

#### package.json

```
{
  "name": "react-resume",
  "version": "0.1.0",
  "private": true,
  "dependencies": {
    "react": "^15.6.2",
    "react-dom": "^15.6.2"
    "react-scripts": "1.0.13"
  },
  "scripts": {
    "start": "react-scripts start",
    "build": "react-scripts build",
    "test": "react-scripts test --env=jsdom",
    "eject": "react-scripts eject"
  }
}

```
ä½†æ˜¯æˆ‘ä»¬åœ¨è„šæ‰‹æ¶ç”Ÿæˆçš„é¡¹ç›®ä¸­çœ‹ä¸åˆ°webpackçš„é…ç½®...

#### react

ä¸ç®¡äº†, æˆ‘ä»¬å…ˆè¿›è¡Œå¼€å‘èµ·æ¥, æˆ‘ä»¬å…ˆå°†Indexéª¨æ¶ç»™æ­å¥½å§. æˆ‘ä»¬å…ˆæ¥çœ‹çœ‹ä¹‹å‰çš„Vueçš„å†™æ³•, å¹¶è¿›è¡Œå¯é€‰çš„å¤åˆ¶.

##### Index.vue

```
<template>
<div>
  <navigation></navigation>
  <div class="odd">
    <div class="content">
      <home></home>
    </div>
  </div>
  <div class="even">
    <div class="content">
      <projects></projects>
    </div>
  </div>
  <div class="odd">
    <div class="content">
      <github></github>
    </div>
  </div>
  <div class="articles">
    <div class="content">
      <articles></articles>
    </div>
  </div>
  <div class="odd">
    <div class="content">
      <experience></experience>
    </div>
  </div>
  <div class="contact">
    <div class="content">
      <contact></contact>
    </div>
  </div>
</div>
</template>

<script>
import navigation from './navigation'
import home from './home'
import projects from './projects'
import github from './github'
import articles from './articles'
import experience from './experience'
import contact from './contact'
export default {
  data() {
    return {

    }
  },
  components: {
    navigation,
    home,
    projects,
    github,
    articles,
    experience,
    contact
  }
}
</script>

<style scoped>
.even {
  width: 100%;
  height: 600px;
  background-color: #fafafa;
}

.odd {
  width: 100%;
  height: 600px;
  background-color: #fff;
}

.articles {
  width: 100%;
  height: 1130px;
  background-color: #fafafa;
}

.contact {
  width: 100%;
  height: 320px;
  background-color: #fafafa;
}

.content {
  margin: 0 auto;
  width: 1000px;
  height: inherit;
}
</style>

```

å¯¹åº”Vue, Reactæˆ‘ä»¬ç”ŸæˆIndex.jsåŠIndex.css

##### Index.css

```
.even {
    width: 100%;
    height: 600px;
    background-color: #fafafa;
}

.odd {
    width: 100%;
    height: 600px;
    background-color: #fff;
}

.articles {
    width: 100%;
    height: 1130px;
    background-color: #fafafa;
}

.contact {
    width: 100%;
    height: 320px;
    background-color: #fafafa;
}

.content {
    margin: 0 auto;
    width: 1000px;
    height: inherit;
}

```

Index.cssä»…ä»…æ˜¯å°†vueä¸­çš„cssç»™æŠ½å–å‡ºæ¥äº†è€Œå·², æˆ‘ä»¬å†æ¥çœ‹Index.js.

##### Index.js
```
import React, {Component} from 'react';
import CSSModules from 'react-css-modules';
import styles from './pc_Index.css';
import PCNavigation from './pc_navigation';
import PCHome from './pc_home';
import PCProducts from './pc_projects';
import PCGithub from './pc_github';
import PCArticles from './pc_articles';
import PCExperience from './pc_experience';
import PCContact from './pc_contact';

export default class PCIndex extends Component {

    render() {
        return (
            <div>
                <PCNavigation/>
                <div className={styles.odd}>
                    <div className={styles.content}>
                        <PCHome/>
                    </div>
                </div>
                <div className={styles.even}>
                    <div className={styles.content}>
                        <PCProducts/>
                    </div>
                </div>
                <div className={styles.odd}>
                    <div className={styles.content}>
                        <PCGithub/>
                    </div>
                </div>
                <div className={styles.articles}>
                    <div className={styles.content}>
                        <PCArticles/>
                    </div>
                </div>
                <div className={styles.odd}>
                    <div className={styles.content}>
                        <PCExperience/>
                    </div>
                </div>
                <div className={styles.contact}>
                    <div className={styles.content}>
                        <PCContact/>
                    </div>
                </div>
            </div>
        )
    }
}

```
Index.js æˆ‘ä»¬é€šè¿‡æ¨¡å—åŒ–æ³¨å…¥çš„æ–¹å¼è¿›è¡Œ, ä½†æ˜¯æˆ‘ä»¬å‘ç°è¿™ä¸ªæ¨¡å—åŒ–æœ‰é—®é¢˜å•Š, è¿˜æ˜¯é€ æˆäº†å…¨å±€æ±¡æŸ“, è¿™æ—¶æˆ‘ä»¬æƒ³åˆ°è¦å»çœ‹çœ‹webpackçš„é…ç½®äº†, å¯æ˜¯é¡¹ç›®ä¸­å¹¶æ²¡æœ‰webpack... é‚£æ€ä¹ˆåŠ... ä¸€åº¦é™·å…¥åƒµå±€, æˆ‘ä»¬å†åˆ°è„šæ‰‹æ¶å·¥å…·çš„æ–‡æ¡£ä¸Šçœ‹çœ‹å§...

#### å€ŸåŠ©æ–‡æ¡£

```
Limitations

Some features are currently not supported:

Server rendering.
Some experimental syntax extensions (e.g. decorators).
CSS Modules (see #2285).
Importing LESS or Sass directly (but you still can use them).
Hot reloading of components.
Some of them might get added in the future if they are stable, are useful to majority of React apps, donâ€™t conflict with existing tools, and donâ€™t introduce additional configuration.
```

æ‰¾å•Šæ‰¾, æˆ‘ä»¬å±…ç„¶çœ‹åˆ°å±…ç„¶ä¸æ”¯æŒ`CSS Modules`, å°¼ç›æ˜¯åœ¨é€—æˆ‘? è¿™ä¸ªæœ‰é‚£ä¹ˆéš¾æ”¯æŒå’©... 

```
Philosophy

One Dependency: There is just one build dependency. It uses Webpack, Babel, ESLint, and other amazing projects, but provides a cohesive curated experience on top of them.

No Configuration Required: You don't need to configure anything. Reasonably good configuration of both development and production builds is handled for you so you can focus on writing code.

No Lock-In: You can â€œejectâ€ to a custom setup at any time. Run a single command, and all the configuration and build dependencies will be moved directly into your project, so you can pick up right where you left off.
```

ç„¶åæˆ‘ä»¬çœ‹åˆ°äº†è¿™æ®µ, æœ€åä¸€å¥, ä½ å¯ä»¥`eject `, å¹¶è‡ªå®šä¹‰é…ç½®, ä½†å®˜æ–¹ä¸æ¨èè¿™æ ·åš... ä½ éƒ½å®Œä¸æˆæˆ‘æƒ³è¦çš„åŠŸèƒ½, æˆ‘è¿˜ç®¡ä½ æ¨ä¸æ¨è... å¹¼ç¨š...

```
npm run eject
```

å¥½äº†, æˆ‘çœ‹åˆ°äº†ä¸€ä¸ªconfigæ–‡ä»¶å¤¹, ç»ˆäºæˆ‘ä»¬å¯ä»¥è¿›è¡Œwebpackçš„é…ç½®äº†,é‚£æˆ‘ä»¬åº”è¯¥å¦‚ä½•é…ç½®å‘¢?? æˆ‘ä»¬å»çœ‹ä¸‹`react-css-modules`çš„[æ–‡æ¡£](https://github.com/gajus/react-css-modules).

```
webpack css-loader

CSS Modules is a specification that can be implemented in multiple ways. react-css-modules leverages the existing CSS Modules implementation webpack css-loader.

```

éœ€è¦å€ŸåŠ©`css-loader`, æˆ‘ä»¬å†åˆ°css.loaderä¸­çœ‹çœ‹å§.. --> [æ–‡æ¡£](https://github.com/webpack-contrib/css-loader#css-modules)

```
webpack.config.js

{
 test: /\.css$/,
 use: [
   {
     loader: 'css-loader',
     options: {
       modules: true,
       localIdentName: '[path][name]__[local]--[hash:base64:5]'
     }
   }
 ]
}
```
ç»ˆäºæ‰¾åˆ°é…ç½®é¡¹äº†, æˆ‘ä»¬ä¹Ÿåˆ°æˆ‘ä»¬çš„webpackè¿›è¡Œé…ç½®... é…ç½®å®Œæˆå, æ€»ç®—æ¨¡å—åŒ–çš„äº‹æƒ…ç®—æ˜¯å‘Šä¸€æ®µè½äº†... å‰ç«¯æŸ¥æ–‡æ¡£çœŸå¿ƒéº»çƒ¦... æ–‡æ¡£éƒ½æ˜¯æ•£çš„... å‘å•Š~~

#### CSSModules

è™½ç„¶æå®šäº†cssæ¨¡å—åŒ–, ä½†æ˜¯è¿™æ ·çš„æ³¨å…¥çœŸçš„æ˜¯è›‹ç–¼å•Š... æœ‰æ²¡æœ‰ä»€ä¹ˆæ›´å¥½çš„æ–¹æ³•å‘¢... æˆ‘ä»¬å›åˆ°`react-css-modules`çš„æ–‡æ¡£.

```
import React from 'react';
import styles from './table.css';

export default class Table extends React.Component {
    render () {
        return <div className={styles.table}>
            <div className={styles.row}>
                <div className={styles.cell}>A0</div>
                <div className={styles.cell}>B0</div>
            </div>
        </div>;
    }
}
```
æˆ‘ä»¬ç›®å‰ä½¿ç”¨çš„æ˜¯è¿™ç§æ–¹æ³•, æ³¨å…¥çš„éå¸¸è›‹ç–¼....

```
import React from 'react';
import CSSModules from 'react-css-modules';
import styles from './table.css';

class Table extends React.Component {
    render () {
        return <div styleName='table'>
            <div styleName='row'>
                <div styleName='cell'>A0</div>
                <div styleName='cell'>B0</div>
            </div>
        </div>;
    }
}

export default CSSModules(Table, styles);

```
å¾€ä¸‹æ‰¾, ç„¶åæˆ‘ä»¬å°±æ‰¾åˆ°äº†è¿™ç§ä¼˜é›…çš„æ–¹æ³•, å¯ä»¥ç›´æ¥ä½¿ç”¨cssçš„å­—ç¬¦ä¸²å¼•å…¥, è¿™ä¸ªè¾¾åˆ°äº†æˆ‘ä»¬çš„è¦æ±‚! æ‹æ‰‹ğŸ‘.

```
import React from 'react';
import CSSModules from 'react-css-modules';
import styles from './table.css';

@CSSModules(styles)
export default class extends React.Component {
    render () {
        return <div styleName='table'>
            <div styleName='row'>
                <div styleName='cell'>A0</div>
                <div styleName='cell'>B0</div>
            </div>
        </div>;
    }
}
```

ä¸çŸ¥ç–²å€¦çš„æˆ‘åˆå¾€ä¸‹ç¿»æŸ¥, æ‰¾åˆ°äº†è¿™ä¸ªæ›´åŠ ä¼˜é›…çš„æ–¹æ³•, ä½¿ç”¨`decorator`, è¿™æ˜¯ES7çš„è¯­æ³•, æƒ³è¦ä½¿ç”¨æˆ‘ä»¬éœ€è¦åŠ `babel-plugin-transform-decorators-legacy` è¿™ä¸ªæ’ä»¶.

```
npm i babel-plugin-transform-decorators-legacy --save
```
```
{
  test: /\.(js|jsx)$/,
  include: paths.appSrc,
  loader: require.resolve('babel-loader'),
  options: {

    // This is a feature of `babel-loader` for webpack (not Babel itself).
    // It enables caching results in ./node_modules/.cache/babel-loader/
    // directory for faster rebuilds.
    cacheDirectory: true,
    "plugins":["transform-decorators-legacy"]
  },
},
```
æˆ‘ä»¬å®‰è£…å®Œæˆååˆ°webpackä¸­é…ç½®ä¸€ä¸‹, å°±å¯ä»¥ç”¨å•¦.

##### Index.js

```
import React, {Component} from 'react';
import CSSModules from 'react-css-modules';
import styles from './pc_Index.css';
import PCNavigation from './pc_navigation';
import PCHome from './pc_home';
import PCProducts from './pc_projects';
import PCGithub from './pc_github';
import PCArticles from './pc_articles';
import PCExperience from './pc_experience';
import PCContact from './pc_contact';

@CSSModules(styles)
export default class PCIndex extends Component {

    render() {
        return (
            <div>
                <PCNavigation/>
                <div styleName="odd">
                    <div styleName="content">
                        <PCHome/>
                    </div>
                </div>
                <div styleName="even">
                    <div styleName="content">
                        <PCProducts/>
                    </div>
                </div>
                <div styleName="odd">
                    <div styleName="content">
                        <PCGithub/>
                    </div>
                </div>
                <div styleName="articles">
                    <div styleName="content">
                        <PCArticles/>
                    </div>
                </div>
                <div styleName="odd">
                    <div styleName="content">
                        <PCExperience/>
                    </div>
                </div>
                <div styleName="contact">
                    <div styleName="content">
                        <PCContact/>
                    </div>
                </div>
            </div>
        )
    }
}

```

è¿™æ ·æˆ‘ä¹ˆå°±éå¸¸ä¼˜é›…çš„å®Œæˆäº†è¿™ä¸ªCSSæ¨¡å—åŒ–çš„é—®é¢˜äº†, è¿˜æ˜¯èŠ±äº†äº›åŠŸå¤«.

ä½†æ˜¯æˆ‘ä»¬å¦‚ä½•è¿›è¡Œä¸€ä¸ªdomç»‘å®šå¤šä¸ªæ ·å¼å‘¢?? 

```
@CSSModules(styles, {allowMultiple: true})
```
å¤šåŠ ä¸€ä¸ªå‚æ•°å³å¯, è™½ç„¶æ–‡æ¡£ä¸æ˜¯å¾ˆæ¨è, ä½†æ˜¯ç”¨æˆ·éœ€æ±‚å¤§äºå¤©ä¸æ˜¯å—...

#### è¿ç§»

æå®šäº†ä¸Šé¢æœ€éº»çƒ¦çš„CSSæ¨¡å—åŒ–å, æˆ‘ä»¬çš„è¿ç§»ä¹Ÿå˜å¾—é¡ºé£é¡ºæ°´, åŸºæœ¬æ²¡æœ‰é‡åˆ°ä»€ä¹ˆé—®é¢˜, ä¼šä½¿ç”¨Vueçš„åŒå­¦è¿ç§»åˆ°Reactä¸Šä¹Ÿä¸æ˜¯ä»€ä¹ˆéš¾äº‹.

##### Vue
```
<template>
<div class="column">
  <div class="column-block">
    <div class="column-list">
      <div class="row" v-for="article in articles">
        <a :href="article.href">{{article.name}}</a>
      </div>
    </div>
    <div class="column-title">
      {{name}}
    </div>
  </div>
</div>
</template>

<script>
export default {
  data() {
    return {

    }
  },
  props: {
    articles: Array,
    name: String
  }
}
</script>
```

##### React
```
import React, {Component} from 'react';
import CSSModules from 'react-css-modules';
import styles from './pc_column.css';

@CSSModules(styles)
export default class PCColumn extends Component {

    render() {

        const rows = this.props.articles.map((article, index) => (
            <div styleName="row" key={index}>
                <a href={article.href}>{article.name}</a>
            </div>
        ))

        return (
            <div styleName="column">
                <div styleName="column-block">
                    <div styleName="column-list">
                        {rows}
                    </div>
                    <div styleName="column-title">
                        {this.props.name}
                    </div>
                </div>
            </div>
        )
    }
}
```

ç‰¹æ„æ‰¾äº†ä¸ªæ˜æ˜¾æœ‰å·®å¼‚çš„å¯¹æ¯”, æˆ‘ä»¬èƒ½å¤Ÿçœ‹åˆ°Vueçš„é‡å¿ƒåœ¨æ¨¡æ¿çš„æ¸²æŸ“, ä½¿ç”¨v-forè¿™ç§è¯­æ³•ç³–. è€ŒReactæ˜¯æ¯”è¾ƒé€‚åˆæˆ‘ä»¬å¹³æ—¶çš„ç¼–ç¨‹ä¹ æƒ¯çš„, ä¹Ÿå°±æ˜¯ä»£ç æ³¨å…¥. 

#### å±•ç¤º

![](http://upload-images.jianshu.io/upload_images/1229762-bca861b9e236da9c.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)

æ•´ä¸ªè¿ç§»çš„è¿‡ç¨‹æ¯”è¾ƒé¡ºç•…, åŸå› ä¹‹ä¸€ä¹Ÿæ˜¯é¡µé¢ç›¸å¯¹ç®€å•, å­¦ä¹ åˆ°çš„ä¸œè¥¿æ˜¯CSSModulesè¿™å—çš„é…ç½®é—®é¢˜, è§£å†³äº†è¿™ä¸ªé—®é¢˜å, è¿ç§»ä¹Ÿå°±å˜å¾—éå¸¸å®¹æ˜“äº†.

ä½†æ˜¯ä½œä¸ºå‰ç«¯å°ç™½æ¥è¯´, è¿™ä»…ä»…æ˜¯å¯¹äºå‰ç«¯é¡¹ç›®çš„æµ…æ˜¾çš„å­¦ä¹ , è¦å­¦ä¹ çš„ä¸œè¥¿è¿˜å¾ˆå¤š, ç»§ç»­åŠ æ²¹å§.

##### About: 

![ç‚¹å‡»ä¸‹æ–¹é“¾æ¥è·³è½¬!!](http://upload-images.jianshu.io/upload_images/1229762-3f8925783027b3fa.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)

 [ğŸŒŸ é¡¹ç›®æºç  è¯·ç‚¹è¿™é‡ŒğŸŒŸ >>> å–œæ¬¢çš„æœ‹å‹è¯·ç‚¹å–œæ¬¢ >>> ä¸‹è½½æºç çš„åŒå­¦è¯·é€ä¸‹å°æ˜Ÿæ˜Ÿ >>> æœ‰é—²é’±çš„å£•ä»¬å¯ä»¥è¿›è¡Œæ‰“èµ >>> å°å¼Ÿä¼šå°½å¿«æ¨å‡ºæ›´å¥½çš„æ–‡ç« å’Œå¤§å®¶åˆ†äº« >>> ä½ çš„æ¿€åŠ±å°±æ˜¯æˆ‘çš„åŠ¨åŠ›!! ](https://github.com/coderZsq/coderZsq.webpack.js)
